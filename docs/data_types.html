<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="description" content="openEHR Data Types Information Model specification">
<meta name="keywords" content="EHR, clinical, data types, openehr">
<title>Data Types Information Model</title>
<link rel="stylesheet" href="https://specifications.openehr.org/styles/openehr.css">
<link rel="stylesheet" href="https://specifications.openehr.org/styles/pygments-default.css">
<link rel="stylesheet" href="https://specifications.openehr.org/styles/asciidoctor-tabs.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_data_types_information_model">Data Types Information Model</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_editor">Editor</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_support">Support</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_feedback">1.4. Feedback</a></li>
<li><a href="#_conformance">1.5. Conformance</a></li>
</ul>
</li>
<li><a href="#_background">2. Background</a>
<ul class="sectlevel2">
<li><a href="#_scope">2.1. Scope</a></li>
<li><a href="#_design_criteria">2.2. Design Criteria</a></li>
<li><a href="#_prior_work">2.3. Prior Work</a></li>
</ul>
</li>
<li><a href="#_introduction">3. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_overview">3.1. Overview</a></li>
<li><a href="#_package_structure">3.2. Package Structure</a></li>
</ul>
</li>
<li><a href="#_basic_package">4. Basic Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">4.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements">4.1.1. Requirements</a>
<ul class="sectlevel4">
<li><a href="#_bi_state_values">4.1.1.1. Bi-state Values</a></li>
<li><a href="#_state_machine_states">4.1.1.2. State Machine States</a></li>
<li><a href="#_real_world_entity_identification">4.1.1.3. Real-world Entity Identification</a></li>
</ul>
</li>
<li><a href="#_design">4.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_class_descriptions">4.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_data_value_class">4.2.1. DATA_VALUE Class</a></li>
<li><a href="#_dv_boolean_class">4.2.2. DV_BOOLEAN Class</a></li>
<li><a href="#_dv_state_class">4.2.3. DV_STATE Class</a></li>
<li><a href="#_dv_identifier_class">4.2.4. DV_IDENTIFIER Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_text_package">5. Text Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">5.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_2">5.1.1. Requirements</a>
<ul class="sectlevel4">
<li><a href="#_narrative_text">5.1.1.1. Narrative Text</a></li>
<li><a href="#_terminological_entities">5.1.1.2. Terminological Entities</a></li>
<li><a href="#_integration_scenarios">5.1.1.3. Integration Scenarios</a></li>
<li><a href="#_text_formatting">5.1.1.4. Text Formatting</a></li>
</ul>
</li>
<li><a href="#_design_2">5.1.2. Design</a></li>
<li><a href="#_qualification">5.1.3. Qualification</a></li>
<li><a href="#_meaning_modification">5.1.4. Meaning Modification</a>
<ul class="sectlevel4">
<li><a href="#_mode_changing_terms">5.1.4.1. Mode-changing Terms</a></li>
<li><a href="#_context_sensitivity">5.1.4.2. Context Sensitivity</a></li>
<li><a href="#_negation">5.1.4.3. Negation</a></li>
<li><a href="#_representation_of_meaning_modifying_terms">5.1.4.4. Representation of Meaning-Modifying Terms</a></li>
</ul>
</li>
<li><a href="#_mappings">5.1.5. Mappings</a>
<ul class="sectlevel4">
<li><a href="#_classification_broader_terms">5.1.5.1. Classification (Broader Terms)</a></li>
<li><a href="#_equivalent_synonymous_terms">5.1.5.2. Equivalent / Synonymous Terms</a></li>
<li><a href="#_more_specific_mappings_narrower_terms">5.1.5.3. More Specific Mappings (Narrower Terms)</a></li>
<li><a href="#_the_unified_medical_language_system_umls">5.1.5.4. The Unified Medical Language System (UMLS)</a></li>
<li><a href="#_legacy_mapping_scenarios">5.1.5.5. Legacy Mapping Scenarios</a></li>
</ul>
</li>
<li><a href="#_language_translations">5.1.6. Language Translations</a></li>
<li><a href="#_formatting_and_hyperlinking">5.1.7. Formatting and Hyperlinking</a>
<ul class="sectlevel4">
<li><a href="#_usage_in_dv_text_instances">5.1.7.1. Usage in DV_TEXT Instances</a></li>
<li><a href="#_usage_in_dv_coded_text_instances">5.1.7.2. Usage in DV_CODED_TEXT Instances</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_class_descriptions_2">5.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_text_class">5.2.1. DV_TEXT Class</a></li>
<li><a href="#_term_mapping_class">5.2.2. TERM_MAPPING Class</a></li>
<li><a href="#_code_phrase_class">5.2.3. CODE_PHRASE Class</a></li>
<li><a href="#_dv_coded_text_class">5.2.4. DV_CODED_TEXT Class</a></li>
<li><a href="#_dv_paragraph_class">5.2.5. DV_PARAGRAPH Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_quantity_package">6. Quantity Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">6.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_3">6.1.1. Requirements</a>
<ul class="sectlevel4">
<li><a href="#_scores_and_scales">6.1.1.1. Scores and Scales</a></li>
<li><a href="#_countable_things">6.1.1.2. Countable Things</a></li>
<li><a href="#_dimensioned_quantities">6.1.1.3. Dimensioned Quantities</a></li>
<li><a href="#_ratios_and_proportions">6.1.1.4. Ratios and Proportions</a></li>
<li><a href="#_formulations">6.1.1.5. Formulations</a></li>
<li><a href="#_quantity_ranges">6.1.1.6. Quantity Ranges</a></li>
<li><a href="#_reference_ranges">6.1.1.7. Reference Ranges</a></li>
<li><a href="#_normal_range_and_status_in_laboratory_data">6.1.1.8. Normal Range and Status in Laboratory data</a></li>
</ul>
</li>
<li><a href="#_design_3">6.1.2. Design</a>
<ul class="sectlevel4">
<li><a href="#_basic_semantics">6.1.2.1. Basic Semantics</a></li>
<li><a href="#_accuracy_and_uncertainty">6.1.2.2. Accuracy and Uncertainty</a></li>
<li><a href="#_quantity_ranges_2">6.1.2.3. Quantity Ranges</a></li>
<li><a href="#_proportions">6.1.2.4. Proportions</a></li>
<li><a href="#_normal_and_reference_ranges">6.1.2.5. Normal and Reference Ranges</a></li>
<li><a href="#_recording_time">6.1.2.6. Recording Time</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_class_descriptions_3">6.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_ordered_class">6.2.1. DV_ORDERED Class</a></li>
<li><a href="#_dv_interval_class">6.2.2. DV_INTERVAL Class</a></li>
<li><a href="#_reference_range_class">6.2.3. REFERENCE_RANGE Class</a></li>
<li><a href="#_dv_ordinal_class">6.2.4. DV_ORDINAL Class</a></li>
<li><a href="#_dv_scale_class">6.2.5. DV_SCALE Class</a></li>
<li><a href="#_dv_quantified_class">6.2.6. DV_QUANTIFIED Class</a></li>
<li><a href="#_dv_amount_class">6.2.7. DV_AMOUNT Class</a></li>
<li><a href="#_dv_quantity_class">6.2.8. DV_QUANTITY Class</a></li>
<li><a href="#_dv_count_class">6.2.9. DV_COUNT Class</a></li>
<li><a href="#_dv_proportion_class">6.2.10. DV_PROPORTION Class</a></li>
<li><a href="#_proportion_kind_class">6.2.11. PROPORTION_KIND Class</a></li>
<li><a href="#_dv_absolute_quantity_class">6.2.12. DV_ABSOLUTE_QUANTITY Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes">6.3. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_units_syntax">6.3.1. Units Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_date_time_package">7. Date Time Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">7.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_4">7.1.1. Requirements</a>
<ul class="sectlevel4">
<li><a href="#_standard_datetimes">7.1.1.1. Standard Date/Times</a></li>
<li><a href="#_partial_datetimes">7.1.1.2. Partial Date/Times</a></li>
</ul>
</li>
<li><a href="#_design_4">7.1.2. Design</a>
<ul class="sectlevel4">
<li><a href="#_general_approach">7.1.2.1. General Approach</a></li>
<li><a href="#_partial_datetimes_2">7.1.2.2. Partial Date/Times</a></li>
<li><a href="#_calendars">7.1.2.3. Calendars</a></li>
<li><a href="#_representation">7.1.2.4. Representation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_class_descriptions_4">7.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_temporal_class">7.2.1. DV_TEMPORAL Class</a></li>
<li><a href="#_dv_date_class">7.2.2. DV_DATE Class</a></li>
<li><a href="#_dv_time_class">7.2.3. DV_TIME Class</a></li>
<li><a href="#_dv_date_time_class">7.2.4. DV_DATE_TIME Class</a></li>
<li><a href="#_dv_duration_class">7.2.5. DV_DURATION Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_time_specification_package">8. Time_specification Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_6">8.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_5">8.1.1. Requirements</a></li>
<li><a href="#_design_5">8.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_5">8.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_time_specification_class">8.2.1. DV_TIME_SPECIFICATION Class</a></li>
<li><a href="#_dv_periodic_time_specification_class">8.2.2. DV_PERIODIC_TIME_SPECIFICATION Class</a></li>
<li><a href="#_dv_general_time_specification_class">8.2.3. DV_GENERAL_TIME_SPECIFICATION Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes_2">8.3. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_phase_linked_time_specification_syntax">8.3.1. Phase-linked Time Specification Syntax</a></li>
<li><a href="#_event_linked_periodic_time_specification_syntax">8.3.2. Event-linked Periodic Time Specification Syntax</a></li>
<li><a href="#_general_time_specification_syntax">8.3.3. General Time Specification Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_encapsulated_package">9. Encapsulated Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_7">9.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_6">9.1.1. Requirements</a></li>
<li><a href="#_design_6">9.1.2. Design</a></li>
<li><a href="#_examples">9.1.3. Examples</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_6">9.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_encapsulated_class">9.2.1. DV_ENCAPSULATED Class</a></li>
<li><a href="#_dv_multimedia_class">9.2.2. DV_MULTIMEDIA Class</a></li>
<li><a href="#_dv_parsable_class">9.2.3. DV_PARSABLE Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_uri_package">10. Uri Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_8">10.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_7">10.1.1. Requirements</a></li>
<li><a href="#_design_7">10.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_definitions">10.2. Definitions</a></li>
<li><a href="#_class_descriptions_7">10.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_uri_class">10.3.1. DV_URI Class</a></li>
<li><a href="#_dv_openehr_uri_class">10.3.2. DV_OPENEHR_URI Class</a></li>
<li><a href="#_dv_ehr_uri_class">10.3.3. DV_EHR_URI Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes_3">10.4. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_dv_openehr_uri_syntax">10.4.1. DV_OPENEHR_URI Syntax</a></li>
<li><a href="#_dv_ehr_uri_syntax">10.4.2. DV_EHR_URI Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_implementation_strategies">11. Implementation Strategies</a>
<ul class="sectlevel2">
<li><a href="#_overview_9">11.1. Overview</a></li>
<li><a href="#_quantities_and_ordered_numeric">11.2. Quantities and Ordered_numeric</a></li>
<li><a href="#_unicode">11.3. Unicode</a></li>
<li><a href="#_dates_and_times">11.4. Dates and Times</a></li>
</ul>
</li>
<li><a href="#_comparison_with_hl7v3_types">Appendix A: Comparison with HL7v3 Types</a>
<ul class="sectlevel2">
<li><a href="#_scope_2">A.1. Scope</a></li>
<li><a href="#_design_differences">A.2. Design Differences</a>
<ul class="sectlevel3">
<li><a href="#_naming">A.2.1. Naming</a></li>
<li><a href="#_identification">A.2.2. Identification</a></li>
<li><a href="#_archetyping">A.2.3. Archetyping</a></li>
<li><a href="#_treatment_of_inbuilt_types">A.2.4. Treatment of Inbuilt Types</a></li>
<li><a href="#_use_of_null_markers">A.2.5. Use of Null Markers</a></li>
<li><a href="#_terminology_approach">A.2.6. Terminology Approach</a></li>
<li><a href="#_datetime_approach">A.2.7. Date/Time Approach</a></li>
<li><a href="#_time_specification_types">A.2.8. Time Specification Types</a></li>
<li><a href="#_type_conversions">A.2.9. Type Conversions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://specifications.openehr.org/images/openEHR_logo_RGB.svg" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_data_types_information_model" class="sect0"><a class="anchor" href="#_data_types_information_model"></a>Data Types Information Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="https://www.openehr.org/programs/specification" target="_blank" rel="noopener">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: RM latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: STABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: EHR, clinical, data types, openehr</p></td>
</tr>
</tbody>
</table>
<div class="imageblock text-center">
<div class="content">
<object type="image/svg+xml" data="openehr_block_diagram.svg" width="60%"><span class="alt">openEHR components</span></object>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2003 - 2024 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="https://www.openehr.org" target="_blank" rel="noopener">The openEHR Foundation</a> is an independent, non-profit foundation, facilitating the sharing of health records by consumers and clinicians via open specifications, clinical models and open platform implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://specifications.openehr.org/components/RM/open_issues" target="_blank" rel="noopener">Problem Reports</a><br>
 Web: <a href="https://specifications.openehr.org" target="_blank" rel="noopener">specifications.openEHR.org</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record"><a class="anchor" href="#_amendment_record"></a>Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser, Implementer</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>2.2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-90" target="_blank" rel="noopener">SPECRM-90</a>: Add new <code>DV_OPENEHR_URI</code> type as descendant of <code>DV_URI</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Iancu,<br>
E Sundvall,<br>
M Polajnar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>01 Nov 2024</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-101" target="_blank" rel="noopener">SPECRM-101</a>: Correct error in <code><em>less_than()</em></code> description in various <code>DV_ORDERED</code> descendants: <code>DV_QUANTIFIED</code>, <code>DV_COUNT</code>, <code>DV_QUANTITY</code>, and the DV date/time types to indicate that the result is 'this object &lt; other'.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B Verhees,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26 Dec 2020</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>RM Release 1.1.0</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-96" target="_blank" rel="noopener">SPECRM-96</a>: Consistently support negative durations. Improve documentation of negated form of <code>DV_DURATION</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Leslie,<br>
 S Garde</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 Apr 2020</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-94" target="_blank" rel="noopener">SPECRM-94</a>: Correct arithmetic and comparison functions in Data Types.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27 Apr 2020</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECPUB-7" target="_blank" rel="noopener">SPECPUB-7</a>: Convert citations to bibtex form.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Dec 2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-92" target="_blank" rel="noopener">SPECRM-92</a>. Correct numerous minor typographical and formatting errors.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">J Mewes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Nov 2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-64" target="_blank" rel="noopener">SPECRM-64</a>: Add <code>CODE_PHRASE.<em>term</em></code> optional field to carry rubric (preferred term) text. (Addresses <a href="https://specifications.openehr.org/tickets/SPECPR-132" target="_blank" rel="noopener">SPECPR-132</a>, <a href="https://specifications.openehr.org/tickets/SPECPR-165" target="_blank" rel="noopener">SPECPR-165</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel,<br>
 I McNicoll,<br>
 SEC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08 Oct 2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-19" target="_blank" rel="noopener">SPECRM-19</a>: Add support for Real 'ordinal' values with <code>DV_SCALE</code> data type (addresses <a href="https://specifications.openehr.org/tickets/SPECPR-44" target="_blank" rel="noopener">SPECPR-44</a>);<br>
 Remove <code><em>limits()</em></code> function in passing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I McNicoll,<br>
 SEC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19 Oct 2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-65" target="_blank" rel="noopener">SPECRM-65</a>: Add <code><em>units_system</em></code> and <code><em>units_display_name</em></code> attributes to <code>DV_QUANTITY</code>. (Addresses <a href="https://specifications.openehr.org/tickets/SPECPR-251" target="_blank" rel="noopener">SPECPR-251</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel,<br>
 I McNicoll,<br>
 S Ljosland Bakke,<br>
 S Garde,<br>
 D Bosca,<br>
 B Lah,<br>
 B Naess</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Oct 2019</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>RM Release 1.0.4</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-39" target="_blank" rel="noopener">SPECRM-39</a>: Support newlines and formatting in <code>DV_TEXT</code>. (Addresses <a href="https://specifications.openehr.org/tickets/SPECPR-117" target="_blank" rel="noopener">SPECPR-117</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21 Dec 2018</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-78" target="_blank" rel="noopener">SPECRM-78</a>: Improve documentation on 'plain text' EHR URIs.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-72" target="_blank" rel="noopener">SPECRM-72</a>: Add guidance on date/time formatting, recommending extended ISO8601 format.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B Lah</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECPUB-3" target="_blank" rel="noopener">SPECPUB-3</a>: Correct UML conversion error: <code>DV_MULTIMEDIA.<em>integrity_check</em></code> corrected to multiple bytes. (fixes <a href="https://specifications.openehr.org/tickets/SPECPR-295" target="_blank" rel="noopener">SPECPR-295</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P Bos</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECPUB-3" target="_blank" rel="noopener">SPECPUB-3</a>: Correct UML coversion errors: revert <code>DV_MULTIMEDIA.<em>data</em></code> to <code>Array&lt;Byte&gt;</code>; revert <code><em>integrity_check_algorithm</em></code> multiplicity to <code>[0..1]</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">K Lundberg</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-67" target="_blank" rel="noopener">SPECRM-67</a>: Improve description of <code>DV_ENCAPSULATED</code> encoding variations (see <a href="https://specifications.openehr.org/tickets/SPECPR-258" target="_blank" rel="noopener">SPECPR-258</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P Pazos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23 Apr 2018</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECPUB-3" target="_blank" rel="noopener">SPECPUB-3</a>: Remove invariants except for <code><em>id</em></code> field, as per SPECRM-23 (see <a href="https://specifications.openehr.org/tickets/SPECPR-202" target="_blank" rel="noopener">SPECPR-202</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Iancu,<br>
 P Pazos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Apr 2018</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>RM Release 1.0.3</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-32" target="_blank" rel="noopener">SPECRM-32</a>: Add invariant to <code>DV_PROPORTION</code> preventing 0 denominator. (<a href="https://specifications.openehr.org/tickets/SPECPR-112" target="_blank" rel="noopener">SPECPR-112</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P Pazos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Nov 2015</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-33" target="_blank" rel="noopener">SPECRM-33</a>: Clarify specification of EHR URI scheme. Slight adjustments to <code>DV_EHR_URI</code> text.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel,<br>
 E Sundvall,<br>
 B Lah,<br>
 S Iancu</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-23" target="_blank" rel="noopener">SPECRM-23</a>: Make some <code>DV_IDENTIFIER</code> features optional. (<a href="https://specifications.openehr.org/tickets/SPECPR-33" target="_blank" rel="noopener">SPECPR-33</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-44" target="_blank" rel="noopener">SPECRM-44</a>: Remove <code>DV_ENCAPSULATED.<em>size</em></code> abstract property. (<a href="https://specifications.openehr.org/tickets/SPECPR-98" target="_blank" rel="noopener">SPECPR-98</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPECRM-20" target="_blank" rel="noopener">SPECRM-20</a>: Correct wrong <code>DV_DATE.<em>magnitude</em></code> origin to '0001-01-01' (<a href="https://specifications.openehr.org/tickets/SPECPR-64" target="_blank" rel="noopener">SPECPR-64</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P Gummer</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>Release 1.0.2</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-257" target="_blank" rel="noopener">SPEC-257</a>: Correct minor typos and clarify text. Replace <code>DV_EHR_URI</code> with <code>DV_URI</code> in inheritance of class definition of <code>DV_EHR_URI</code>.<br>
 Clarify the description of the type attribute in <code>DV_PROPORTION</code> to indicate how it is controlled by <code>PROPORTION_KIND</code>.  Add <code><em>as_string()</em></code> function to <code>DV_ENCAPSULATED</code> class in UML diagram of encapsulated package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Cook<br>
 C Ma,<br>
 R Chen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Nov 2008</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-261" target="_blank" rel="noopener">SPEC-261</a>: Indicate how accuracy is treated over add/subtract operations in <code>DV_QUANTIFIED</code> types. Indicate special values for unknown accuracy.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Geurts,<br>
 R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>Release 1.0.1</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-144" target="_blank" rel="noopener">SPEC-144</a>: Add new type: <code>DV_PROPORTION</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 Apr 2007</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-198" target="_blank" rel="noopener">SPEC-198</a>: Change DV_Date/Time/Duration to have value as attribute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-199" target="_blank" rel="noopener">SPEC-199</a>: Add normal_range attribute to <code>DV_ORDERED</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-200" target="_blank" rel="noopener">SPEC-200</a>. Correct Release 1.0 typographical errors. Correct <code>DV_ENCAPSULATED</code>.<code><em>size</em></code> to abstract in definition table. Correct <code>DV_STATE</code>.<code><em>value</em></code> in UML of <code>basic</code> package to be <code>DV_CODED_TEXT</code>. Correct <code>DV_ORDINAL</code>.<code><em>symbol</em></code> type to <code>DV_CODED_TEXT</code> in UML diagram for <code>QUANTITY</code> package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel<br>
 S Heard<br>
 G Grieve<br>
 D Lloyd<br>
 R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add missing inheritance of <code>Ordered</code> to <code>DV_ORDERED</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Grieve</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-205" target="_blank" rel="noopener">SPEC-205</a>: Convert Date/time constants to a class.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-211" target="_blank" rel="noopener">SPEC-211</a>: Add <code><em>magnitude_status</em></code> to <code>DV_QUANTIFIED</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-215" target="_blank" rel="noopener">SPEC-215</a>: Merge <code>DV_PARTIAL_XX</code> date/time classes and move ISO 8601 semantics to Support IM. Remove <code>DV_WORLD_TIME</code> class.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-216" target="_blank" rel="noopener">SPEC-216</a>: Allow mixture of W, D etc in ISO8601 Duration (deviation from standard).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-219" target="_blank" rel="noopener">SPEC-219</a>: Use constants instead of literals to refer to terminology in RM.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-221" target="_blank" rel="noopener">SPEC-221</a>. Add normal_status to <code>DV_ORDERED</code>. Adjusted invariants.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-227" target="_blank" rel="noopener">SPEC-227</a>: Remove <code>DV_QUANTITY_RATIO</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-230" target="_blank" rel="noopener">SPEC-230</a>: Change <code>DV_DATE_TIME</code>.<code><em>to_quantity</em></code> to seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C Ma</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-236" target="_blank" rel="noopener">SPEC-236</a>: Change use of Character to Octet in <code>DV_MULTIMEDIA</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Grieve</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-237" target="_blank" rel="noopener">SPEC-237</a>: Correct semantics of Quantity and Date/Time types.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 G Grieve</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-240" target="_blank" rel="noopener">SPEC-240</a>: Allow <code>DV_ORDINAL</code> values to be negative.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-247" target="_blank" rel="noopener">SPEC-247</a>: Add <code>DV_TEMPORAL</code> class to <code>quantity</code> package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>Release 1.0</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-176" target="_blank" rel="noopener">SPEC-176</a>. Make <code>DV_QUANTIFIED</code>.<code><em>accuracy</em></code> optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Feb 2006</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-163" target="_blank" rel="noopener">SPEC-163</a>. Add identifiers to <code>FEEDER_AUDIT</code> for originating and gateway systems. Added <code><em>assigner</em></code> attribute to <code>DV_IDENTIFIER</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-121" target="_blank" rel="noopener">SPEC-121</a>. Improve <code>DV_EHR_URI</code> model to support Xpath style paths.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-161" target="_blank" rel="noopener">SPEC-161</a>. Support distributed versioning. Remove functions from <code>DV_EHR_URI</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 H Frankel</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>Release 0.96</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>Release 0.95</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.9.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Improve implementation guidance. <code>DV_ORDINAL</code>.<code><em>limits</em></code> type corrected to <code>REFERENCE_RANGE&lt;DV_ORDINAL&gt;</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22 Feb 2005</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-126" target="_blank" rel="noopener">SPEC-126</a>. Correct details of partial date/time classes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Dec 2004</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-112" target="_blank" rel="noopener">SPEC-112</a>. Add <code>DV_PARTIAL_DATE_TIME</code> class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-113" target="_blank" rel="noopener">SPEC-113</a>. Add <code>DATA_VALUE</code> subtype for identifying realworld entities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-118" target="_blank" rel="noopener">SPEC-118</a>. Make package names lower case.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-119" target="_blank" rel="noopener">SPEC-119</a>. Improve Data types documentation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-102" target="_blank" rel="noopener">SPEC-102</a>. Make <code>DV_TEXT</code>.<code><em>language</em></code> and <code><em>charset</em></code> optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>Release 0.9</strong></p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-23" target="_blank" rel="noopener">SPEC-23</a>. <code>TERM_MAPPING</code>.<code><em>match</em></code> should be coded/enumerated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Grieve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Mar 2004</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-69" target="_blank" rel="noopener">SPEC-69</a>. Correct date/time types statistical descriptions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Goodchild</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-46" target="_blank" rel="noopener">SPEC-46</a>. Rename <code>COORDINATED_TERM</code> to <code>CODE_PHRASE</code> and <code>DV_CODED_TEXT</code>.<code><em>definition</em></code> to <code><em>defining_code</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-84" target="_blank" rel="noopener">SPEC-84</a>. Rename <code>DV_COUNTABLE</code> to <code>DV_COUNT</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-90" target="_blank" rel="noopener">SPEC-90</a>. Make <code>TERM_MAPPING</code>.<code><em>purpose</em></code> optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-91" target="_blank" rel="noopener">SPEC-91</a>. Correct anomalies in use of <code>CODE_PHRASE</code> and <code>DV_CODED_TEXT</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-94" target="_blank" rel="noopener">SPEC-94</a>. Add <code><em>lifecycle</em></code> state attribute to <code>VERSION</code>; correct <code>DV_STATE</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-95" target="_blank" rel="noopener">SPEC-95</a>. Remove <code><em>property</em></code> attribute from <code>quantity</code> package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DSTC,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formally validated using ISE Eiffel 5.4.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-66" target="_blank" rel="noopener">SPEC-66</a>. Make <code>DV_ORDERED</code>.<code><em>normal_range</em></code> a function.<br>
 Correct UML for <code>DV_QUANTITY</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Nov 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-53" target="_blank" rel="noopener">SPEC-53</a>. Make <code>DV_ORDINAL</code>.<code><em>limits</em></code> a function.<br>
 <a href="https://specifications.openehr.org/tickets/SPEC-54" target="_blank" rel="noopener">SPEC-54</a>. Move <code>DV_QUANTIFIED</code>.<code><em>is_normal</em></code> to <code>DV_ORDERED</code><br>
 <a href="https://specifications.openehr.org/tickets/SPEC-55" target="_blank" rel="noopener">SPEC-55</a>. Redefine <code>DV_ORDERED</code>.<code><em>less_than</em></code> as infix function '&lt;'.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">02 Nov 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-41" target="_blank" rel="noopener">SPEC-41</a>. Visually differentiate primitive types in openEHR documents.<br>
 <a href="https://specifications.openehr.org/tickets/SPEC-34" target="_blank" rel="noopener">SPEC-34</a>. State representation of date/time classes to be ISO8601.<br>
 <a href="https://specifications.openehr.org/tickets/SPEC-52" target="_blank" rel="noopener">SPEC-52</a>. Change <code>DV_DURATION</code>.<code><em>sign</em></code> to prefix "-" operation.<br>
 <a href="https://specifications.openehr.org/tickets/SPEC-42" target="_blank" rel="noopener">SPEC-42</a>. Make <code>DV_ORDINAL</code>.<code><em>rubric</em></code> a <code>DV_CODED_TEXT</code>; <code><em>type</em></code> attribute not needed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd,<br>
 DSTC,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26 Oct 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-13" target="_blank" rel="noopener">SPEC-13</a>. Rename key classes, according to CEN ENV 13606.<br>
 <a href="https://specifications.openehr.org/tickets/SPEC-26" target="_blank" rel="noopener">SPEC-26</a>. Rename <code>DV_QUANTITY</code>.<code><em>value</em></code> to <code><em>magnitude</em></code>.<br>
 <a href="https://specifications.openehr.org/tickets/SPEC-31" target="_blank" rel="noopener">SPEC-31</a>. Change abstract <code>NUMERIC</code> to <code>DOUBLE</code> in <code>DV_QUANTITY</code>.<code><em>value</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 D Kalra,<br>
 T Beale,<br>
 A Goodchild,<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Oct 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-22" target="_blank" rel="noopener">SPEC-22</a>. Code <code>TERM_MAPPING</code>.<code><em>purpose</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">G Grieve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jun 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://specifications.openehr.org/tickets/SPEC-20" target="_blank" rel="noopener">SPEC-20</a>. Move <code>VERSION</code>.<code><em>charset</em></code> to <code>DV_TEXT</code>, <code><em>territory</em></code> to <code>TRANSACTION</code>. Remove <code>VERSION</code>.<code><em>language</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Goodchild</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Jun 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_INTERVAL</code> now inherits from <code>INTERVAL</code> to avoid duplicating semantics. (Formally validated).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25 Mar 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections to diagrams in Text package. Improved heading structure, package naming. Corrected error in <code>text</code> package diagram. Replaced <code>TEXT_FORMAT_PROPERTY</code> class with string attribute of same form. Made <code>MULTIMEDIA</code>.<code><em>media_type</em></code> mandatory.  (Formally validated).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21 Mar 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moved definitions and assumed types to Support Reference Model. No semantic changes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25 Feb 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formally validated using ISE Eiffel 5.2.<br>
 <a href="https://specifications.openehr.org/tickets/SPEC-1" target="_blank" rel="noopener">SPEC-1</a>. Review of Data Types specification.  Made pluralities of Terminology name definitions (sect 3.2.1) consistent.<br>
 Corrected types of <code>DV_ENCAPSULATED</code>.<code><em>language</em></code>, <code><em>charset</em></code>, <code>DV_MULTIMEDIA</code>.<code><em>integrity_check_algorithm</em></code>, <code><em>compression_algorithm</em></code>, <code><em>media_type</em></code>.<br>
 Corrected pluralities of Terminology name definitions (sect 3.2.1).<br>
 Corrected invariants of <code>DV_ENCAPSULATED</code>, <code>DV_MULTI_MEDIA</code>, <code>DV_QUANTITY</code>, <code>DV_CODED_TEXT</code>, <code>DV_TEXT</code>, <code>DV_INTERVAL</code>, <code>TERM_MAPPING</code>.<br>
 Corrected <code>DV_TEXT</code>.<code><em>formatting</em></code>; added <code>TERM_MAPPING</code> validity function. Made <code>DV_ORDINAL</code>.<code><em>limits</em></code> an attribute. Removed <code>TERM_MAPPING</code>.<code><em>source</em></code>; moved <code>COORDINATED_TERM</code>.<code><em>language</em></code> to <code>DV_TEXT</code>; changed type to <code>COOORDINATED_TERM</code>.<br>
 Corrected time specification classes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z Tun,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17 Feb 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rome CEN TC 251 meeting. Updates to HL7 comparison text. <code>DV_DATE</code> now inherits from <code>DV_CUSTOMARY_QUANTITY</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27 Jan 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sam Heard complete review. Changed constant terminology defs to runtime-evaluated set; removed <code>DV_PHYSICAL_DATA</code>.  Added new chapter for generic implementation guidelines, and new section for assumed types. Post-conditions moved to invariants: <code>DV_TEXT</code>.<code><em>value</em></code>, <code>DV_ORDERED</code>.<code><em>is_simple</em></code>, <code>DV_PARTIAL_DATE</code>.<code><em>probable_date</em></code>, possible_dates, <code>DV_PARTIAL_TIME</code>.<code><em>probable_time</em></code>, possible_times. Minor updates to HL7 comparison text. Added explanation to HL7 section.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13 Dec 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections: <code>DV_ENCAPSULATED</code>; <code>DV_QUANTITY</code>.<code><em>units</em></code> defined to be String; changed <code>COORDINATED_TERM</code> class (but semantically equivalent).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Nov 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changed name of LINK package to URI. Major update to Text cluster classes and explanation. Updated HL7 data type comparison.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Kalra,<br>
 D Lloyd,<br>
 M Darlison</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Nov 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_TEXT_LIST</code> reverted to <code>TEXT_LIST</code>. <code>DV_LINK</code> no longer a data types; renamed to <code>LINK</code> and moved to Common RM. <code>link</code> package renamed to <code>uri</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,<br>
 Z Tun,<br>
 T Beale,<br>
 D Kalra,<br>
 M Darlison</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Oct 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rewrite of <code>TIME_SPECIFICATION</code> parse specs. Adjustments to <code>DV_ORDINAL</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 Sep 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timezone not allowed on pure <code>DV_DATE</code> in ISO8601.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 Sep 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moved <code>DV_QUANTIFIED</code>.<code><em>units</em></code> and property attributes to <code>DV_QUANTITY</code>. Introduced <code>DV_WORLD_TIME</code>.<code><em>to_quantity</em></code>. Added <code><em>fractional_second</em></code> to <code>DV_TIME</code>, <code>DV_DATE_TIME</code>, <code>DV_DURATION</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">29 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Further corrections - removed derived ‘/’ markers; renamed <code>TERM_MAPPING</code>.<code><em>granularity</em></code> to match. Improved explanation of <code>DV_ORDINAL</code>. <code>DV_QUANTIFIED</code>.<code><em>units</em></code> is now a <code>DV_PARSABLE</code>.  <code>REFERENCE_RANGE</code>.<code><em>meaning</em></code> is now a <code>DV_TEXT</code>.  <code>DV_ENCAPSULATED</code>.<code><em>uri</em></code> is now a <code>DV_URI</code>. <code>DV_LINK</code>.<code><em>type</em></code> is now a <code>DV_TEXT</code>. Detailed review by Zar Zar Tun (DSTC).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard,<br>
 P Schloeffel,<br>
 D Lloyd,<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Further corrections - removed derived ‘/’ markers; renamed <code>TERM_MAPPING</code>.<code><em>granularity</em></code> to match.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rewrite of section describing text types; addition of new attribute <code>DV_CODED_TEXT</code>.<code><em>mappings</em></code>. Removal of <code>TERM_REFERENCE</code>.<code><em>concept_code</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 Aug 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor changes to text. Corrections to <code>DV_CODED_TEXT</code> relationships.  Made <code>DV_INTERVAL</code>.<code><em>lower_unbounded</em></code> and <code>DV_INTERVAL</code>.<code><em>upper_unbounded</em></code> functions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 Jul 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_LINK</code>.<code><em>meaning</em></code> changed to <code>DV_TEXT</code> (typo in table). Added abstract class <code>DV_WORLD_TIME</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14 Jul 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changes to <code>DV_ENCAPSULATED</code>, <code>DV_PARSABLE</code> invariants.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Jul 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_ENCAPSULATED</code>. text_equivalent renamed to <code>DV_ENCAPSULATED</code>.<code><em>alternate_text</em></code>. Added invariant for <code>QUANTITY</code>.<code><em>precision</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Jul 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added timezone to <code>DV_TIME</code> and <code>DV_DATE_TIME</code> and sign to <code>DV_DURATION</code>; added linguistic_order to <code>TERM_RELATION</code>; added as_display_string and <code><em>as_canonical_string</em></code> to all types.  Added <code>DV_STATE</code>.<code><em>is_terminal</em></code>. Renamed <code>TERM_TEXT</code> as <code>CODED_TEXT</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 Jun 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections to Text package.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 May 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numerous small changes, including: term equivalents, relationships and quantity reference ranges.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Lloyd,<br>
 D Kalra,<br>
 S Heard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 May 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separated from the openEHR Reference Model.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 May 2002</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_editor"><a class="anchor" href="#_editor"></a>Editor</h3>
<div class="ulist">
<ul>
<li>
<p>Thomas Beale, Ars Semantica (UK); openEHR Foundation Management Board.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors"><a class="anchor" href="#_contributors"></a>Contributors</h3>
<div class="paragraph">
<p>This specification benefited from wide formal and informal input from the openEHR and wider health informatics community. The openEHR Foundation would like to recognise the following people for their contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Silje Ljosland Bakke, RN, Nasjonal IKT HF, Norway</p>
</li>
<li>
<p>Pieter Bos, Senior Software Engineer, Nedap, Netherlands</p>
</li>
<li>
<p>Rong Chen MD, PhD, Cambio Healthcare Systems, Sweden</p>
</li>
<li>
<p>Matthew Darlinson, PhD, CHIME, UCL, UK</p>
</li>
<li>
<p>Heath Frankel, CTO Ocean Informatics, Australia</p>
</li>
<li>
<p>Peter Gummer, senior developer, Ocean Informatics, Australia</p>
</li>
<li>
<p>Andrew Goodchild, PhD, senior research scientist DSTC, Australia</p>
</li>
<li>
<p>Grahame Grieve, Kestral Systems, Australia</p>
</li>
<li>
<p>Sam Heard MD, Ocean Informatics, Australia</p>
</li>
<li>
<p>Sebastian Iancu, Architect, Code24, Netherlands</p>
</li>
<li>
<p>Dipak Kalra MD, PhD, Professor Health Informatics, CHIME, UCL, UK</p>
</li>
<li>
<p>Bostjan Lah, Architect, Marand, Slovenia</p>
</li>
<li>
<p>Heather Leslie MD, FRACGP, FACHI, GAICD, Atomica Informatics, Australia</p>
</li>
<li>
<p>David Lloyd (ret), CHIME, UCL, UK</p>
</li>
<li>
<p>Kristoffer Lundberg, chief architect, Cambio, Sweden</p>
</li>
<li>
<p>Chunlan Ma PhD, MD, Ocean Informatics, Australia</p>
</li>
<li>
<p>Jan Mewes, KS-plus.org, India/Germany</p>
</li>
<li>
<p>Bjørn Næss, DIPS, Norway</p>
</li>
<li>
<p>Pablo Pazos Gutierrez, CaboLabs, Uruguay</p>
</li>
<li>
<p>Peter Schloeffel MD, Ocean Informatics, Australia</p>
</li>
<li>
<p>Erik Sundvall PhD, Linkoping University, Sweden</p>
</li>
<li>
<p>Bert Verhees, Senior developer, Netherlands</p>
</li>
<li>
<p>Zar zar Tun, DSTC, Australia</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_support"><a class="anchor" href="#_support"></a>Support</h3>
<div class="paragraph">
<p>The work reported in this paper has been funded in part by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>University College London - Centre for Health Informatics and Multi-professional Education (CHIME);</p>
</li>
<li>
<p>Ocean Informatics;</p>
</li>
<li>
<p>Distributed Systems Technology Centre (DSTC), under the Cooperative Research Centres Program through the Department of the Prime Minister and Cabinet of the Commonwealth Government of Australia.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Special thanks to David Ingram, Emeritus Professor of Health Informatics at UCL, who provided a vision and collegial working environment ever since the days of GEHR (1992).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document defines the openEHR Data Types Information Model, used throughout the openEHR Reference Model.</p>
</div>
<div class="paragraph">
<p>The intended audience includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standards bodies producing health informatics standards;</p>
</li>
<li>
<p>Academic groups using openEHR;</p>
</li>
<li>
<p>The open source healthcare community;</p>
</li>
<li>
<p>Solution vendors;</p>
</li>
<li>
<p>Medical informaticians and clinicians interested in health information.</p>
</li>
<li>
<p>Health data managers.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html" target="_blank" rel="noopener">openEHR Architecture Overview</a>;</p>
</li>
<li>
<p>The <a href="https://specifications.openehr.org/releases/RM/latest/support.html" target="_blank" rel="noopener">openEHR Support Information Model</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the STABLE state. The development version of this document can be found at <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html" target="_blank" rel="noopener">https://specifications.openehr.org/releases/RM/latest/data_types.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.4. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="https://discourse.openehr.org/c/specifications/rm" target="_blank" rel="noopener">openEHR RM specifications forum</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://specifications.openehr.org/components/RM/open_issues" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.openehr.org/components/RM/history" target="_blank" rel="noopener">RM component Change Request tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.5. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to an openEHR specification is determined by a formal test of that artifact against the relevant openEHR Implementation Technology Specification(s) (ITSs), such as an IDL interface or an XML-schema. Since ITSs are formal derivations from underlying models, ITS conformance indicates model conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_background"><a class="anchor" href="#_background"></a>2. Background</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_scope"><a class="anchor" href="#_scope"></a>2.1. Scope</h3>
<div class="paragraph">
<p>The data type specification presented here defines the clinical/scientific data types which are used in
other openEHR models. Harmonisation of data types between information models used by related
services in a health information infrastructure is essential to reducing the conversion work and potential
for errors between these services. Accordingly, the openEHR data type specification is intended to
work not only for the EHR, but also for other models defined by openEHR, such as the openEHR
demographic and terminological models.</p>
</div>
<div class="paragraph">
<p>The types described here have been derived from data types used in Good Electronic Health Record (<a href="#GeHR_Aus2001">Beale &amp; Heard&#44; 2000</a>), the Synapses project
(<a href="#Synapses_Req_A">Kalra&#44; 1996</a>), and various standards <a href="https://www.iso.org/standard/40784.html" target="_blank" rel="noopener">ISO 13606-1</a>, <a href="https://www.iso.org/standard/50120.html" target="_blank" rel="noopener">ISO 13606-3</a> and <a href="https://www.hl7.org/implement/standards/product_brief.cfm?product_id=264" target="_blank" rel="noopener">HL7v3 Data Types</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_criteria"><a class="anchor" href="#_design_criteria"></a>2.2. Design Criteria</h3>
<div class="paragraph">
<p>Over and above the need to satisfy the functional requirements of clinical data, three concerns have
driven the design of the openEHR data types:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>clarity of expression</p>
</li>
<li>
<p>ease of implementation</p>
</li>
<li>
<p>interoperability with data types from other standards</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The first of these has led to models which try to clearly convey the semantics of types required by the
clinical domain. The use of constraints (pre- and post-conditions and class invariants) and a comprehensible
class structure ensures formal self-consistency, correct type-substitutability and implementability
in object-oriented formalisms. Types have been designed so as not to clash with norms of
object-oriented languages and libraries, in particular, class names and the inbuilt types. Accordingly,
all types presented here have a logical name commencing with <code>DV_</code>, ensuring that there is no clash
with a type in the implementation formalism, hence the type <code>DV_DATE</code> presented here will not be confused
with the type <code>DATE</code> which appears in many programming languages or libraries.</p>
</div>
<div class="paragraph">
<p>Object-oriented languages which have been considered include IDL, C++, Java, C#, Eiffel, Delphi
and Python. Each of these languages obeys some variant of the well-known semantics of classes,
encapsulation, typing and inheritance. The data types described here follow the tenets of object-orientation
defined in UML most closely, while being careful not to invalidate their implementation in
any language. The models have all been validated by implementation in the Eiffel language, the closest
available semantic fit for UML, and currently the most powerful of mainstream object-oriented
formalisms.</p>
</div>
<div class="paragraph">
<p>Implementability in XML-schema has also been an important design criterion, and the current data
types remove many of the problems which the GEHR and CEN data types presented for XMLschema.
There has been no attempt to support XML-DTD, since it has no type system, and cannot
reliably be reasoned about in an object-oriented way.</p>
</div>
<div class="paragraph">
<p>To simplify implementation in all object-oriented formalisms, including IDL, programming languages
and XML-schema, multiple inheritance has generally been avoided (where it is used, only one
branch corresponds to substitutability). Generic classes have been used, since they significantly clarify
the model. Type genericity is available in Java, C#, Eiffel, C++, and some other languages. For
languages not having it, there is a well-known transformation from models containing generic classes
to classes for non-generic types systems.</p>
</div>
<div class="paragraph">
<p>Implementability in relational databases has also been considered, and appears relatively straightforward,
since only the data view of the types needs to be represented. Many implementations are likely
to use only a single String or XML string to represent each entire data instance, which significantly
simplifies things.</p>
</div>
</div>
<div class="sect2">
<h3 id="_prior_work"><a class="anchor" href="#_prior_work"></a>2.3. Prior Work</h3>
<div class="paragraph">
<p>Four other type systems for clinical data, namely the GEHR data types, the HL7 v3 data types, the
<a href="https://www.iso.org/standard/40784.html" target="_blank" rel="noopener">ISO 13606-1</a> data item types, and the <a href="https://www.omg.org/spec/COAS/" target="_blank" rel="noopener">OMG Corbamed</a> data types were carefully scrutinised in order to
ensure a) that all needed types were covered in the openEHR specification, and b) that data conversion
will be possible. Concepts from all three are cross-referenced throughout this specification where
possible.</p>
</div>
<div class="paragraph">
<p>Because the <a href="https://www.hl7.org/implement/standards/product_brief.cfm?product_id=264" target="_blank" rel="noopener">HL7v3 data type specification</a> is a widely available and comprehensive specification for
clinican data types, particular attention has been paid to incorporating its semantics, as well as fixing
errors or shortcomings. While there are differences both in design approach and in detail, a significant
debt must be recognised to the authors of this work, from which many ideas in the present specification
were drawn. A detailed discussion is found in <a href="#_comparison_with_hl7v3_types">Appendix A</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>3. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview"><a class="anchor" href="#_overview"></a>3.1. Overview</h3>
<div class="paragraph">
<p>This specification describes a set of types suitable for use in scientific, clinical and related information
structures. In order for such types to exist, a set of primitive types is assumed, namely <code>Integer</code>,
<code>Real</code>, <code>Boolean</code>, <code>Character</code>, <code>Octet</code>, <code>String</code>, <code>List&lt;T&gt;</code>, <code>Set&lt;T&gt;</code>, and <code>Array&lt;T&gt;</code>. These have
standard definitions in the OMG object model used in UML, OCL, and are available in almost all
type systems. The exact assumptions are described in the openEHR Support Information Model. A
number of symbolic definitions (similar to constants in programming) are also described in the Support
IM.</p>
</div>
<div class="paragraph">
<p>The data types described here are named with the class prefix <code>DV_</code>, and inherit from the class
<code>DATA_VALUE</code>. They have two distinct uses in reference models. Firstly, they may be used as 'data
values' in reference model structures wherever the <code>DATA_VALUE</code> class appears, for example, in the
EHR Reference Model via the <code>ELEMENT</code>.<code><em>value</em></code> attribute. Additionally, specific subtypes of the data
types described here can also be used as attribute types in other classes in reference models, such as
date/times, coded terms and so on. The difference is that in the former case, only subtypes of
<code>DATA_VALUE</code> may be used, whilst in the latter case, other types may be used as well, from the
assumed set of basic types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_package_structure"><a class="anchor" href="#_package_structure"></a>3.2. Package Structure</h3>
<div class="paragraph">
<p>The package structure of the openEHR data types is illustrated below.</p>
</div>
<div id="rm_data_types_packages" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_types-packages.svg" alt="RM data types packages">
</div>
<div class="title">Figure 1. rm.data_types packages</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_package"><a class="anchor" href="#_basic_package"></a>4. Basic Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>4.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.basic</code> package, illustrated below, contains types for the concepts of bistate,
state (in a state machine) and real-world entity identifiers (see the openEHR Common IM for a
discussion on identifier types).</p>
</div>
<div id="rm_data_types_basic" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_types.basic.svg" alt="RM data types.basic">
</div>
<div class="title">Figure 2. rm.data_types.basic package</div>
</div>
<div class="sect3">
<h4 id="_requirements"><a class="anchor" href="#_requirements"></a>4.1.1. Requirements</h4>
<div class="sect4">
<h5 id="_bi_state_values"><a class="anchor" href="#_bi_state_values"></a>4.1.1.1. Bi-state Values</h5>
<div class="paragraph">
<p>One of the most basic types of data is boolean or bi-state data. The need here is for a type which both
includes a boolean value, and which inherits from the type <code>DATA_VALUE</code>, enabling it to be used as an
<code>ELEMENT</code>.<code><em>value</em></code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_state_machine_states"><a class="anchor" href="#_state_machine_states"></a>4.1.1.2. State Machine States</h5>
<div class="paragraph">
<p>A type is required to represent state values of a state machine. In a simple system of data types, a simple
integer would appear sufficient to perform this job. However, in an archetyped framework, a distinct
type is required, so that it can be archetyped not by the constraints used for integers, but by a
state machine definition instead. The type <code>DV_STATE</code> is provided for this purpose. An example of a
state machine which models the lifecycle of a medication order is illustrated in the figure below. This definition
would appear in an archetype; the values of a <code>DV_STATE</code> object are then restricted to the values
of the states in the definition.</p>
</div>
<div id="state_machine_med_order" class="imageblock text-center text-center">
<div class="content">
<img src="data_types/diagrams/state_machine.png" alt="state machine" width="80%">
</div>
<div class="title">Figure 3. Example State Machine for Medication Orders</div>
</div>
</div>
<div class="sect4">
<h5 id="_real_world_entity_identification"><a class="anchor" href="#_real_world_entity_identification"></a>4.1.1.3. Real-world Entity Identification</h5>
<div class="paragraph">
<p>Real world entities (RWEs) such as people, car engines, invoices, and appointments may all be
assigned identifiers. Although many of these are designed to be unique within a jurisdiction or issuing
space, they are often not, due to data entry errors, bad design (ids which are too small or incorporate
some non-unique characteristic of the identified entities), bad process (e.g. non-synchronised id issuing
points); identity theft (e.g. via theft of documents of proof or hacking). In general, while some real
world identifiers (RWIs) are 'nearly unique', none can be guaranteed so. Therefore, from a strict
computatoinal point of view, RWIs are not treated as reliable identifiers, but as attributes of their
owning objects, in the same ways as names and addresses for example.</p>
</div>
<div class="paragraph">
<p>Examples of RWE identifiers which are intended to be unique within the space of the issuing authority
or organisation include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>driver&#8217;s licence id</p>
</li>
<li>
<p>social security number</p>
</li>
<li>
<p>passport number</p>
</li>
<li>
<p>prescription id</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The defining logical characteristic of RWE ids is that they continue to identify the entities in question,
regardless of how they change in time; for example a social security number does not change
when someone changes their hair colour or even their gender (both of which attributes may be
recorded in the database). In general it should be the case that if two RWE ids are equal, they refer to
the same RWE.</p>
</div>
<div class="paragraph">
<p>At a practical level, RWE identifiers differ from information entity (IE) identifiers in that the former
are generally not assigned by the computing infrastructure that uses them - that is to say, in the production
computing system, such identifiers are no different from other characteristics of the entity,
such as names or addresses.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design"><a class="anchor" href="#_design"></a>4.1.2. Design</h4>
<div class="paragraph">
<p>The model defined here in the <code>DV_IDENTIFIER</code> class allows the recording of three things as part of identifying an item of interest:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the identifier given to the item of interest (mandatory).</p>
</li>
<li>
<p>the issuing authority of the kind of id used (e.g. it might be the federal department of health) (optional);</p>
</li>
<li>
<p>the assigner of the id to the item being identified. This is usually the organisation which created the item being identified (optional);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, a type of item being identified can also be recorded, such as 'driver&#8217;s licence' or 'Medicare card'. All fields are text fields, rather than coded, as no definitive vocabularies are available. However, some useful sources of terms exists, such as <a href="https://www.hl7.org/fhir/v2/0203/index.html" target="_blank" rel="noopener">HL7v2 Table 0203</a> for the <code>type</code> field. If using the latter, it is recommended to use the 'description', not the code.</p>
</div>
<div class="paragraph">
<p>Only the <code>identifier</code> field is mandatory to allow for use cases in which the other fields cannot be populated. However it is strongly recommended to populate the <code>type</code> and <code>issuer</code> fields where possible. In many cases the <code>issuer</code> and <code>assigner</code> have the same value, however two fields allow for the situation in which a central issuer provides blocks of identifiers (typically on some kind of form or other paperwork) to other organisations who then assign them to individuals, as is often done with prescription identifiers.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://specifications.openehr.org/releases/RM/latest/support.html#_identification_package" target="_blank" rel="noopener">Support IM specification</a> for a further discussion of RWEs and IEs, and the definition of IEs in openEHR.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>4.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_data_value_class"><a class="anchor" href="#_data_value_class"></a>4.2.1. DATA_VALUE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DATA_VALUE (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract parent of all <code>DV_</code> data value types.
Serves as a common ancestor of all data value types in openEHR models.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="/releases/BASE/latest/base_types.html#_openehr_definitions_class" target="_blank" rel="noopener">OPENEHR_DEFINITIONS</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_boolean_class"><a class="anchor" href="#_dv_boolean_class"></a>4.2.2. DV_BOOLEAN Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_BOOLEAN</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Items which are truly boolean data, such as true/false or yes/no answers. For such data, it is important to devise the meanings (usually questions in subjective data)  carefully, so that the only allowed results are in fact true or false.</p>
</div>
<div class="paragraph">
<p>Misuse: The DV_BOOLEAN class should not be used as a replacement for naively modelled enumerated types such as male/female etc. Such values should be coded, and in any case the enumeration often has more than two values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value of this item. Actual values may be language or implementation dependent.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_state_class"><a class="anchor" href="#_dv_state_class"></a>4.2.3. DV_STATE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_STATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>For representing state values which obey a defined state machine, such as a variable  representing the states of an instruction or care process.</p>
</div>
<div class="paragraph">
<p>DV_STATE is expressed as a String but its values are driven by archetype-defined  state machines. This provides a powerful way of capturing stateful complex processes  in simple data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="#_dv_coded_text_class">DV_CODED_TEXT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The state name. State names are determined by a state/event table defined in archetypes, and coded using openEHR Terminology or local archetype terms, as specified by the archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_terminal</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indicates whether this state is a terminal state, such as  "aborted",  "completed" etc. from which no further transitions are possible.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_identifier_class"><a class="anchor" href="#_dv_identifier_class"></a>4.2.4. DV_IDENTIFIER Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_IDENTIFIER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Type for representing identifiers of real-world entities. Typical identifiers include drivers licence number, social security number, veterans affairs number, prescription id, order id, and so on.</p>
</div>
<div class="paragraph">
<p>DV_IDENTIFIER is used to represent any identifier of a real thing, issued by some authority or agency.</p>
</div>
<div class="paragraph">
<p>Misuse: DV_IDENTIFIER is not used to express identifiers generated by the infrastructure to refer to information items; the types OBJECT_ID and OBJECT_REF and subtypes are defined for this purpose.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>issuer</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional authority which issues the kind of id used in the id field of this object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assigner</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional organisation that assigned the id to the item being identified.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The identifier value. Often structured, according to the definition of the issuing authority&#8217;s rules.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional identifier type, such as  prescription , or  Social Security Number . One day a controlled vocabulary might be possible for this.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Id_valid</em>: <code>not id.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_text_package"><a class="anchor" href="#_text_package"></a>5. Text Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>5.1. Overview</h3>
<div class="paragraph">
<p>The <code>rm.data_types.text</code> package contains classes for representing all textual values in the health record, including plain text, coded terms, and narrative text. It is illustrated below.</p>
</div>
<div id="rm_data_types_text" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_types.text.svg" alt="RM data types.text">
</div>
<div class="title">Figure 4. rm.data_types.text package</div>
</div>
<div class="sect3">
<h4 id="_requirements_2"><a class="anchor" href="#_requirements_2"></a>5.1.1. Requirements</h4>
<div class="paragraph">
<p>The sections below describe the requirements of text data types. Two overriding principles should be noted at the outset with regard to text.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Regardless of what terminologies are (or are not) available to the clinician and/or the software, the primary requirement is that in all cases clinicians are able to record exactly what they want to say. This means that if they want to record something very general, such as "cold" or a very specific term such as "Ross River virus infection" they should be able to, whether or not the appropriate coded terms are available. However, the facility should be available to additionally code any such textual item, at the time or indeed at some later time, so as to satisfy reporting or other needs.</p>
</li>
<li>
<p>It is assumed that any client of terminology, such as the EHR, uses a terminology service which provides a complete interface to the terminology. The design of the <code>DV_CODED_TEXT</code> type reflects this. Accordingly, there is no concept of "post-coordination" outside the terminology environment allowed by the data types described here: the only thing that is available from the terminology service is a key which refers to a lexical entity, which may be a single term or a code phrase, and which may be part of a reference terminology and/or linked to element(s) of underlying ontologies. It is also assumed that there is no direct access to any particular terminology; access to all terminologies (whether simple coded lexicons or large semantic networks) is via the same abstract interface.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Terminology Ids are likely to be of various types.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Terminology Id = <code>"local"</code>: this constant value means that the origin of allowable values is described within the archetype. This is coded to allow translation. The local archetype then only needs the set of codes and the local translation. The archetype may contain a translation table if required.</p>
</li>
<li>
<p>Terminology Id = <code>"[authority]"</code>. This might be <code>"openehr"</code>, <code>"centc251"</code>, <code>"hl7"</code>, etc;</p>
</li>
<li>
<p>The variant Terminology Id = <code>"[authority]:[Domain value set]"</code> could also be supported, although it should not generally be necessary, since all codes should be unique within a given issuing authority. Examples might be <code>"openehr:event math function"</code>, <code>"hl7:gender"</code>;</p>
</li>
<li>
<p>Terminology Id = <code>"SNOMED-CT"</code>, <code>"ICD10AM"</code>, etc. Idemtifiers of this kind must be unique values in an accepted set of terminologies from an authoritative source. These MUST be universally known. In openEHR, names from the US National Library of Medicine&#8217;s UMLS terminology name list are used. See the <code>terminology</code> package in the <a href="https://specifications.openehr.org/releases/RM/latest/support.html#_terminology_package" target="_blank" rel="noopener">Support IM specification</a> for details.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_narrative_text"><a class="anchor" href="#_narrative_text"></a>5.1.1.1. Narrative Text</h5>
<div class="paragraph">
<p>Narrative text items are used in the EHR in a number of cases, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>values of coded attributes in the reference model;</p>
</li>
<li>
<p>recording of subjective or imprecise patient responses, particularly quantities or dates not deemed sufficiently precise to be represented using structured quantitative or date/time date types;</p>
</li>
<li>
<p>recording of narrative statements, e.g. visual observations;</p>
</li>
<li>
<p>recording of tracts of prose, e.g. overall findings and conclusions, prognoses;</p>
</li>
<li>
<p>recording of values that would normally be coded, but for which no code and/or no terminology service is available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While narrative text items themselves are not themselves coded, they may have code phrases associated
with them, as described below under Mappings, and may be mixed within a paragraph with
coded items.</p>
</div>
</div>
<div class="sect4">
<h5 id="_terminological_entities"><a class="anchor" href="#_terminological_entities"></a>5.1.1.2. Terminological Entities</h5>
<div class="paragraph">
<p>Textual entities available in a terminology service are used in the health record to enable processing,
from simple queries to decision support. Reasons for using terminology include the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To guarantee interoperability of meaning. For instance, if the term "cold" is recorded in plain text, it could be interpreted as "feeling cold", "C.O.L.D" (chronic obstructive lung disease), "rhinorrhoea", "coryza" or "U.R.T.I. (upper respiriatory tract infection), among others. If, however, it is coded from a terminology such as <a href="http://www.who.int/classifications/icd/en/" target="_blank" rel="noopener">ICD10</a> or <a href="http://www.snomed.org" target="_blank" rel="noopener">SNOMED CT</a>, any party reading the data (including software) knows the intention, since the meaning of the code in the terminology is unambiguous.</p>
</li>
<li>
<p>To standardise textual renderings of terms and avoid informal shorthand. For example, practitioners wanting to write "systolic blood pressure" write things like "systolic BP", "systolic bp", "sys. BP." and so on; use of coded terms ensures that such abbreviations are either avoided, or associated with an unambiguous meaning.</p>
</li>
<li>
<p>For unambiguous naming of problems, medications or diagnoses for support of knowledgebased tools such as prescribing packages and other decision support applications.</p>
</li>
<li>
<p>For standardised names of things in the record e.g. a heading of "Physical examination" or an entry such as "Differential diagnosis".</p>
</li>
<li>
<p>For finite sets of values ('value sets'), e.g. Blood Group = 'A|B|AB|O'.</p>
</li>
<li>
<p>For classifying other data for the purpose of statistical studies, e.g. by putting ICD disease group classifiers on actual disease names entered in health records.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A basic requirement for interoperability of text items, coded using terms (i.e. where the text is the
official rubric for the code), is that both the rubric and the code (or 'code-phrase') must be recorded,
to ensure the originally intended text is retained for receivers of EHR information who do not have
access to the terminologies used at the origin. However, where a terminology service is available, the
key can be used to unambiguously locate the string value of the term, and can also be used to find
translations in other languages. (Note that these comments do not apply to mappings, which are
described below).</p>
</div>
<div class="paragraph">
<p>In some terminologies, there are semantic networks of links emanating from most coded terms,
which classify them or relate them to other terms. Such links provide a means for decision support to
make inferences about specific things found in the record. For instance if the term "leukaemia" is
found, queries to the terminology service can be made in order to deduce that the patient has both a
"cancer" and a "disease of the immune system" (assuming leukaemia is classified under these more
general terms in the terminology).</p>
</div>
<div class="paragraph">
<p>This specification assumes the existence of a terminology service which is responsible for interrogating
actual terminologies and performing <em>validated coordination</em> of terms, i.e. creating combinations
deemed valid by the underlying source terminology, potentially without even assigning a new code to
the result. All validated coordination is carried out inside the terminology service, and any 'term'
made available by the service is already 'coordinated'. The difference between 'pre-coordinated' and
'post-coordinated' terms is that the former have a single code, whereas the latter have a code phrase,
or expression that is interpretable by the terminology. For example, the coordination "foot, left" (a
shorthand way of writing the relationship "foot has-laterality left") could be created by the terminology
service from the source terms "foot", "left" and "has-laterality" from a terminology such as
SNOMED CT. Any such coordination must be valid within the source terminology, i.e. correspond to
valid relationships defined therein.</p>
</div>
<div class="paragraph">
<p>The semantics attached to post-coordinations of terms may differ. Two categories of coordination
described in the literature are 'qualification' and 'modification'. A common definition of the first is
that qualification 'narrows meaning' - i.e. creates a new term whose possible real world instances are
within the set denoted by the original root term. Modification on the other hand changes the meaning
of a root term. Various cases are described below under Meaning Modification. Both coordination
types are assumed to be managed by the terminology service.</p>
</div>
<div class="paragraph">
<p>Coded terms may also be mapped to terms from other terminologies, which may be intended as
equivalents, classifiers, or something in between. The section below on Mappings deals with these.</p>
</div>
</div>
<div class="sect4">
<h5 id="_integration_scenarios"><a class="anchor" href="#_integration_scenarios"></a>5.1.1.3. Integration Scenarios</h5>
<div class="paragraph">
<p>In cases where openEHR data is used to represent data originally represented in other formats, one common requirement is to be able to represent both the term chosen by the user at data capture time, and also the corresponding preferred term, where the two are different. This allows both the user&#8217;s specific choice and the 'standard term' to be captured.</p>
</div>
<div class="paragraph">
<p>Secondly, where term mappings are represented it is useful to be able to capture not just the code or code-phrase of the mapped term, but the preferred term or expression text, in order to make the mapped term self-standing in the data.</p>
</div>
</div>
<div class="sect4">
<h5 id="_text_formatting"><a class="anchor" href="#_text_formatting"></a>5.1.1.4. Text Formatting</h5>
<div class="paragraph">
<p>In modern information systems in all industries, the ability to visually format text exists. EHR systems are no different, and authors of narrative text parts of the health record expect to be able to create longer tracts of text that include paragraphs, bolding, bullet lists and other typical structures, as well as simple atoms of text. Generally speaking, the text associated with a coded term is a simple string, devoid of formatting or newlines, and if the text is a direct copy of the rubric (i.e. term) from a terminology, this will almost always be the case. However there is no guarantee that this will not change in the future, with perhaps newlines and e.g. bolding being used in 'rich text' rubrics.</p>
</div>
<div class="paragraph">
<p>Clinicians need the freedom to maximise clarity of any text they write, and therefore should be able to include a reasonable level of formatting in text.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design_2"><a class="anchor" href="#_design_2"></a>5.1.2. Design</h4>
<div class="paragraph">
<p>All atomic text items are either instances of the type <code>DV_TEXT</code> or of <code>DV_CODED_TEXT</code>. The type <code>DV_TEXT</code> should be used wherever a coded or non-coded text item is allowed, while the type <code>DV_CODED_TEXT</code> should be used wherever a text item must be coded. The former allows the representation of text (<code><em>value</em></code> attribute) with optional formatting and hyperlinking (see <a href="#_formatting_and_hyperlinking">Section 5.1.7</a> below). The latter class <code>DV_CODED_TEXT</code> captures the association of two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the code of a term known in the terminology service, recorded in the <code><em>defining_code</em></code> attribute of type <code>CODE_PHRASE</code>;</p>
</li>
<li>
<p>the text rubric of the term, recorded in the <code><em>value</em></code> attribute (inherited from <code>DV_TEXT</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The attribute <code>CODE_PHRASE.<em>code_string</em></code> records a term code or code expression which may be used as an argument to a retrieval function in the terminology service interface to obtain the definition of the term or expression.</p>
</div>
<div class="paragraph">
<p>The model of <code>DV_CODED_TEXT</code> is designed to capture the <em>actual</em> term chosen by the user or software at runtime, i.e. preferred term or synonym (for terminologies supporting synonyms), or a post-coordination of underlying distinct terms if an expression was chosen as the term (such as an expression supported by SNOMED CT). A <code>DV_CODED_TEXT</code> instance is used if the final textual value chosen by the user is the exact term text (preferred or other) returned by the terminology service for the key (i.e. <code><em>code_string</em></code> value). If the user makes even the slightest modification during data entry, a mapping (see <a href="#_mappings">Section 5.1.5</a>) to a <code>DV_TEXT</code> should be used instead.</p>
</div>
<div class="paragraph deprecated">
<p><strong>Deprecated</strong>: The type <code>DV_PARAGRAPH</code> was used to represent larger tracts of text built from lists of <code>DV_TEXT</code> instances, i.e. instances of <code>DV_TEXT</code> and <code>DV_CODED_TEXT</code>. Such text is now represented as plain text with new lines or markdown text, <a href="#_formatting_and_hyperlinking">as described below</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_qualification"><a class="anchor" href="#_qualification"></a>5.1.3. Qualification</h4>
<div class="paragraph">
<p>Qualification is the process of making a term more specific through the post-coordination of additional
terms. It occurs when a terminology defines relationships between a primary term and other
terms that qualify the primary. For example a coordination using the term "bronchitis" which creates
a qualified term might be 'acute bronchitis'; all real world instances of the latter are also instances of
the former.</p>
</div>
</div>
<div class="sect3">
<h4 id="_meaning_modification"><a class="anchor" href="#_meaning_modification"></a>5.1.4. Meaning Modification</h4>
<div class="paragraph">
<p>Terms that change the meaning of other terms are often known as 'modifiers'. The difference
between modification and qualification is that modifiers change the meaning so that the modifed term
as a whole does <em>not</em> refer to instances of the unmodified term. We describe below the particular types
of modifiers and how they are represented using the text data types.</p>
</div>
<div class="sect4">
<h5 id="_mode_changing_terms"><a class="anchor" href="#_mode_changing_terms"></a>5.1.4.1. Mode-changing Terms</h5>
<div class="paragraph">
<p>One class of modifers is exemplified by the addition of words like 'risk of', 'fear of', 'history of'
and so on. These are sometimes called <em>mode-changing</em> terms, since they change the 'mode' of the
root term from the present to the past ('history of'), a potential future ('risk of') or some other possible
reality. Terms which are modified in this way should never be matched in queries searching for
the root term; for example, a query for 'coronary diease' (of the patient) should not match 'family
history of coronary disease'.</p>
</div>
</div>
<div class="sect4">
<h5 id="_context_sensitivity"><a class="anchor" href="#_context_sensitivity"></a>5.1.4.2. Context Sensitivity</h5>
<div class="paragraph">
<p>There are many terms whose meaning is changed by the context in which they are stated, such as
within a certain kind of note or test result. Consider the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a blood sugar level after a 75gm oral loading has a different meaning than a fasting blood sugar;</p>
</li>
<li>
<p>a systolic blood pressure in the pulmonary artery has a different meaning than a systemic arterial blood pressure;</p>
</li>
<li>
<p>'total hip replacement' in the context of a 'planned procedure';</p>
</li>
<li>
<p>'meningitis' in the context of a 'differential diagnosis'.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_negation"><a class="anchor" href="#_negation"></a>5.1.4.3. Negation</h5>
<div class="paragraph">
<p>Negation is a special kind of mode change and has been a serious design challenge in the past,
because modifiers like 'not' or 'no' only make sense when attached to some terms, and create nonsensical
values or ambiguities by arbitrarily association with other terms.</p>
</div>
</div>
<div class="sect4">
<h5 id="_representation_of_meaning_modifying_terms"><a class="anchor" href="#_representation_of_meaning_modifying_terms"></a>5.1.4.4. Representation of Meaning-Modifying Terms</h5>
<div class="paragraph">
<p>Rather than provide explicit features for representing modifier terms within <code>DV_CODED_TEXT</code>, the
general principle underlying representation of all post-coordinations other than qualifications, is that
a higher-level, archetyped structure such as an <code>ENTRY</code> (defined in the EHR RM), is a <em>minimal indivisible
unit of information</em>. Such higher-level entities can have internal structure, and it is possible (and
desirable) to achieve the effect of combinations of terms through this structure. In the case of <code>ENTRY</code>,
it will be via structuring of <code>CLUSTER</code>/<code>ELEMENT</code> objects. The general rule is: to obtain the full meaning
of any terms found in the record, all of the node names in any <code>ENTRY</code> (coded or not) must be considered
from the root to the relevant leaf. Conversely, the "final" meaning of any term in the record
cannot be known in isolation from the rest of the terms in the structure.</p>
</div>
<div class="paragraph">
<p>Accordingly, the concept "family history of coronary disease" is represented as an <code>ENTRY</code> whose root
is named (for example) "subject family history", and which includes further structure, which may be
in greater of lesser detail; the coded term "coronary disease" would appear somewhere in this structure.
The actual structure is completely defined by appropriate archetypes. Contrary to some perceptions,
there is no general way to represent concepts such as "family history of coronary disease",
since it will vary depending on how much detail is recorded. Where some GPs routinely record just
the simplest form, others may record the details of which family members had heart problems and
exactly what they were.</p>
</div>
<div class="paragraph">
<p>The same approach is used for context-dependent terms. Archetypes defining contexts such as
"planned procedures" or "differential diagnosis" will use these terms as their root nodes; as a result,
the meaning of any term appearing below the root can only be understood by including the root. Once
again, the exact structures are completely dependent upon archetyping, and may be simple or quite
sophisticated.</p>
</div>
<div class="paragraph">
<p>Negations are more complex than might first be apparent and are best handled by good archetype
design. Terminologies might provide a term such as "No known allergies" which is helpful. But if
someone has an allergy of some sort, the medicolegal requirement might be to record that the person
has no known allergies to penicillin or another class of medication that is being prescribed. The often
proposed approach of using a generic negation 'modifier' to deal with such issues results in further
problems. Consider the use of negation with liver - "no liver", "no palpable liver", "no liver disease",
"no history of liver disease", "no liver function", "no liver function tests". The meaning of negated
terms may be non-sensical and difficult to interpret.</p>
</div>
<div class="paragraph">
<p>A basic principle of dealing with negatives is to realise that most naïve suggested use cases are quite
ambiguous as stated. Does "no allergies" mean "no reported episode of allergy", "no allergic reactions
ever", "no known allergies to medication" or something else? Does it mean that these statements
are taken as given by the patient, or determined by tests? Like all medical phenomena, allergies
must be described in some detail for the EHR to be of any real use. Almost inevitably, this precludes
the use of negated terms. Since the actual information structure will be determined in advance by
archetype designers, clinicians will almost never be in the situation of having to negate a term. However,
if the need does arise, it should be dealt with by a negative or quantitative answer, i.e. a value
rather than a name. For example, in any <code>ENTRY</code> describing current problems, the clinician may record
the name/value pair "allergies: NONE". Here, "allergies" will be a <code>DV_CODED_TEXT</code>, and "NONE"
will be either a <code>DV_CODED_TEXT</code> or a <code>DV_TEXT</code>; the two will be associated by a containing object,
such as an instance of the <code>ELEMENT</code> class from the EHR RM. There is no explicit model of negation
in openEHR.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mappings"><a class="anchor" href="#_mappings"></a>5.1.5. Mappings</h4>
<div class="paragraph">
<p>In a number of circumstances, both plain text and coded text items are mapped to terms from other
terminologies. In theory, this should never occur, since it means that relationships between terms
which should only be knowable in the knowledge base (in the form of the terminology service, or
something else) are being created and transmitted as part of EHR information, potentially invalidating
or overriding the knowledge base. Where mappings are required, the proper approach is to create thesauri
within the knowledge environment, and map through them. Unfortunately, in some cases, activities
in the real world do not respect the information/knowledge boundary, hence the model described
here includes an explicit mapping concept, which itself includes a "purpose" and a "match" indicator.
Matching corresponds to the categories described below.</p>
</div>
<div class="sect4">
<h5 id="_classification_broader_terms"><a class="anchor" href="#_classification_broader_terms"></a>5.1.5.1. Classification (Broader Terms)</h5>
<div class="paragraph">
<p>Any text item, whether coded or not, may be classified with a coded term, for research, reporting and
decision support purposes. For example, a GP working in tropical Australia may wish to write "Ross
River infection", and be working with ICD9, which does not contain this term (although ICD9-CM
does). He or she will use a plain text item, but will still be able to map it to an ICD9 classifier, such as
the code for "arbovirus infection NOS". The same approach can be used for adding a classifying term
to a coded text item. The utility of classifier terms is various: they allow decision support to make
more powerful inferences; in situations where the available terminologies do not provide the classification
inbuilt, and where it is known that not all users of EHR data will have terminologies available.
In data terms, classification mapping can be visualised as illustrated below.</p>
</div>
<div id="coded_text_mappings" class="imageblock text-center text-center">
<div class="content">
<img src="data_types/diagrams/coded_text_mappings.png" alt="coded text mappings" width="70%">
</div>
<div class="title">Figure 5. Plain Text and Coded Text with Classifier(s)</div>
</div>
<div class="paragraph">
<p>Classifying mappings are represented by adding a term to the mappings list of the original term. Each
mapping is explicitly represented with an instance of <code>TERM_MAPPING</code>, which indicates both the term
being associated with the original text item, and a value of '&gt;' for the match attribute, which indicates
that the mapping is "broader". The possible values of the match attribute are '&gt;' (broader), '&lt;' (narrower),
and '=' (equivalent); they are taken from the ISO standards <a href="https://www.iso.org/standard/7776.html" target="_blank" rel="noopener">ISO 2788 - Guide to Establishment and development of monolingual thesauri</a> and <a href="https://www.iso.org/standard/12159.html" target="_blank" rel="noopener">ISO 5964 - Guide to Establishment and development of multilingual thesauri</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_equivalent_synonymous_terms"><a class="anchor" href="#_equivalent_synonymous_terms"></a>5.1.5.2. Equivalent / Synonymous Terms</h5>
<div class="paragraph">
<p>Data from pathology laboratories has often been coded using a terminology local to the laboratory,
due to lack of or economic unfeasibility of using existing widespread terminologies for the job. However,
some laboratories also supply a nearest equivalent code from a well-known terminology such as
<a href="http://loinc.org">LOINC</a>, to enable the receiver of the data to process it in a more standard fashion. Here, "equivalence"
is taken to mean a term of the same meaning but from a different vocabulary.</p>
</div>
<div class="paragraph">
<p>Another instance where equivalent terms might be supplied is to effect the translation of terms across
specialist vocabularies such as nursing vocabularies when sharing EHRs across jurisdictions.</p>
</div>
<div class="paragraph">
<p>In theory, the cleanest way for senders and receivers of data coded with both a local and a more standard
equivalent to deal with the mapping problem is for the originator of the local terminology to provide
a complete thesaurus of translations into one or more recognised terminologies. However, in
practice, laboratories using the HL7 v2.x messaging standard usually encode a primary term and
equivalents with the HL7 CE data type, meaning that equivalents are included only with the term they
are used with. A similar pragmatic approach to mapping equivalent terms in the EHR is likely to be
used with the data types described here, and can be effected with the same mapping approach as for
classification.</p>
</div>
<div class="paragraph">
<p>A further situation in which text values - this time plain text - is mapped to equivalent terms is when
natural language processing is used to generate coded terms for existing free-text prose. The aim of
such processing is to detect word phrases and associate them with a coded term of the same meaning,
without obliterating the original text. In terms of the model described here, a <code>CODE_PHRASE</code> is associated
with a <code>DV_TEXT</code> instance via the mappings attribute.</p>
</div>
<div class="paragraph">
<p>In all cases with equivalents, the value of the match attribute is '=', indicating that the mapping is a
synonym.</p>
</div>
</div>
<div class="sect4">
<h5 id="_more_specific_mappings_narrower_terms"><a class="anchor" href="#_more_specific_mappings_narrower_terms"></a>5.1.5.3. More Specific Mappings (Narrower Terms)</h5>
<div class="paragraph">
<p>Occasionally, there is a need to create a mapping to a term of narrower meaning than the original text
item. Circumstances in which this occurs include when a clinician wants to record a syndrome such as
"croup" or "influenza", but the terminology does not contain these general terms, although it does
contain more specific terms, e.g. "viral laryngo-tracheitis" or "influenza type A". Clearly the clinician
should be allowed to record what he/she wants (as plain text if necessary), but it should also be possible
to add a mapping to the more precise term. For mappings to narrower terms, the value of the
match attribute is '&lt;'.</p>
</div>
</div>
<div class="sect4">
<h5 id="_the_unified_medical_language_system_umls"><a class="anchor" href="#_the_unified_medical_language_system_umls"></a>5.1.5.4. The Unified Medical Language System (UMLS)</h5>
<div class="paragraph">
<p>It has been argued in GEHR (<a href="#GeHR_Aus2001">Beale &amp; Heard&#44; 2000</a>) that UMLS reference terms should also be supplied with occurrences
of coded terms, in the form of the UMLS concept unique identifier, or "CUI". UMLS is a way
of encoding terms developed at the National Library of Medicine in the United States, and consists of
a meta-thesaurus, in which terms from any extant term set (such as <a href="http://www.who.int/classifications/icd/en/" target="_blank" rel="noopener">ICDx</a>, <a href="http://www.snomed.org" target="_blank" rel="noopener">SNOMED CT</a>, READ) can be
cross-referenced. UMLS CUIs could turn out to be extremely useful for decision support and reporting.</p>
</div>
<div class="paragraph">
<p>The proper use of UMLS is that terms from particular terminologies are passed to a UMLS interface
and a CUI + rubric received in response. However, the mapping approach described above could also
be used to map UMLS CUIs to existing text or terms in an EHR; in this case, a <code>DV_CODED_TEXT</code> is
constructed for each UMLS "term", where the code is the CUI and the rubric is the text rendering of
the CUI (guaranteed unique in UMLS). The same approach can be used for any other thesaurus
which becomes available in the future.</p>
</div>
</div>
<div class="sect4">
<h5 id="_legacy_mapping_scenarios"><a class="anchor" href="#_legacy_mapping_scenarios"></a>5.1.5.5. Legacy Mapping Scenarios</h5>
<div class="paragraph">
<p>In cases where legacy data has to be converted to openEHR-compliant data, and only codes are available,
e.g. ICD or ICPC codes, the following approach is recommended:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a new <code>DV_TEXT</code> whose value is "(not available)"</p>
</li>
<li>
<p>add a mapping to the <code>DV_TEXT</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code><em>purpose</em></code> = <code>"legacy conversion"</code></p>
</li>
<li>
<p><code><em>match</em></code> = <code>"="</code></p>
</li>
<li>
<p><code><em>target</em></code> = <code>CODE_PHRASE</code> object whose <code><em>code_string</em></code> and <code><em>terminology_id</em></code> are set to correspond to the available code in the legacy data.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This expresses the reality that no text was ever recorded in the legacy system; rather a code was recorded directly in the data field. In the converted data, this code is more correctly considered a mapping.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_language_translations"><a class="anchor" href="#_language_translations"></a>5.1.6. Language Translations</h4>
<div class="paragraph">
<p>In most cases the natural language of a text object is known from the enclosing Entry (i.e. Observation)
or other enclosing context. Where it is different (e.g. a German sentence within an English language
diagnosis), or there is no enclosing context, the <code>DV_TEXT.<em>language</em></code> attribute can be set to
indicate the language of the text item.</p>
</div>
</div>
<div class="sect3">
<h4 id="_formatting_and_hyperlinking"><a class="anchor" href="#_formatting_and_hyperlinking"></a>5.1.7. Formatting and Hyperlinking</h4>
<div class="paragraph">
<p>Formatted text is represented by <code>DV_TEXT</code> and <code>DV_CODED_TEXT</code> instances. In versions <em>prior to RM Release 1.0.4</em>, <code>DV_PARAGRAPH</code> was provided as a way to represent larger tracts of text containing newlines and formatting of sub-sections, with each subsection being represented by one <code>DV_TEXT</code> or <code>DV_CODED_TEXT</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<code>DV_PARAGRAPH</code> is now deprecated, and all text should be represented using the <code>DV_TEXT</code> or <code>DV_CODED_TEXT</code>. For legacy reasons, <code>DV_PARAGRAPH</code> remains legal, and should be supported in at least a basic way.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Formatting of the text in the <code><em>value</em></code> field of <code>DV_TEXT</code> and <code>DV_CODED_TEXT</code> instances may be indicated via the optional <code><em>formatting</em></code> attribute. How this attribute is used has changed from initial versions of the openEHR Reference Model.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Additionally, the <code><em>value</em></code> field was assumed to contain no newlines. This assumption is no longer made starting from RM Release 1.0.4, since <code>DV_PARAGRAPH</code> is no longer use to represent paragraphs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A common model of text processing is of a processing pipeline that consumes readable text containing markings, which is then rendered into HTML, PDF or some other rendering format, and then displayed by a tool such as a web browser that consumes the latter format. Historical approaches to marking text were known as 'markup', such as nroff, troff, Latek, and then more recently, numerous formats whose base syntax is XML. These formats all have the disadvantages of poor human readability in raw form, and being specific to particular rendering engines, and are starting to fall out of favour for uses involving human reading of the raw text. Another common approach to formatting text is to use the <em>output format</em>, usually HTML, to express e.g. fonts, bolding etc. This is also problematic for human readability, being complicated by the use of CSS classes in tags, which then need to be defined.</p>
</div>
<div class="paragraph deprecated">
<p><strong>Deprecated</strong>: This was the original approach assumed for the <code>DV_TEXT.<em>formatting</em></code> attribute in openEHR, which was defined in versions <em>prior to RM Release 1.0.4</em> as containing CSS font strings to apply to the whole of the <code>DV_TEXT.<em>value</em></code>. This usage is now deprecated, while remaining legal in order to allow for legacy systems and data.</p>
</div>
<div class="paragraph">
<p>The current trend (emerging mainly for documentation in software) is to use 'markdown', which consists of markings in the text that visually indicate the intention: literal newlines, bolding via asterisks etc. No explicit CSS classes are needed, and conversion to rendering form is assumed to be done by an industry-standard markdown-to-HTML or other such converter. This is the approach taken by this specification, and is applied as follows.</p>
</div>
<div class="paragraph">
<p>The <code><em>formatting</em></code> attribute may contain one of the following values, with the associated meaning.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Void</code>:  if no value is supplied, no formatting marks are assumed to exist in the text, other than newlines, and it may safely be passed in a 'straight-through' fashion to a display device with no further processing, if desired;</p>
</li>
<li>
<p><code>"markdown"</code>: the text is assumed to be markdown format, strongly recommended use of the <a href="https://spec.commonmark.org/" target="_blank" rel="noopener">CommonMark</a> form of markdown, and should preferably be rendered via conversion to HTML in the usual way, but <em>may</em> be passed straight through to display if unavoidable, since markdown is acceptably human-readable;</p>
</li>
<li>
<p><code>"plain"</code>: the text is treated as in the unformatted (<code>Void</code>) case above (newlines are allowed); this option is used to enable archetype-based modelling tools to clearly require a text object to be unformatted;</p>
</li>
<li>
<p><code>"plain_no_newlines"</code>: as for the plain case, but newlines are not allowed - the text is a simple 'atom';</p>
</li>
<li>
<p>(legacy - deprecated): for legacy purposes, it remains legal to use a string of the form <code>"name:value; name:value…"</code> , e.g. <code>"font-weight : bold; font-family : Arial; font-size : 12pt;"</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Related to the question of formatting, a second optional attribute, <code>DV_TEXT.<em>hyperlink</em></code> of type <code>DV_URI</code>, exists to specify a web link associated with the whole text represented by the <code>DV_TEXT</code> instance. Similarly to the case of formatting, the more modern markdown approach to using the <code><em>value</em></code> field is also more flexible with regards to links, since multiple instances of the latter may be used within a single text.</p>
</div>
<div class="paragraph deprecated">
<p><strong>Deprecated</strong>: Starting at RM Release 1.0.4, the use of the <code><em>hyperlink</em></code> field is deprecated in favour of inline link(s) in the <code><em>value</em></code> field, represented using markdown; in CommonMark, the basic form of a link is <code>[text](uri)</code>.</p>
</div>
<div class="paragraph">
<p>Not all CommonMark features are allowed in the <code><em>value</em></code> field, if it contains markdown. The following should not be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTML 'blocks';</p>
</li>
<li>
<p>raw HTML;</p>
</li>
<li>
<p>images - these may be included in openEHR content via the <code>DV_MULTIMEDIA</code> types.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_usage_in_dv_text_instances"><a class="anchor" href="#_usage_in_dv_text_instances"></a>5.1.7.1. Usage in DV_TEXT Instances</h5>
<div class="paragraph">
<p>In a concrete instance of <code>DV_TEXT</code>, the following are the likely usages of the <code><em>value</em></code> and <code><em>formatting</em></code> attributes. The <code><em>hyperlink</em></code> is assumed to be Void in all non-legacy cases.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top"><code><em>value</em></code> attribute</th>
<th class="tableblock halign-left valign-top"><code><em>formatting</em></code> attribute</th>
<th class="tableblock halign-left valign-top">Legacy form</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text 'atom'<br>
 (no formatting, no newlines)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code> or <code>"plain_no_newlines"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(same)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text 'atom' with a hyperlink<br>
 (no formatting, no newlines)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text string of form <code>[text](uri)</code> or other CommonMark link variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>value</em></code> = plain text; <code><em>hyperlink</em></code> = URI/URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text paragraphs,<br>
 no other formatting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string with newlines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code> or <code>"plain"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_PARAGRAPH</code> instance(s) containing plain legacy text atom form <code>DV_TEXTs</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formatted text with paragraphs, bolding, italics, bullet lists, links etc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CommonMark text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_PARAGRAPH</code> instance(s) containing legacy form <code>DV_TEXTs</code> with CSS formatting and/or values in <code><em>hyperlink</em></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_usage_in_dv_coded_text_instances"><a class="anchor" href="#_usage_in_dv_coded_text_instances"></a>5.1.7.2. Usage in DV_CODED_TEXT Instances</h5>
<div class="paragraph">
<p>In a concrete instance of <code>DV_CODED_TEXT</code>, the following are the likely usages of the <code><em>value</em></code> and <code><em>formatting</em></code> attributes. The <code><em>hyperlink</em></code> is assumed to be Void in all non-legacy cases.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top"><code><em>value</em></code> attribute</th>
<th class="tableblock halign-left valign-top"><code><em>formatting</em></code> attribute</th>
<th class="tableblock halign-left valign-top">Legacy form</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(same)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term with a hyperlink</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text string of form <code>[text](uri)</code> or other CommonMark link variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>value</em></code> = plain text; <code><em>hyperlink</em></code> = URI/URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term or other text, containing newlines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain formatted text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Void or <code>"plain"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(not applicable)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_2"><a class="anchor" href="#_class_descriptions_2"></a>5.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_text_class"><a class="anchor" href="#_dv_text_class"></a>5.2.1. DV_TEXT Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_TEXT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A text item, which may contain any amount of legal characters arranged as e.g. words, sentences etc (i.e. one <code>DV_TEXT</code> may be more than one word). Visual formatting and hyperlinks may be included via markdown.</p>
</div>
<div class="paragraph">
<p>If the <code><em>formatting</em></code> field is set, the <code><em>value</em></code> field is affected as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>formatting</em> = "plain"</code>: plain text, may contain newlines;</p>
</li>
<li>
<p><code><em>formatting</em> = "plain_no_newlines"</code>: plain text with no newlines;</p>
</li>
<li>
<p><code><em>formatting</em> = "markdown"</code>: text in markdown format; use of CommonMark strongly recommended.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>DV_TEXT</code> can be coded by adding mappings to it.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displayable rendition of the item, regardless of its underlying structure. For <code>DV_CODED_TEXT</code>, this is the rubric of the complete term as provided by the terminology service.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>hyperlink</strong>: <code><a href="#_dv_uri_class">DV_URI</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>DEPRECATED: this field is deprecated; use markdown link/text in the <code><em>value</em></code> attribute, and <code>"markdown"</code> as the value of the <code><em>formatting</em></code> field.</p>
</div>
<div class="paragraph">
<p>Original usage, prior to RM Release 1.0.4: Optional link sitting behind a section of plain text or coded term item.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>formatting</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set, contains one of the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"plain"</code>: use for plain text, possibly containing newlines, but otherwise unformatted (same as Void);</p>
</li>
<li>
<p><code>"plain_no_newlines"</code>: use for text containing no newlines or other formatting;</p>
</li>
<li>
<p><code>"markdown"</code>: use for markdown formatted text, strongly recommended in the format of the CommonMark specification.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DEPRECATED usage: contains a string of the form <code>"name:value; name:value&#8230;&#8203;"</code> , e.g. <code>"font-weight : bold; font-family : Arial; font-size : 12pt;"</code>. Values taken from W3C CSS2 properties lists for background and font .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>mappings</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_term_mapping_class">TERM_MAPPING</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Terms from other terminologies most closely matching this term, typically used where the originator (e.g. pathology lab) of information uses a local terminology but also supplies one or more equivalents from well known terminologies (e.g. LOINC).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional indicator of the localised language in which the value is written. Coded from openEHR Code Set  languages . Only used when either the text object is in a different language from the enclosing <code>ENTRY</code>, or else the text object is being used outside of an <code>ENTRY</code> or other enclosing structure which indicates the language.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>encoding</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of character encoding scheme in which this value is encoded. Coded from openEHR Code Set  character sets . Unicode is the default assumption in openEHR, with UTF-8 being the assumed encoding. This attribute allows for variations from these assumptions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Language_valid</em>: <code>language /= Void implies code_set (Code_set_id_languages).has_code (language)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Encoding_valid</em>: <code>encoding /= Void implies code_set (Code_set_id_character_sets).has_code (encoding)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Mappings_valid</em>: <code>mappings /= void implies not mappings.is_empty</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Formatting_valid</em>: <code>formatting /= void implies not formatting.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_term_mapping_class"><a class="anchor" href="#_term_mapping_class"></a>5.2.2. TERM_MAPPING Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>TERM_MAPPING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Represents a coded term mapped to a <code>DV_TEXT</code>, and the relative match of the target term with respect to the mapped item. Plain or coded text items may appear in the EHR for which one or mappings in alternative terminologies are required. Mappings are only used to enable computer processing, so they can only be instances of <code>DV_CODED_TEXT</code>.</p>
</div>
<div class="paragraph">
<p>Used for adding classification terms (e.g. adding ICD classifiers to SNOMED descriptive terms), or mapping into equivalents in other terminologies (e.g. across nursing vocabularies).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>match</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_character_class" target="_blank" rel="noopener">Character</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The relative match of the target term with respect to the mapped text item. Result meanings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>'&gt;'</code>: the mapping is to a broader term e.g. orginal text =  arbovirus infection , target =  viral infection</p>
</li>
<li>
<p><code>'='</code>: the mapping is to a (supposedly) equivalent to the original item</p>
</li>
<li>
<p><code>'&lt;'</code>: the mapping is to a narrower term. e.g. original text =  diabetes , mapping =  diabetes mellitus .</p>
</li>
<li>
<p><code>'?'</code>: the kind of mapping is unknown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first three values are taken from the ISO standards 2788 ( Guide to Establishment and development of monolingual thesauri) and 5964 (Guide to Establishment and development of multilingual thesauri).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>purpose</strong>: <code><a href="#_dv_coded_text_class">DV_CODED_TEXT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Purpose of the mapping e.g. 'automated data mining', 'billing', 'interoperability'.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The target term of the mapping.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>narrower</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = ‘&lt;’ implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to a narrower term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>broader</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = ‘&gt;’ implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to a broader term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>equivalent</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to an equivalent term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>unknown</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = ‘?’ implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The kind of mapping is unknown.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_valid_match_code</strong> (<br>
c: <code><a href="/releases/BASE/latest/foundation_types.html#_character_class" target="_blank" rel="noopener">Character</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result := c = ‘&gt;’ or c = ‘=’ or c = ‘&lt;’ or c = ‘?’</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if match valid.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Purpose_valid</em>: <code>purpose /= Void implies terminology (Terminology_id_openehr).has_code_for_group_id (Group_id_term_mapping_purpose, purpose.defining_code)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Match_valid</em>: <code>is_valid_match_code (match)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_code_phrase_class"><a class="anchor" href="#_code_phrase_class"></a>5.2.3. CODE_PHRASE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>CODE_PHRASE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A fully coordinated (i.e. all coordination has been performed) term from a terminology service (as distinct from a particular terminology).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>terminology_id</strong>: <code><a href="/releases/BASE/latest/base_types.html#_terminology_id_class" target="_blank" rel="noopener">TERMINOLOGY_ID</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Identifier of the distinct terminology from which the code_string (or its elements) was extracted.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>code_string</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The key used by the terminology service to identify a concept or coordination of concepts. This string is most likely parsable inside the terminology service, but nothing can be assumed about its syntax outside that context.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>preferred_term</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional attribute to carry preferred term corresponding to the code or expression in <code><em>code_string</em></code>. Typical use in integration situations which create mappings, and representing data for which both a (non-preferred) actual term and a preferred term are both required.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Code_string_valid</em>: <code>not code_string.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_coded_text_class"><a class="anchor" href="#_dv_coded_text_class"></a>5.2.4. DV_CODED_TEXT Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_CODED_TEXT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A text item whose value must be the rubric from a controlled terminology, the key (i.e. the 'code') of which is the <code><em>defining_code</em></code> attribute. In other words: a <code>DV_CODED_TEXT</code> is a combination of a <code>CODE_PHRASE</code> (effectively a code) and the rubric of that term, from a terminology service, in the language in which the data were authored.</p>
</div>
<div class="paragraph">
<p>Since <code>DV_CODED_TEXT</code> is a subtype of <code>DV_TEXT</code>, it can be used in place of it, effectively allowing the type <code>DV_TEXT</code> to mean  a text item, which may optionally be coded.</p>
</div>
<div class="paragraph">
<p>Misuse: If the intention is to represent a term code attached in some way to a fragment of plain text, <code>DV_CODED_TEXT</code> should not be used; instead use a <code>DV_TEXT</code> and a <code>TERM_MAPPING</code> to a <code>CODE_PHRASE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_text_class">DV_TEXT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>defining_code</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The term of which the  <code><em>value</em></code> attribute is the textual rendition (i.e. rubric).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_paragraph_class"><a class="anchor" href="#_dv_paragraph_class"></a>5.2.5. DV_PARAGRAPH Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_PARAGRAPH</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>DEPRECATED: use markdown formatted <code>DV_TEXT</code> instead.</p>
</div>
<div class="paragraph">
<p>Original definition:</p>
</div>
<div class="paragraph">
<p>A logical composite text value consisting of a series of <code>DV_TEXTs</code>, i.e. plain text (optionally coded) potentially with simple formatting, to form a larger tract of prose, which may be interpreted for display purposes as a paragraph.</p>
</div>
<div class="paragraph">
<p><code>DV_PARAGRAPH</code> is the standard way for constructing longer text items in summaries, reports and so on.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>items</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_dv_text_class">DV_TEXT</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Items making up the paragraph, each of which is a text item (which may have its own formatting, and/or have hyperlinks).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Items_valid</em>: <code>not items.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quantity_package"><a class="anchor" href="#_quantity_package"></a>6. Quantity Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>6.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.quantity</code> package is illustrated below. Dates and Times are found in the next section.</p>
</div>
<div id="rm_data_types_quantity" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_types.quantity.svg" alt="RM data types.quantity">
</div>
<div class="title">Figure 6. rm.data_types.quantity package</div>
</div>
<div class="sect3">
<h4 id="_requirements_3"><a class="anchor" href="#_requirements_3"></a>6.1.1. Requirements</h4>
<div class="sect4">
<h5 id="_scores_and_scales"><a class="anchor" href="#_scores_and_scales"></a>6.1.1.1. Scores and Scales</h5>
<div class="paragraph">
<p>Medicine is a domain in which symbols representing relative magnitudes are commonly used, without exact values being used. The main purpose is usually to classify patients into groups for which different decisions might be made. Such classifications are typically known as <em>scores</em> or <em>scales</em>. For example the characterisation of pain as 'mild', 'medium', 'severe', or the reflex response to tendon percussion as "-", "+/-", "+", "++", "+++", "++++". Many scores such as the Apgar Score, Glasgow Coma Scale (GCS), and Barthel Index are globally known and used.</p>
</div>
<div class="paragraph">
<p>In some cases, there may be no way (or need) to precisely quantify such values because they reflect a subjective experience of the patient or informal judgment by the clinician. However, they are understood as being ordered, e.g. pass: [<code>++</code>] is arithmetically greater than `+`.</p>
</div>
<div class="paragraph">
<p>Similarly, even though the symbolic values for haemolysed blood in a urinalysis have approximate
ranges stated for them, as shown below, these 'values' are not usable in the same way as true quantities.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"neg"</code>, <code>"trace"</code> (10 cells/&#956;l)</p>
</li>
<li>
<p><code>"small"</code> (&lt;25 cells/&#956;l)</p>
</li>
<li>
<p><code>"moderate"</code> (&lt;80 cells/&#956;l)</p>
</li>
<li>
<p><code>"large"</code> (&gt;200 cells/&#956;l)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A second requirement for score and scale values is that in many cases there is a need to associate numeric values values with the symbols, in order to facilitate ordered comparison, and also to enable longitudinal comparison across results of the same kind (e.g. pain, protein). The majority of scores and scales are limited to Integer values, but some use Real numbers interspersed with Integers e.g. the <a href="https://www.researchgate.net/publication/228089364_Proposing_a_standardized_method_for_evaluating_patient_report_of_the_intensity_of_dyspnea_during_exercise_testing_in_COPD">Borg CR 10 scale</a> for perceived exertion. In both cases, values may be negative, zero or positive.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
an argument sometimes put forward for recording all ordinals in a more precise way is that comparisons might want to be made between the values quoted by two laboratories for the same symbol (e.g. 'moderate'). There are a number of counter-arguments. Firstly, such comparisons are a poor attempt at normalisation, an activity which is the business of pathologists, not EHR users. Secondly, the symbolic values are often arrived at by the tester making a judgement of colour on a strip, which while an adequate (and cost-effective) approach for classifying, is not a valid means of quantifying a value. Lastly, in most cases, if a quantified point value or range is desired, or available, then it will be used - meaning that the appropriate quantitative data type can be used, rather than an the ordinal type.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_countable_things"><a class="anchor" href="#_countable_things"></a>6.1.1.2. Countable Things</h5>
<div class="paragraph">
<p>A common kind of data value in medicine is the dimensionless countable quantity, e.g.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>number of doses: 2;</p>
</li>
<li>
<p>number of previous pregnancies: 1;</p>
</li>
<li>
<p>number of tablets: 3.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Values of this type are always integral. Countable values need to be convertible to real numbers for statistical purposes, for example for a study of average number of pregnancies per couple.</p>
</div>
<div class="paragraph">
<p>Some countable entities such as tablets are divisible into major fractions, typically halves and occasionally quarters.</p>
</div>
</div>
<div class="sect4">
<h5 id="_dimensioned_quantities"><a class="anchor" href="#_dimensioned_quantities"></a>6.1.1.3. Dimensioned Quantities</h5>
<div class="paragraph">
<p>The most common kind of quantity is a measured, dimensioned quantity. Anything which is measurable
(rather than countable) involves a number of data aspects, namely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a magnitude whose value is a real number;</p>
</li>
<li>
<p>the physical property being measured, with the appropriate units;</p>
</li>
<li>
<p>a concept of precision, i.e. to what number of decimal places the value is recorded;</p>
</li>
<li>
<p>a concept of accuracy, i.e. the known or assumed error in the measurement due to instrumentation or human judgement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples of dimensioned quantities include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>systolic BP: 110 mmHg</p>
</li>
<li>
<p>height: 178 cm</p>
</li>
<li>
<p>rate of asthma attacks: 7 /week</p>
</li>
<li>
<p>weight loss: 2.5 kg</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ratios_and_proportions"><a class="anchor" href="#_ratios_and_proportions"></a>6.1.1.4. Ratios and Proportions</h5>
<div class="paragraph">
<p>A common quantitative type in science and medicine is the proportion, or ratio, which is used in situations like the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1:128 (a titer);</p>
</li>
<li>
<p>Na:K concentration ratio (unitary denominator);</p>
</li>
<li>
<p>albumin:creatinine ratio;</p>
</li>
<li>
<p>% e.g. red cell distribution width (RDW) which is the width of a distribution of RBC widths.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general ratios have real number values, even if many examples appear to be integer ratios. Proportions with unitary denominator and % (denominator = 100) are common.</p>
</div>
</div>
<div class="sect4">
<h5 id="_formulations"><a class="anchor" href="#_formulations"></a>6.1.1.5. Formulations</h5>
<div class="paragraph">
<p>A concept superficially similar to proportions and ratios is formulations of materials, such as a solid in a liquid e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>250 mg / 500 ml (solute/solvent)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Although a single solute/single solvent formulation appears to have the same form as a ratio, the general form is for any number of substances to be mixed together, usually according to a particular procedure. Formulations are therefore not candidates for direct modelling as fine-grained quantities, but instead are constructed by archetyping a higher-level structure, each leaf element of which contains the required kind of Quantity.</p>
</div>
</div>
<div class="sect4">
<h5 id="_quantity_ranges"><a class="anchor" href="#_quantity_ranges"></a>6.1.1.6. Quantity Ranges</h5>
<div class="paragraph">
<p>Quantity ranges are ubiquitous in science and medicine, and may be defined for any kind of measured
phenomenon. Examples include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>healthy weight range, e.g. 48kg - 60kg</p>
</li>
<li>
<p>normal range for urinalysis in pregnancy - protein, e.g. "nil" - "trace"</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_reference_ranges"><a class="anchor" href="#_reference_ranges"></a>6.1.1.7. Reference Ranges</h5>
<div class="paragraph">
<p>A reference range is a quantity range attached to a measured value, and is common for laboratory
result values. The typical form of a reference range found in a pathology result indicates what is considered
the 'normal' range for a measured value. Examples of reference ranges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>normal range for serum Na is 135 - 145 mmol/L.</p>
</li>
<li>
<p>desirable total cholesterol: &lt; 5.5 mmol/L (strictly this probably should be 2.0 - 5.5 mmol/L, but is not usually quoted this way as low cholesterol is not considered a problem.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ranges can also be quoted for drug administrations, in which case they are usually thought of as the 'therapeutic' range. For example, the anticonvulsant drug Carbamazepine has a therapeutic range of 20 - 40 &#956;Mol/L. In some cases, there are multiple ranges associated with a drug, for example, Salicylate has a therapeutic range of 1.0 - 2.5 mmol/L and a toxic range &gt; 3.6 mmol/L</p>
</div>
<div class="paragraph">
<p>Various examples occur in which multiple ranges may be stated, including the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The administration recomendations for drugs which depend on the particular patient state. For example, the therapeutic range of Cyclosporin (an immunosuppresant) is a function of time post-transplant for the affected organ, e.g. kidney: &lt; 6 months: 250 - 350 &#956;g/L, &gt; 6 months: 100 - 200 &#956;g/L.</p>
</li>
<li>
<p>Normal ranges for blood IgG, IgA, IgM which vary significantly with the age in months from birth.</p>
</li>
<li>
<p>Progesterone and pituitary hormones have ranges which are different for different phases of the menstrual cycle and for menopause. This may result in 4 or 5 ranges given for one result. Only one will apply to any particular patient - but the exact phase of the cycle may be unknown - so the ranges may need to be associated with the value with no 'normal' range.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where there are multiple ranges, the important question is: <em>which range information is relevant to the actual data being recorded for the patient?</em> In theory, only the range corresponding to the particular patient situation should be used, i.e. the range which applies after taking into account sex, age, smoking status, "professional athlete", organ transplanted, etc. In most cases, this is a single "normal" range, or a pair of ranges, typically "therapeutic" and "critical". However, practical factors complicate things. Firstly, data is sometimes supplied from pathology labs along with some or all of the applicable reference ranges, even though only some could possibly apply. This is particularly the case if the laboratory has no other data on the patient, and cannot evaluate which range applies. The requirement for faithfulness of recording might be extended to reference data supplied by laboratories, regardless of how irrelevant or arbitrarily chosen the reference data is, meaning that such data has to be stored in the record anyway. Secondly, there may be circumstances in which physicians want a number of reference ranges, even while knowing that only one range is applicable to the datum. Ranges above and below the relevant one might be useful to a physician wishing to determine how far out of range the datum is.</p>
</div>
</div>
<div class="sect4">
<h5 id="_normal_range_and_status_in_laboratory_data"><a class="anchor" href="#_normal_range_and_status_in_laboratory_data"></a>6.1.1.8. Normal Range and Status in Laboratory data</h5>
<div class="paragraph">
<p>It is quite common for laboratories to include a normal range with each measured value, and/or a normal 'status', which indicates where the value lies with respect to the normal range. The latter will commonly take the form of markers like "HHH" (critically high), HH (abnormally high), H (borderline high), L, LL, LLL in HL7v2 messaging, although other schemes are undoubtedly used.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design_3"><a class="anchor" href="#_design_3"></a>6.1.2. Design</h4>
<div class="sect4">
<h5 id="_basic_semantics"><a class="anchor" href="#_basic_semantics"></a>6.1.2.1. Basic Semantics</h5>
<div class="paragraph">
<p>In order to make sense of the requirements in a systematic way, a proper typology for quantities is needed. The most basic characteristic of all values typically called 'quantities' is that they are ordered, meaning that the operator "&lt;" (less-than) is defined between any two values in the domain. An ancestor class for all quantities called <code>DV_ORDERED</code> is accordingly defined. This type is subtyped into ordinals, scales and true quantities, represented by the classes <code>DV_ORDINAL</code>, <code>DV_SCALE</code> and <code>DV_QUANTIFIED</code> respectively.</p>
</div>
<div class="paragraph">
<p><code>DV_ORDINAL</code> and <code>DV_SCALE</code> are used for scores and scales as described in the requirements above. <code>DV_ORDINAL</code> represents data values whose values are Integers, and which have symbolic or text names instead, such as "+", "++", "+++", or <code>"mild"</code>, <code>"medium"</code>, <code>"severe"</code>. Each symbol can be assigned any Integer value, providing a basis for computable comparison. Typical uses for <code>DV_ORDINAL</code> include representing values from the Apgar and Glasgow Coma Scales, e.g. <code>0｜heart rate absent｜</code>, <code>4｜withdraws from pain｜</code>. <code>DV_SCALE</code> is similar to <code>DV_ORDINAL</code>, and was introduced to support scales / scores containing Real values as well as Integers.</p>
</div>
<div class="paragraph">
<p>In contrast to <code>DV_ORDINAL</code> and <code>DV_SCALE</code>, instances of <code>DV_QUANTIFIED</code> and all its subtypes have precise numeric magnitudes. Accordingly, <code>DV_QUANTIFIED</code> introduces the properties <code><em>magnitude</em></code> and <code><em>magnitude_status</em></code>. The <code><em>magnitude</em></code> attribute is guaranteed to be available on any <code>DV_QUANTIFIED</code>, carrying the effective value, regardless of the particular subtype. The optional <code><em>magnitude_status</em></code> attribute can be used to provide a non-quantified indication of accuracy, and takes the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"="</code> : magnitude is a point value</p>
</li>
<li>
<p><code>"&lt;"</code> : value is &lt; magnitude</p>
</li>
<li>
<p><code>"&gt;"</code> : value is &gt; magnitude</p>
</li>
<li>
<p><code>"&lt;="</code> : value is &lt;= magnitude</p>
</li>
<li>
<p><code>"&gt;="</code> : value is &gt;= magnitude</p>
</li>
<li>
<p><code>"~"</code> : value is approximately magnitude</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not present, the meaning is <code>"="</code>.</p>
</div>
<div class="paragraph">
<p>Logically, an accuracy attribute should also be included in <code>DV_QUANTIFIED</code>, but as its modelling is different in the subtypes in a way that does not easily lend itself to a common ancestor, it is only included in the subtypes.</p>
</div>
<div class="paragraph">
<p>The <code>DV_QUANTIFIED</code> class has two subtypes: <code>DV_AMOUNT</code> and <code>DV_ABSOLUTE_QUANTITY</code>. The former corresponds to relative 'amounts' of something, either a physical property (such as mass) or items (e.g. cigarettes). Mathematically, the <code>+</code> and <code>-</code> operators (as well as <code>*</code> and <code>/</code>) are defined in the same way as for the real numbers (or any other mathematical 'field'), with the semantics that adding two relative quantities measuring the same thing (i.e. with the same units) produces another relative quantity of the same kind; while the semantics of subtraction are that one relative quantity subtracted from another generates a third.</p>
</div>
<div class="paragraph">
<p>The second subtype of <code>DV_QUANTIFIED</code>, <code>DV_ABSOLUTE_QUANTITY</code>, models quantities whose values are absolute along a line having a defined origin. The main example of absolute quantities are the temporal concepts date, time and date/time. These are distinguished from relative quantities in that the normal addition and subtraction operations don&#8217;t apply. Instead, the semantics of such operators are based on the idea of the difference between absolute values being a relative amount. For example, two dates can be subtracted, but the result is a duration, not another date. For this reason, the operations <code><em>add</em></code>, <code><em>subtract</em></code> and <code><em>diff</em></code> are defined rather than <code>+</code> or <code>-</code>. Date/time types, as well as the relative concept duration, are defined in <a href="#_date_time_package">Section 7</a>.</p>
</div>
<div class="paragraph">
<p>Subtypes of <code>DV_AMOUNT</code> are <code>DV_PROPORTION</code>, <code>DV_QUANTITY</code>, <code>DV_COUNT</code>, and <code>DV_DURATION</code> (see date_time package). The type <code>DV_COUNT</code> has an integer magnitude and is used to record naturally countable things such as number of previous pregnancies, number of steps taken by a recovering stroke victim and so on. There are no units or precision in a <code>DV_COUNT</code>. Countable quantities can be used to create instances of <code>DV_QUANTITY</code>, such as during a statistical study which average tobacco
consumption over a time period. Such a computation might cause the creation of <code>DV_QUANTITY</code> objects representing values like {magnitude = 5.85, units = '/ week'}</p>
</div>
<div class="paragraph">
<p><code>DV_QUANTITY</code> is used to represent amounts of measurable things, and has a real number magnitude, precision, units and accuracy. The <code><em>units</em></code> attribute contains the scientific unit in a parsable form defined by default by the <a href="http://unitsofmeasure.org/ucum.html" target="_blank" rel="noopener">Unified Code for Units of Measure (UCUM)</a> (case-sensitive form), or by another system or terminology specified in the <code><em>units_system</em></code> attribute. In some cases, such as metric units, the UCUM code and the display form are the same, e.g. 'kg'. However this is not the general case, and many common units have different display and code forms, e.g. degrees Celcius:  '°C' and 'Cel'. In general the unit display name should be looked up if it is not known in context that the code is directly displayable. The <code><em>units_display_name</em></code> attribute may be used if the displayable form of the units is required in the data, and/or terminology lookup is not available or desirable. Unit names may be language dependent, particularly older units.</p>
</div>
<div class="paragraph">
<p>A valid units string always implies a measured <em>property</em>, such as force or pressure. If unit strings are compared in the application environment to determine if they measure the same property (e.g. <code>"bar"</code> and <code>"kPa"</code> are both units of 'pressure'), which enables the <code><em>is_strictly_comparable_to()</em></code> function defined on <code>DV_ORDERED</code> to be properly specified on <code>DV_QUANTITY</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
while these semantics will allow comparison of e.g. two pressures recorded in <code>mbar and mmHg, or even two accelerations whose units are `"m.s^-2"</code> and <code>"m/s^2"</code>, they provide no guarantee that this is a sensible thing to do in terms of domain semantics: comparing a blood pressure to an atmospheric pressure for example may or may not make any sense. It is not within the scope of the quantity package to express such semantics - this is up to application software which uses Quantities found in specific places in the data.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_accuracy_and_uncertainty"><a class="anchor" href="#_accuracy_and_uncertainty"></a>6.1.2.2. Accuracy and Uncertainty</h5>
<div class="paragraph">
<p>Theoretically it might be argued that accuracy should not be included in a model for quantified values, because it is an artifact of a measuring process and/or device, not of a quantity itself. For example, a weight of "82 kg &#177;5%" can be represented in two parts. The "82 kg" is represented as a <code>DV_QUANTITY</code>, while the "&#177;5%" could be included in the protocol description of the weighing instrument, since this is where the error comes from. For practical purposes however, (in)accuracy in a measured quantity corresponds to a range of possible values. In realistic computing in health, it is quite likely that the accuracy will be required in computations on quantities, especially for statistical population queries in which measurement error must be disambiguated from true correlation.</p>
</div>
<div class="paragraph">
<p>Accuracy is therefore introduced as the abstract feature accuracy of the <code>DV_QUANTIFIED</code> class. It is defined concretely in the two descendants, <code>DV_AMOUNT</code>, where it is of type Real, and <code>DV_ABSOLUTE_QUANTITY</code>, where it is of a differential type defined by subtypes. A value of 0 in either case indicates 100% accuracy, i.e. no error in measurement. Where accuracy is not recorded in a quantity, it is represented by a special value. In <code>DV_AMOUNT</code>, a value of -1 for the accuracy attribute
is used for this purpose, and the constant unknown_accuracy_value = -1 is provided within the class to give a symbolic name for the special value. In the <code>DV_ABSOLUTE_QUANTITY</code> class, <code><em>accuracy_unknown</em></code> is represented by a Void (i.e. null) value for the accuracy attribute. An abstract Boolean feature <code><em>accuracy_unknown</em></code> is defined in the parent class <code>DV_QUANTIFIED</code> to provide a logical test of accuracy being absent, and is implemented in the respective  descendants by concrete functions that check for the special values.</p>
</div>
<div class="paragraph">
<p>In addition, the class <code>DV_AMOUNT</code>, provides a feature <code><em>accuracy_is_percent</em>: Boolean</code> to indicate if accuracy value is to be understood as a percentage, or an absolute value.</p>
</div>
<div class="paragraph">
<p>When two compatible quantities are added or subtracted using the + or - operators (<code>DV_AMOUNT</code> descendants) or add and substract (<code>DV_ABSOLUTE_QUANTITY</code> class), accuracy behaves in the following way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if accuracies are present in both quantities, they are added in the result, for both addition and subtraction operations;</p>
</li>
<li>
<p>if either or both quantities has an unknown accuracy, the accuracy of the result is also unknown;</p>
</li>
<li>
<p>if two <code>DV_AMOUNT</code> descendants are added or subtracted, and only one has <code><em>accuracy_is_percent</em></code> = True, accuracy is expressed in the result in the form used in the larger of the two quantities.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The related notion of 'uncertainty' is understood as a subjective judgement made by the clinician, indicating that he/she is not certain of a particular statement. It is not the same as accuracy: uncertainty may apply to non-quantified values, such as subjective statements, and it is not an aspect of objective measurement processes, but of human confidence. Where the uncertainty is due to subjective memory e.g. "I think my grandfather was 56 when he died", the uncertainty is simply recorded as another value, along with the main data item being recorded. Uncertainty is therefore not directly modelled in the openEHR data types, but appears instead in particular archetypes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_quantity_ranges_2"><a class="anchor" href="#_quantity_ranges_2"></a>6.1.2.3. Quantity Ranges</h5>
<div class="paragraph">
<p>Ranges are modelled by the generic type <code>DV_INTERVAL&lt;T:DV_ORDERED&gt;</code> which enables a range of any of the other quantity types (except ratio) to be constructed. This allows any subtype of <code>DV_ORDERED</code> to occur as a range as well.</p>
</div>
</div>
<div class="sect4">
<h5 id="_proportions"><a class="anchor" href="#_proportions"></a>6.1.2.4. Proportions</h5>
<div class="paragraph">
<p>The <code>DV_PROPORTION</code> type is provided for representing true ratios, i.e. relative values, and consists of numerator and denominator Real values, and a magnitude function which is computed as the result of the numerator/denominator division. The type attribute is used to indicate the logical type of the proportion. Supported types include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>percent</em>: denominator is 100; usual presentation is "numerator %"</p>
</li>
<li>
<p><em>unitary</em>: denominator is 1; usual presentation is "numerator"</p>
</li>
<li>
<p><em>fraction</em>: numerator and denominator are both integer values; usual presentation is n/d, e.g. such as ½ or ¾, 1/2, 3/4 etc;</p>
</li>
<li>
<p><em>integer_fraction</em>: numerator and denominator are both integer values; usual presentation is n/d; if numerator &gt; denominator, display as "a b/c", i.e. the integer part followed by the remaining fraction part, e.g. 1½; this is the most likely form for expressing a number of tablets;</p>
</li>
<li>
<p><em>ratio</em>: numerator and denominator can take any value; usual presentation is "numerator: denominator"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lastly, the <code><em>is_integral</em></code> function indicates that the numerator and denominator are both integer values; this is used for fractions (the fraction and integer_fraction types above) and other commonly occurring ratios where both parts are always integer values.</p>
</div>
</div>
<div class="sect4">
<h5 id="_normal_and_reference_ranges"><a class="anchor" href="#_normal_and_reference_ranges"></a>6.1.2.5. Normal and Reference Ranges</h5>
<div class="paragraph">
<p>Normal range for any of the quantity types (i.e. any instance of a subtype of <code>DV_ORDERED</code>) can be included via the attribute <code>DV_ORDERED</code>.<code><em>normal_range</em></code>, of type <code>REFERENCE_RANGE</code>. Other reference ranges (e.g. sub-critical, critical etc) can be included via the attribute <code>DV_ORDERED</code>.<code><em>other_reference_ranges</em></code>. The separation of normal and other reference range attributes is used because the former constitute the vast majority of ranges quoted for quantitative data.</p>
</div>
<div class="paragraph">
<p>Normal status can be included via the attribute <code>DV_ORDERED</code>.<code><em>normal_status</em></code>, which takes the form of a <code>DV_ORDINAL</code>, whose symbol attribute is coded according to the openEHR terminology group "normal status", and takes values "HHH" (critically high), "HH" (abnormally high), "H" (borderline high)", "N" (normal), "L" &#8230;&#8203; "LLL".</p>
</div>
</div>
<div class="sect4">
<h5 id="_recording_time"><a class="anchor" href="#_recording_time"></a>6.1.2.6. Recording Time</h5>
<div class="paragraph">
<p>Time can be recorded in two ways. Absolute times in the social time domain, such as dates and time of day are recorded using the types in the date_time package. Fine-grained 'time', which is a duration rather than a time, is recorded using a <code>DV_QUANTITY</code> with units = 's' or another temporal unit ('h', 'ms', 'ns' etc).</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_3"><a class="anchor" href="#_class_descriptions_3"></a>6.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_ordered_class"><a class="anchor" href="#_dv_ordered_class"></a>6.2.1. DV_ORDERED Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_ORDERED (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the concept of ordered values, which includes ordinals as well as true quantities. It defines the functions  <code>&lt;</code> and <code><em>is_strictly_comparable_to()</em></code>, the latter of which must evaluate to <code>True</code> for instances being compared with the  <code>&lt;</code> function, or used as limits in the <code>DV_INTERVAL&lt;T&gt;</code> class.</p>
</div>
<div class="paragraph">
<p>Data value types which are to be used as limits in the <code>DV_INTERVAL&lt;T&gt;</code> class must inherit from this class, and implement the function <code><em>is_strictly_comparable_to()</em></code> to ensure that instances compare meaningfully. For example, instances of <code>DV_QUANTITY</code> can only be compared if they measure the same kind of physical quantity.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code>, <code><a href="/releases/BASE/latest/foundation_types.html#_ordered_class" target="_blank" rel="noopener">Ordered</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_status</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional normal status indicator of value with respect to normal range for this value. Often included by lab, even if the normal range itself is not included. Coded by ordinals in series HHH, HH, H, (nothing), L, LL, LLL; see openEHR terminology group  <code>normal_status</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_range</strong>: <code><a href="#_dv_interval_class">DV_INTERVAL</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional normal range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_reference_ranges</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_reference_range_class">REFERENCE_RANGE</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional tagged other reference ranges for this value in its particular measurement context.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_ordered_class">DV_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Test if two instances are strictly comparable. Effected in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_simple</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this quantity has no reference ranges.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_normal</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Pre</em>: <code>normal_range /= Void or normal_status /= Void</code><br>
<em>Post_range</em>: <code>normal_range /= Void implies Result = normal_range.has (self)</code><br>
<em>Post_status</em>: <code>normal_status /= Void implies normal_status.code_string.is_equal (“N”)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value is in the normal range, determined by comparison of the value to <code><em>normal_range</em></code> if present, or by the <code><em>normal_status</em></code> marker if present.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_ordered_class">DV_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Ordered object is less than <code><em>other</em></code>. Redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Other_reference_ranges_validity</em>: <code>other_reference_ranges /= Void implies not other_reference_ranges.is_empty</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Is_simple_validity</em>: <code>(normal_range = Void and other_reference_ranges = Void) implies is_simple</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Normal_status_validity</em>: <code>normal_status /= Void implies code_set (Code_set_id_normal_statuses).has_code (normal_status)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Normal_range_and_status_consistency</em>: <code>(normal_range /= Void and normal_status /= Void) implies (normal_status.code_string.is_equal (“N”) xor not normal_range.has (self))</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_interval_class"><a class="anchor" href="#_dv_interval_class"></a>6.2.2. DV_INTERVAL Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_INTERVAL&lt;T&gt;</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Generic class defining an interval (i.e. range) of a comparable type. An interval is a contiguous subrange of a comparable base type. Used to define intervals of dates, times, quantities (whose units match) and so on. The type parameter, <code>T</code>, must be a descendant of the type <code>DV_ORDERED</code>, which is necessary (but not sufficient) for instances to be compared (<code><em>strictly_comparable</em></code> is also needed).</p>
</div>
<div class="paragraph">
<p>Without the <code>DV_INTERVAL</code> class, quite a few more <code>DV_</code> classes would be needed to express logical intervals, namely interval versions of all the date/time classes, and of quantity classes. Further, it allows the semantics of intervals to be stated in one place unequivocally, including the conditions for strict comparison.</p>
</div>
<div class="paragraph">
<p>The basic semantics are derived from the class <code>Interval&lt;T&gt;</code>, described in the support RM.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code>, <code><a href="/releases/BASE/latest/foundation_types.html#_interval_class" target="_blank" rel="noopener">Interval</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Limits_consistent</em>: <code>(not upper_unbounded and not lower_unbounded) implies (lower.is_strictly_comparable_to(upper) and lower &lt;= upper)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_reference_range_class"><a class="anchor" href="#_reference_range_class"></a>6.2.3. REFERENCE_RANGE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>REFERENCE_RANGE&lt;T&gt;</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Defines a named range to be associated with any <code>DV_ORDERED</code> datum. Each such range is particular to the patient and context, e.g. sex, age, and any other factor which affects ranges. May be used to represent normal, therapeutic, dangerous, critical etc ranges.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>meaning</strong>: <code><a href="#_dv_text_class">DV_TEXT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Term whose value indicates the meaning of this range, e.g.  normal,  critical,  therapeutic  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>range</strong>: <code><a href="#_dv_interval_class">DV_INTERVAL</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The data range for this meaning, e.g. critical  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_in_range</strong> (<br>
v: <code><a href="#_dv_ordered_class">DV_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indicates if the value  <code><em>v</em></code> is inside the range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Range_is_simple</em>: <code>(range.lower_unbounded or else range.lower.is_simple) and (range.upper_unbounded or else range.upper.is_simple)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_ordinal_class"><a class="anchor" href="#_dv_ordinal_class"></a>6.2.4. DV_ORDINAL Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_ORDINAL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A data type that represents integral score values, e.g. pain, Apgar values, etc, where there is:</p>
</div>
<div class="paragraph">
<p>a) implied ordering,
b) no implication that the distance between each value is constant, and
c) the total number of values is finite;
d) integer values only.</p>
</div>
<div class="paragraph">
<p>Note that although the term 'ordinal' in mathematics means natural numbers only, here any integer is allowed, since negative and zero values are often used by medical professionals for values around a neutral point. Examples of sets of ordinal values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-3, -2, -1, 0, 1, 2, 3 &#8201;&#8212;&#8201;reflex response values</p>
</li>
<li>
<p>0, 1, 2                 &#8201;&#8212;&#8201;Apgar values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This class is used for recording any clinical datum which is customarily recorded using symbolic values. Example: the results on a urinalysis strip, e.g. <code>{neg, trace, +, , +}</code> are used for leucocytes, protein, nitrites etc; for non-haemolysed blood <code>{neg, trace, moderate}</code>; for haemolysed blood <code>{small, moderate, large}</code>.</p>
</div>
<div class="paragraph">
<p>For scores or scales that include Real numbers (or might in the future, i.e. not fixed for all time, such as Apgar), use <code>DV_SCALE</code>. <code>DV_SCALE</code> may also be used in future for representing purely Integer-based scales, however, the <code>DV_ORDINAL</code> type should continue to be supported in software implementations in order to accommodate existing data that are instances of this type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_ordered_class">DV_ORDERED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>symbol</strong>: <code><a href="#_dv_coded_text_class">DV_CODED_TEXT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Coded textual representation of this value in the enumeration, which may be strings made from  +  symbols, or other enumerations of terms such as  <code>mild</code>, <code>moderate</code>, <code>severe</code>, or even the same number series as the values, e.g. 1, 2, 3.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value in ordered enumeration of values. Any integer value can be used.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_ordinal_class">DV_ORDINAL</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Ordinal value is less than <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_ordinal_class">DV_ORDINAL</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Test if this Ordinal is strictly comparable to <code><em>other</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_scale_class"><a class="anchor" href="#_dv_scale_class"></a>6.2.5. DV_SCALE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_SCALE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A data type that represents scale values, where there is:</p>
</div>
<div class="paragraph">
<p>a) implied ordering,
b) no implication that the distance between each value is constant, and
c) the total number of values is finite;
d) non-integer values are allowed.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Borg CR 10 Scale

0    No Breathlessness at all
0.5  Very Very Slight (Just Noticeable)
1    Very Slight
2    Slight Breathlessness
3    Moderate
... etc</pre>
</div>
</div>
<div class="paragraph">
<p>For scores that include only Integers, <code>DV_SCALE</code> may also be used, but <code>DV_ORDINAL</code> should be supported to accommodate existing data instances of that type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_ordered_class">DV_ORDERED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>symbol</strong>: <code><a href="#_dv_coded_text_class">DV_CODED_TEXT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Coded textual representation of this value in the scale range, which may be strings made from symbols or other enumerations of terms such as  <code>no breathlessness</code>, <code>very very slight</code>, <code>slight breathlessness</code>. Codes come from archetypes.</p>
</div>
<div class="paragraph">
<p>In some cases, a scale may include values that have no code/symbol. In this case, the symbol will be a <code>DV-CODED_TEXT</code> including the <code><em>terminology_id</em></code> and a blank String value for <code><em>code_string</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real number value of Scale item.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_scale_class">DV_SCALE</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Test if this Scale value is strictly comparable to <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_scale_class">DV_SCALE</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Scale value is less than <code><em>other</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_quantified_class"><a class="anchor" href="#_dv_quantified_class"></a>6.2.6. DV_QUANTIFIED Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_QUANTIFIED (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the concept of true quantified values, i.e. values which are not only ordered, but which have a precise magnitude.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_ordered_class">DV_ORDERED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude_status</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional status of magnitude with values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"="</code>   :   magnitude is a point value</p>
</li>
<li>
<p><code>"&lt;"</code>   :   value is &lt; magnitude</p>
</li>
<li>
<p><code>"&gt;"</code>   :   value is &gt; magnitude</p>
</li>
<li>
<p><code>"&lt;="</code> : value is &lt;= magnitude</p>
</li>
<li>
<p><code>"&gt;="</code> : value is &gt;= magnitude</p>
</li>
<li>
<p><code>"~"</code>   :   value is approximately magnitude</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not present, assumed meaning is  <code>"="</code> .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_any_class" target="_blank" rel="noopener">Any</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accuracy of measurement. Exact form of expression determined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_magnitude_status</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = s in {"=", "&lt;", "&gt;", "&lt;=", "&gt;=", "~"}</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Test whether a string value is one of the valid values for the magnitude_status attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_ordered_numeric_class" target="_blank" rel="noopener">Ordered_Numeric</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy_unknown</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if accuracy is not known, e.g. due to not being recorded or discernable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_dv_quantified_class">DV_QUANTIFIED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Return True if this <code>DV_QUANTIFIED</code> is considered equal to <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_quantified_class">DV_QUANTIFIED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Quantified object is less than <code><em>other</em></code>, based on comparison of <code><em>magnitude</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Magnitude_status_valid</em>: <code>magnitude_status /= Void implies valid_magnitude_status (magnitude_status)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_amount_class"><a class="anchor" href="#_dv_amount_class"></a>6.2.7. DV_AMOUNT Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_AMOUNT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the concept of relative quantified  'amounts'. For relative quantities, the  <code>+</code> and  <code>-</code> operators are defined (unlike descendants of <code>DV_ABSOLUTE_QUANTITY</code>, such as the date/time types).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_quantified_class">DV_QUANTIFIED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy_is_percent</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>True</code>, indicates that when this object was created, <code><em>accuracy</em></code> was recorded as a percent value; if <code>False</code>, as an absolute quantity value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accuracy of measurement, expressed either as a half-range percent value (<code><em>accuracy_is_percent</em></code> = <code>True</code>) or a half-range quantity. A value of <code>0</code> means that accuracy is 100%, i.e. no error.</p>
</div>
<div class="paragraph">
<p>A value of <code><em>unknown_accuracy_value</em></code> means that accuracy was not recorded.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_percentage</strong> (<br>
number: <code><a href="/releases/BASE/latest/foundation_types.html#_ordered_numeric_class" target="_blank" rel="noopener">Ordered_Numeric</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Test whether a number is a valid percentage, i.e. between 0 and 100.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_dv_amount_class">DV_AMOUNT</a>[1]</code><br>
): <code><a href="#_dv_amount_class">DV_AMOUNT</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of this amount and another. The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>both operand accuracies are unknown_accuracy_value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the accuracy value is a percentage in one operand and not in the other, the form in the result is that of the larger operand.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_amount_class">DV_AMOUNT</a>[1]</code><br>
): <code><a href="#_dv_amount_class">DV_AMOUNT</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of this amount and another. The value of <code><em>accuracy</em></code> in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code><em>accuracy</em></code> value is a percentage in one operand and not in the other, the form in the result is that of the larger operand.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_dv_amount_class">DV_AMOUNT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Return True if this <code>DV_AMOUNT</code> is considered equal to <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_dv_amount_class">DV_AMOUNT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this Amount and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>negative</strong> <em>alias</em> "-" (): <code><a href="#_dv_amount_class">DV_AMOUNT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Negated version of current object, such as used for representing a difference, e.g. a weight loss.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_amount_class">DV_AMOUNT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this object is less than <code><em>other</em></code>. Based on comparison of <code><em>magnitude</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Accuracy_is_percent_validity</em>: <code>accuracy = 0 implies not accuracy_is_percent</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Accuracy_validity</em>: <code>accuracy_is_percent implies valid_percentage (accuracy)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_quantity_class"><a class="anchor" href="#_dv_quantity_class"></a>6.2.8. DV_QUANTITY Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_QUANTITY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Quantitified type representing  scientific  quantities, i.e. quantities expressed as a magnitude and units. Units are expressed in the UCUM syntax (<a href="http://unitsofmeasure.org/ucum.html">Unified Code for Units of Measure (UCUM)</a>, by Gunther Schadow and Clement J. McDonald of The Regenstrief Institute)  (case-sensitive form) by default, or another system if <code><em>units_system</em></code> is set.</p>
</div>
<div class="paragraph">
<p>Can also be used for time durations, where it is more convenient to treat these as simply a number of seconds rather than days, months, years (in the latter case, <code>DV_DURATION</code> may be used).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_amount_class">DV_AMOUNT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numeric magnitude of the quantity.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>precision</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Precision to which the value of the quantity is expressed, in terms of number of decimal places. The value 0 implies an integral quantity.
The value -1 implies no limit, i.e. any number of decimal places.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>units</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Quantity units, expressed as a code or syntax string from either UCUM (the default) or the units system specified in <code><em>units_system</em></code>, when set.</p>
</div>
<div class="paragraph">
<p>In either case, the value is the code or syntax - normally formed of standard ASCII - which is in principal not the same as the display string, although in simple cases such as 'm' (for meters) it will be.</p>
</div>
<div class="paragraph">
<p>If the <code><em>units_display_name</em></code> field is set, this may be used for display. If not, the implementations must effect the resolution of the <code><em>units</em></code> value to a display form locally, e.g. by lookup of reference tables, request to a terminology service etc.</p>
</div>
<div class="paragraph">
<p>Example values from UCUM: "kg/m^2", “mm[Hg]", "ms-1", "km/h".</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>units_system</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional field used to specify a units system from which codes in <code><em>units</em></code> are defined. Value is a URI identifying a terminology containing units concepts from the  (<a href="https://www.hl7.org/fhir/terminologies-systems.html">HL7 FHIR terminologies list</a>).</p>
</div>
<div class="paragraph">
<p>If not set, the UCUM standard (case-sensitive codes) is assumed as the units system.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>units_display_name</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional field containing the displayable form of the <code><em>units</em></code> field, e.g. <code>'°C'</code>.</p>
</div>
<div class="paragraph">
<p>If not set, the application environment needs to determine the displayable form.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The display name may be language-dependent for various older and non-systematic units. For this reason, it is not recommended to add unit display names to archetypes, only to templates (for localisation purposes).
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_range</strong>: <code><a href="#_dv_interval_class">DV_INTERVAL</a>&lt;<a href="#_dv_quantity_class">DV_QUANTITY</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional normal range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_reference_ranges</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_reference_range_class">REFERENCE_RANGE</a>&lt;<a href="#_dv_quantity_class">DV_QUANTITY</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional tagged other reference ranges for this value in its particular measurement context.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_dv_quantity_class">DV_QUANTITY</a>[1]</code><br>
): <code><a href="#_dv_quantity_class">DV_QUANTITY</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of this <code>DV_QUANTITY</code> and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_quantity_class">DV_QUANTITY</a>[1]</code><br>
): <code><a href="#_dv_quantity_class">DV_QUANTITY</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of this <code>DV_QUANTITY</code> and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_dv_quantity_class">DV_QUANTITY</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this <code>DV_QUANTITY</code> and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_quantity_class">DV_QUANTITY</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Quantity object is less than <code><em>other</em></code>, based on comparison of <code><em>magnitude</em></code>. Only valid if <code><em>is_strictly_comparable_to()</em></code> is True.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_integral</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code><em>precision</em></code> = 0, meaning that the <code><em>magnitude</em></code> is a whole number.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_ordered_class">DV_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this quantity and <code><em>other</em></code> have the same <code><em>units</em></code> and also <code><em>units_system</em></code> if it exists.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_count_class"><a class="anchor" href="#_dv_count_class"></a>6.2.9. DV_COUNT Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_COUNT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Countable quantities. Used for countable types such as pregnancies and steps (taken by a physiotherapy patient), number of cigarettes smoked in a day.</p>
</div>
<div class="paragraph">
<p>Misuse: Not to be used for amounts of physical entities (which all have units).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_amount_class">DV_AMOUNT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer64_class" target="_blank" rel="noopener">Integer64</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_range</strong>: <code><a href="#_dv_interval_class">DV_INTERVAL</a>&lt;<a href="#_dv_count_class">DV_COUNT</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional normal range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_reference_ranges</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_reference_range_class">REFERENCE_RANGE</a>&lt;<a href="#_dv_count_class">DV_COUNT</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional tagged other reference ranges for this value in its particular measurement context.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_dv_count_class">DV_COUNT</a>[1]</code><br>
): <code><a href="#_dv_count_class">DV_COUNT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of this <code>DV_COUNT</code> and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_count_class">DV_COUNT</a>[1]</code><br>
): <code><a href="#_dv_count_class">DV_COUNT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of this <code>DV_COUNT</code> and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_dv_count_class">DV_COUNT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this <code>DV_COUNT</code> and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_count_class">DV_COUNT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Quantified object is less than <code><em>other</em></code>, based on comparison of <code><em>magnitude</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_ordered_class">DV_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Return True.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_proportion_class"><a class="anchor" href="#_dv_proportion_class"></a>6.2.10. DV_PROPORTION Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_PROPORTION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Models a ratio of values, i.e. where the numerator and denominator are both pure numbers. The <code><em>valid_proportion_kind</em></code> property of the <code>PROPORTION_KIND</code> class is used to control the type attribute to be one of a defined set.</p>
</div>
<div class="paragraph">
<p>Used for recording titers (e.g. 1:128), concentration ratios, e.g. Na:K (unitary denominator), albumin:creatinine ratio, and percentages, e.g. red cell distirbution width (RDW).</p>
</div>
<div class="paragraph">
<p>Misuse: Should not be used to represent things like blood pressure which are often written using a  '/' character, giving the misleading impression that the item is a ratio, when in fact it is a structured value. Similarly, visual acuity, often written as (e.g.) "6/24" in clinical notes is not a ratio but an ordinal (which includes non-numeric symbols like CF = count fingers etc). Should not be used for formulations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_proportion_kind_class">PROPORTION_KIND</a></code>, <code><a href="#_dv_amount_class">DV_AMOUNT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>numerator</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numerator of ratio</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>denominator</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Denominator of ratio.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indicates semantic type of proportion, including percent, unitary etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>precision</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Precision  to  which  the  <code><em>numerator</em></code> and <code><em>denominator</em></code> values of  the  proportion are expressed, in terms of number  of decimal places. The value 0 implies an integral quantity. The value -1 implies no limit, i.e. any number of decimal places.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_range</strong>: <code><a href="#_dv_interval_class">DV_INTERVAL</a>&lt;<a href="#_dv_proportion_class">DV_PROPORTION</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional normal range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_reference_ranges</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_reference_range_class">REFERENCE_RANGE</a>&lt;<a href="#_dv_proportion_class">DV_PROPORTION</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional tagged other reference ranges for this value in its particular measurement context.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Effective magnitude represented by ratio.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_integral</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if the <code><em>numerator</em></code> and <code><em>denominator</em></code> values are integers, i.e. if <code><em>precision</em></code> is 0.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_dv_proportion_class">DV_PROPORTION</a>[1]</code><br>
): <code><a href="#_dv_proportion_class">DV_PROPORTION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of two strictly comparable proportions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_proportion_class">DV_PROPORTION</a>[1]</code><br>
): <code><a href="#_dv_proportion_class">DV_PROPORTION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference between two strictly comparable proportions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_dv_proportion_class">DV_PROPORTION</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Return True if this <code>DV_AMOUNT</code> is considered equal to <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_dv_proportion_class">DV_PROPORTION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this Proportion and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_proportion_class">DV_PROPORTION</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Proportion is less than  <code><em>other</em></code>. Only valid if <code><em>is_strictly_comparable_to()</em></code> is True.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_ordered_class">DV_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Return True if the <code><em>type</em></code> of this proportion is the same as the <code><em>type</em></code> of <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Type_validity</em>: <code>valid_proportion_kind (type)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Precision_validity</em>: <code>precision = 0 implies is_integral</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Is_integral_validity</em>: <code>is_integral implies (numerator.floor = numerator and denominator.floor = denominator)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Fraction_validity</em>: <code>(type = pk_fraction or type = pk_integer_fraction) implies is_integral</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Unitary_validity</em>: <code>type = pk_unitary implies denominator = 1</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Percent_validity</em>: <code>type = pk_percent implies denominator = 100</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Valid_denominator</em>: <code>denominator /= 0.0</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_proportion_kind_class"><a class="anchor" href="#_proportion_kind_class"></a>6.2.11. PROPORTION_KIND Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>PROPORTION_KIND</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Class of enumeration constants defining types of proportion for the <code>DV_PROPORTION</code> class.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Constants</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_ratio</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a>&#160;=&#160;0</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Ratio type. Numerator and denominator may be any value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_unitary</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a>&#160;=&#160;1</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Denominator must be 1.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_percent</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a>&#160;=&#160;2</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Denominator is 100, numerator is understood as a percentage value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_fraction</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a>&#160;=&#160;3</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numerator and denominator are integral, and the presentation method uses a slash, e.g.  1/2 .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pk_integer_fraction</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a>&#160;=&#160;4</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numerator and denominator are integral, and the presentation method uses a slash, e.g.  1/2 ; if the numerator is greater than the denominator, e.g. n=3, d=2, the presentation is  1 1/2 .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_proportion_kind</strong> (<br>
nq: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if n is one of the defined types.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_absolute_quantity_class"><a class="anchor" href="#_dv_absolute_quantity_class"></a>6.2.12. DV_ABSOLUTE_QUANTITY Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_ABSOLUTE_QUANTITY (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the concept of quantified entities whose values are absolute with respect to an origin. Dates and Times are the main example.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_quantified_class">DV_QUANTIFIED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code><a href="#_dv_amount_class">DV_AMOUNT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
a_diff: <code><a href="#_dv_amount_class">DV_AMOUNT</a>[1]</code><br>
): <code><a href="#_dv_absolute_quantity_class">DV_ABSOLUTE_QUANTITY</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Addition of a differential amount to this quantity.</p>
</div>
<div class="paragraph">
<p>The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
a_diff: <code><a href="#_dv_amount_class">DV_AMOUNT</a>[1]</code><br>
): <code><a href="#_dv_absolute_quantity_class">DV_ABSOLUTE_QUANTITY</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Result of subtracting a differential amount from this quantity.</p>
</div>
<div class="paragraph">
<p>The value of <code><em>accuracy</em></code> in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_absolute_quantity_class">DV_ABSOLUTE_QUANTITY</a>[1]</code><br>
): <code><a href="#_dv_amount_class">DV_AMOUNT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of two quantities.</p>
</div>
<div class="paragraph">
<p>The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes"><a class="anchor" href="#_syntaxes"></a>6.3. Syntaxes</h3>
<div class="sect3">
<h4 id="_units_syntax"><a class="anchor" href="#_units_syntax"></a>6.3.1. Units Syntax</h4>
<div class="paragraph">
<p>The BNF syntax specification of the units string, adapted from <a href="http://unitsofmeasure.org/ucum.html" target="_blank" rel="noopener">UCUM</a> (case-sensitive form) is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span></span><span class="tok-k">units </span><span class="tok-o">=</span> <span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">units </span><span class="tok-s1">&#39;.&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">units </span><span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">exp_units </span><span class="tok-p">;</span>
<span class="tok-k">exp_units </span><span class="tok-o">=</span> <span class="tok-k">unit_group exponent </span><span class="tok-p">|</span> <span class="tok-k">unit_group </span><span class="tok-p">;</span>
<span class="tok-k">unit_group </span><span class="tok-o">=</span> <span class="tok-k">PREFIX annot_unit </span><span class="tok-p">|</span> <span class="tok-k">annot_unit </span><span class="tok-p">|</span> <span class="tok-s1">&#39;(&#39;</span> <span class="tok-k">exp_units </span><span class="tok-s1">&#39;)&#39;</span> <span class="tok-p">|</span> <span class="tok-k">factor </span><span class="tok-p">;</span>
<span class="tok-k">annot_unit </span><span class="tok-o">=</span> <span class="tok-k">unit_name </span><span class="tok-p">[</span> <span class="tok-s1">&#39;{&#39;</span> <span class="tok-k">ANNOTATION </span><span class="tok-s1">&#39;}&#39;</span> <span class="tok-p">]</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;{&#39;</span> <span class="tok-k">ANNOTATION </span><span class="tok-s1">&#39;}&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">factor </span><span class="tok-o">=</span> <span class="tok-k">Integer </span><span class="tok-p">;</span>
<span class="tok-k">exponent </span><span class="tok-o">=</span> <span class="tok-p">[</span> <span class="tok-k">SIGN </span><span class="tok-p">]</span> <span class="tok-k">Integer </span><span class="tok-p">;</span>

<span class="tok-k">PREFIX </span><span class="tok-o">=</span> <span class="tok-s1">&#39;Y&#39;</span> <span class="tok-p">|</span><span class="tok-s1">&#39;Z&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;E&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;P&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;T&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;G&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;M&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;k&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;h&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;da&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;d&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;c&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;m&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;μ&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;n&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;p&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;f&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;a&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;z&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;y&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">UNIT_NAME </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z_%]+ ?</span><span class="tok-p">;</span>   <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">ANNOTATION </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z&#39;.]+ ?</span><span class="tok-p">;</span>  <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">SUFFIX </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z0-9&#39;_]+ ?</span><span class="tok-p">;</span>   <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">SIGN </span><span class="tok-o">=</span> <span class="tok-s1">&#39;+&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;-&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">Integer </span><span class="tok-o">=</span> <span class="tok-ni">? [0-9]+ ?</span><span class="tok-p">;</span>          <span class="tok-cm">(* regex *)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This proposal is comprehensive, covering all useful unit systems, including SI, various imperial, customary mesaures, and some obscure measures, as well as clinically specific additions. Metric prefixes, meaning-changing textual suffixes (e.g. "[Hg]" in "mm[Hg]") and non-meaning-changing annotations (e.g. "kg {total}") are recognised. With this syntax, units can be simply expressed in strings such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>&quot;kg/m^2&quot;, &quot;m.s^-1&quot;, &quot;km/h&quot;, &quot;mm[Hg]&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and so on.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_date_time_package"><a class="anchor" href="#_date_time_package"></a>7. Date Time Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5"><a class="anchor" href="#_overview_5"></a>7.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.quantity.date_time</code> package includes three absolute date/time concepts:
<code>DV_DATE</code>, <code>DV_TIME</code>, <code>DV_DATE_TIME</code>, and a relative concept: <code>DV_DURATION</code>. The representations of
all of these are <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601:2004</a> compatible date/time strings. They also include the ISO 8601 semantics
for partial dates and times. The <code>quantity.date_time</code> package is illustrated below.</p>
</div>
<div id="rm_data_types_quantity_date_time" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_types.quantity.date_time.svg" alt="RM data types.quantity.date time">
</div>
<div class="title">Figure 7. rm.data_types.quantity.date_time package</div>
</div>
<div class="sect3">
<h4 id="_requirements_4"><a class="anchor" href="#_requirements_4"></a>7.1.1. Requirements</h4>
<div class="sect4">
<h5 id="_standard_datetimes"><a class="anchor" href="#_standard_datetimes"></a>7.1.1.1. Standard Date/Times</h5>
<div class="paragraph">
<p>The basic requirement is for types which represent the following concepts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Date</em>: a type which records year, month and day in month. Examples include date of birth, date of onset of a problem.</p>
</li>
<li>
<p><em>Time</em>: a type which records hour, minute, second, and timezone. Examples include time of meal, time of day when a problem recurs. Timezone is required in a shared EHR repository so that times of clinical events which occurred in different timezones are comparable; this includes specialised pathology tests which might be done in another country.</p>
</li>
<li>
<p><em>Date_time</em>: a type which records year, month, day, hour, minute, second, and timezone. Examples include date &amp; time of death, timestamp of any observation. Timezone is required for the same reason as in Time.</p>
</li>
<li>
<p><em>Duration</em>: a type which records duration of an event or (in)activity, as days, hours, minutes, and seconds. A duration is understood as being relative to an unstated origin point (such as birth), and may take a negative value, indicating prior to the origin.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_partial_datetimes"><a class="anchor" href="#_partial_datetimes"></a>7.1.1.2. Partial Date/Times</h5>
<div class="paragraph">
<p>Partial or uncertain date/times have to be supported in clinical medicine. It is common for patients to
be unsure about dates and durations. Requirements for partial date/times include the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For dates, one of the following rules applies to any instance:</p>
<div class="ulist">
<ul>
<li>
<p>only the year is known</p>
</li>
<li>
<p>only the year and month are known</p>
</li>
<li>
<p>If not even the year is known, then the date is obviously extremely approximate and it would
probably be unsafe to represent it computationally. However, if computatable representation
was needed in this case, a date interval can be used. A pedantic example which breaks these
rules is someone who claims to be born on "a Monday at the start of May in 1934" (i.e. day
but not date unknown). Either the clinician determines what date the first Monday in May
1934 actually was and record that (assuming the patient&#8217;s way of accurately remembering
just happens to be via day rather than date), or else records a partial date of the form "May
1934" (in ISO 8601 form, <code>"1934-05"</code>) if they determine that the patient really is unsure.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Sometimes incomplete times are recorded, which follow the same rule that either the hours
or both the hours and minutes are present. Examples:</p>
<div class="ulist">
<ul>
<li>
<p>recordings by instruments which only generate hh:mm values (i.e. no seconds);</p>
</li>
<li>
<p>recordings by patients who report approximate times of events;</p>
</li>
<li>
<p>recordings by clinicians who use approximate times in administrations, e.g. "take insulin at 8am" really means something like 8 am +/- 30 mins.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Imprecise durations such as '2 - 3 hrs' need to be recordable in a computable form.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To satisfy the faithfulness requirement for health record recording it should always be possible to
record the narrative form of the datum provided by the patient as well as the formal form.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design_4"><a class="anchor" href="#_design_4"></a>7.1.2. Design</h4>
<div class="sect4">
<h5 id="_general_approach"><a class="anchor" href="#_general_approach"></a>7.1.2.1. General Approach</h5>
<div class="paragraph">
<p>Date/time values are somewhat special in the realm of data types in that they are expressed in their
'customary' form, in which the standard structure of <code>{value, unit}</code> and metric relationships between
orders of magnitude do not hold. The customary form is what we are used to using in the social time
domain, such as births, deaths, ages, and times and durations of events which we remember. In all
these cases it is expressed using the familiar year/month/date/hour/minute/second system, in which
the relationships between each successive unit of time is non-metric. The customary form can be converted
to a magnitude since an origin point, and many date/time libraries do this in order to implement
various operations, particularly comparison.</p>
</div>
<div class="paragraph">
<p>The date/time types fall into two categories: <em>absolute</em> and <em>relative</em>. The absolute category comprises
the Date, Date/time and Time concepts, each of which measure time from a known origin. Date and
Date/time measure calendrical time from the date <code>0001-01-01</code>, while Time measures clock time from
midnight. Both Date/time and Time can include timezone information, ensuring that their instances
are correctly situated on the same timeline. All absolute time types inherit from the <code>DV_TEMPORAL</code>
type, which provides the appropriate signature for the <code><em>diff()</em></code> function.</p>
</div>
<div class="paragraph">
<p>The relative category contains only the Duration concept, which expresses elapsed time between two
time points. The <code>DV_DURATION</code> class is used for expressing durations of clinical phenomena and differences
between absolute times.</p>
</div>
<div class="paragraph">
<p>With two exceptions, all four concepts conform to the <a href="https://www.iso.org/iso-8601-date-and-time-format.html" target="_blank" rel="noopener">ISO 8601:2019 standard</a>, which is accordingly used as the primary definitional basis of the openEHR date/time types. The two exceptions are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a negative sign may be used before a Duration, for example '-P10D', meaning '10 days before [origin]', where the 'origin' is a timepoint understood as the origin for the duration;</p>
</li>
<li>
<p>the  W' designator may be mixed with other designators.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first exception allows the expression of negative durations, indicating an elapsed time prior to an origin point. An example from clinical medicine is the notion of 'adjusted age', whereby the true developmental age of a very premature newborn is computed with respect to the origin point of birth after a nominal gestation period (usually 9 months). A baby born at 6 months would therefore have an adjusted age of '-3 months', or '-P3M' in the format used by the <code>DV_DURATION</code> type. The use of the negative enables correctly computed developmental age comparisons of newborns, regardless of prematurity. Negation for ISO 8601 durations is also supported by <a href="https://www.w3.org/XML/Schema" target="_blank" rel="noopener">W3C XML-schema</a> and various programming languages.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://specifications.openehr.org/releases/BASE/latest/foundation_types.html#_time_types" target="_blank" rel="noopener">Time Types section in the openEHR Foundation Types specification</a> for conformance details.</p>
</div>
</div>
<div class="sect4">
<h5 id="_partial_datetimes_2"><a class="anchor" href="#_partial_datetimes_2"></a>7.1.2.2. Partial Date/Times</h5>
<div class="paragraph">
<p>The types defined in this specification support the notion of partially specified dates and times. The
modelling approach used here takes into account the known needs for representing partial date/time
data, while balancing that with the need to avoid incomprehensibly complex types whose generality
would only apply to a tiny percent of difficult cases. Thus, the basis for modelling incomplete
date/times is as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The modelling problem relates only to date/time quantities that need to be computable. For extremely imprecise date/times, if the clinician feels the need, she can record it as narrative text.</p>
</li>
<li>
<p>For imprecise durations, an interval should be used, i.e. <code>DV_INTERVAL&lt;DV_DURATION&gt;</code>. In this way durations like '2 - 3 hrs' can be represented, and still be computable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Based on the above considerations, the requirements for partial types are satisfied by the semantics of
ISO 8601:2004 for 'reduced accuracy' date/times, in which parts of a date, time or date/time can be
missing from the right hand end of the string. This models the reasonable situation where e.g. day
may be unknown in a date, but a date cannot have month unknown and day known.</p>
</div>
</div>
<div class="sect4">
<h5 id="_calendars"><a class="anchor" href="#_calendars"></a>7.1.2.3. Calendars</h5>
<div class="paragraph">
<p>A comment on calendars is in order. In this specification, all date/time types currently modelled are
Gregorian calendar based. This is the same assumption made by ISO 8601, and most technical
computing systems today in many parts of the world. At first glance this may seem like a culturally
insensitive approach, but in fact it makes sense in computational terms, for both users of the Gregorian and other calendars, e.g. Julian, Islamic, Baha&#8217;i, etc. Arguments against trying to use the
date/time classes defined here to represent date/times from any calendar include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Almost all dates on computer systems, including in regions such as the Indian sub-continent,
Turkey and the middle east, where alternate calendars are in use, are in the Gregorian system.
This is likely to be the case for some time, and may always be the case, regardless of
the continued use of other calendars for religious or other purposes (outside of health);</p>
</li>
<li>
<p>If a calendar indicator were used in date quantities, all software, to be correct, would have to
check the value to verify that it is in the expected calendar system, and to do something special
if it is not - an added cost which is a possible source of bugs and which would rarely be
used. The reality is that most software produced in the western world, India etc (possibly
excepting open source software) would automatically assume the Gregorian calendar, and
would be in error if ever it did receive EHR data containing dates from alternate calendars.</p>
</li>
<li>
<p>If/when other calendars are used in EHR or related systems, the users of those calendars will
be aware of it, and include the appropriate conversion logic between Gregorian dates and
their own, limiting the extra software work and quality issues to those users who actually
need alternate calendars. If EHRs from such places are sent to a health care facility where
Gregorian is the default, nothing special is needed to ensure that those records will contain
dates comprehensible to the receiver.</p>
</li>
<li>
<p>The detailed model of date/times in some other calendars is not the same as in the Gregorian
calendar, so they would require different classes anyway - the classes defined here would
not necessarily function correctly simply by adding a calendar field.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For users requiring non-Gregorian dates in EHR and other health systems there are two approaches.
One is to treat non-Gregorian dates as a localisation issue, to be handled inside the application and
GUI environment. The other is to actually add further sibling packages to the openEHR date/time
package, for each new calendar or calendar group required. Conversion algorithms would most likely
be needed in and out of the Gregorian types to enable interoperability of information drawn from different
applications or sources. This approach may require a substantial modelling effort.</p>
</div>
<div class="paragraph">
<p>Algorithms for conversion between the Egyptian, Armenian, Khwarizmian, Persian, Ethiopian, Coptic,
Republican, Macedonian, Syrian, Julian Roman, Gregorian, Islamic A, Islamic B, Baha&#8217;i and
Saka calendars are described by (<a href="#Richards1998">Richards&#44; 1998</a>) and are based on the work of D. A. Hatcher (1986).</p>
</div>
</div>
<div class="sect4">
<h5 id="_representation"><a class="anchor" href="#_representation"></a>7.1.2.4. Representation</h5>
<div class="paragraph">
<p>All of the date/time classes described here are defined so as to have an attribute called value of type
String, in the form of an <a href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO 8601:2019</a> string, with the two above-described deviations allowed. ISO 8601 is convenient for this purpose, as it is a simple
syntax, and covers not only all four variants of fully-specified date/time described here, but also
the partial varieties. The deviations support common use cases in healthcare, without compromising the semantics. Using a single string attribute significantly simplifies persistence as well as mapping
to XML-based formalisms, which use a mostly ISO 8601 compliant date/time representation.
The ISO 8601 semantics assumed by EHR are defined in classes found in the classes
<code>Iso8601_date</code>, <code>Iso8601_time</code>, <code>Iso8601_date_time</code>, <code>Iso8601_duration</code>, from the
<a href="https://specifications.openehr.org/releases/BASE/latest/foundation_types.html#_time_types"><code>base.foundation_types.time</code> package</a>. These classes are inherited into the corresponding classes
defined below.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
it is strongly recommended that where possible, the <em>extended</em> form of the ISO 8601 date/time syntax is used, i.e. the use of dashes in dates (e.g. <code>2018-03-14</code> rather than <code>20180314</code>) and colons for times (i.e. <code>14:24:00</code> instead of <code>142400</code>). This greatly aids human readability, and reduces the need for special date/time display rendering.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_4"><a class="anchor" href="#_class_descriptions_4"></a>7.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_temporal_class"><a class="anchor" href="#_dv_temporal_class"></a>7.2.1. DV_TEMPORAL Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_TEMPORAL (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Specialised temporal variant of <code>DV_ABSOLUTE_QUANTITY</code> whose diff type is <code>DV_DURATION</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_absolute_quantity_class">DV_ABSOLUTE_QUANTITY</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time accuracy, expressed as a duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
a_diff: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_temporal_class">DV_TEMPORAL</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Addition of a Duration to this temporal entity.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
a_diff: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_temporal_class">DV_TEMPORAL</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Subtract a Duration from this temporal entity.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_temporal_class">DV_TEMPORAL</a>[1]</code><br>
): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference between this temporal entity and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_date_class"><a class="anchor" href="#_dv_date_class"></a>7.2.2. DV_DATE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_DATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Represents an absolute point in time, as measured on the Gregorian calendar, and specified only to the day. Semantics defined by ISO 8601. Used for recording dates in real world time. The partial form is used for approximate birth dates, dates of death, etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_temporal_class">DV_TEMPORAL</a></code>, <code><a href="/releases/BASE/latest/foundation_types.html#_iso8601_date_class" target="_blank" rel="noopener">Iso8601_date</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ISO8601 date string.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numeric value of the date as days since the calendar origin date <code>0001-01-01</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_dv_quantified_class">DV_QUANTIFIED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Return True if this <code>DV_QUANTIFIED</code> is considered equal to <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
a_diff: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_date_class">DV_DATE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Addition of a Duration to this Date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
a_diff: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_date_class">DV_DATE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Subtract a Duration from this Date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_date_class">DV_DATE</a>[1]</code><br>
): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference between this Date and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_date_class">DV_DATE</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this date object is less than <code><em>other</em></code>, based on comparison of <code><em>magnitude()</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_date_class">DV_DATE</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True, for any two Dates.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Value_valid</em>: <code>valid_iso8601_date(value)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_time_class"><a class="anchor" href="#_dv_time_class"></a>7.2.3. DV_TIME Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Represents an absolute point in time from an origin usually interpreted as meaning the start of the current day, specified to a fraction of a second. Semantics defined by ISO 8601.</p>
</div>
<div class="paragraph">
<p>Used for recording real world times, rather than scientifically measured fine amounts of time. The partial form is used for approximate times of events and substance administrations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_temporal_class">DV_TEMPORAL</a></code>, <code><a href="/releases/BASE/latest/foundation_types.html#_iso8601_time_class" target="_blank" rel="noopener">Iso8601_time</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ISO8601 time string</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numeric value of the time as seconds since the start of day, i.e. <code>00:00:00</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
a_diff: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_time_class">DV_TIME</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Addition of a Duration to this Time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
a_diff: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_time_class">DV_TIME</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Subtract a Duration from this Time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_time_class">DV_TIME</a>[1]</code><br>
): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference between this Time and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_time_class">DV_TIME</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this time object is less than <code><em>other</em></code>, based on comparison of <code><em>magnitude()</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_time_class">DV_TIME</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True, for any two Times.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Value_valid</em>: <code>valid_iso8601_time (value)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_date_time_class"><a class="anchor" href="#_dv_date_time_class"></a>7.2.4. DV_DATE_TIME Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_DATE_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Represents an absolute point in time, specified to the second. Semantics defined by ISO 8601.</p>
</div>
<div class="paragraph">
<p>Used for recording a precise point in real world time, and for approximate time stamps, e.g. the origin of a <code>HISTORY</code> in an <code>OBSERVATION</code> which is only partially known.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_temporal_class">DV_TEMPORAL</a></code>, <code><a href="/releases/BASE/latest/foundation_types.html#_iso8601_date_time_class" target="_blank" rel="noopener">Iso8601_date_time</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ISO8601 date/time string.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_double_class" target="_blank" rel="noopener">Double</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numeric value of the date/time as seconds since the calendar origin date/time <code>0001-01-01T00:00:00Z</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
a_diff: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_date_time_class">DV_DATE_TIME</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Addition of a Duration to this Date/time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
a_diff: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_date_time_class">DV_DATE_TIME</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Subtract a Duration from this Date/time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>diff</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_date_time_class">DV_DATE_TIME</a>[1]</code><br>
): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference between this Date/time and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_date_time_class">DV_DATE_TIME</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this date-time object is less than <code><em>other</em></code>, based on comparison of <code><em>magnitude()</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_date_time_class">DV_DATE_TIME</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True, for any two Date/times.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Value_valid</em>: <code>valid_iso8601_date_time (value)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_duration_class"><a class="anchor" href="#_dv_duration_class"></a>7.2.5. DV_DURATION Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_DURATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Represents a period of time with respect to a notional point in time, which is not specified. A sign may be used to indicate the duration is  backwards  in time rather than forwards.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
two deviations from ISO 8601 are supported, the first, to allow a negative sign, and the second allowing the 'W' designator to be mixed with other designators. See time types section in the Foundation Types model.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Used for recording the duration of something in the real world, particularly when there is a need a) to represent the duration in customary format, i.e. days, hours, minutes etc, and b) if it will be used in computational operations with date/time quantities, i.e. additions, subtractions etc.</p>
</div>
<div class="paragraph">
<p>Misuse: Durations cannot be used to represent points in time, or intervals of time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_amount_class">DV_AMOUNT</a></code>, <code><a href="/releases/BASE/latest/foundation_types.html#_iso8601_duration_class" target="_blank" rel="noopener">Iso8601_duration</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ISO8601 duration string, including described deviations to support negative values and weeks.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of this Duration and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of this Duration and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this Duration and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_result</em>: <code>Result = magnitude &lt; other.magnitude</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this duration object is less than <code><em>other</em></code>, based on comparison of <code><em>magnitude()</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_strictly_comparable_to</strong> (<br>
other: <code><a href="#_dv_duration_class">DV_DURATION</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True, for any two Durations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>negative</strong> <em>alias</em> "-" (): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Negated version of current duration.</p>
</div>
<div class="paragraph">
<p>Assuming the current duration is positive, the negated version represents a time prior to some origin point, or a negative age (e.g. so-called 'adjusted age' of premature infant).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>magnitude</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_double_class" target="_blank" rel="noopener">Double</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numeric value of the duration as a number of seconds. Computed using the method <code><em>to_seconds()</em></code> inherited from <code>Iso8601_duration</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Value_valid</em>: <code>valid_iso8601_duration (value)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_time_specification_package"><a class="anchor" href="#_time_specification_package"></a>8. Time_specification Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_6"><a class="anchor" href="#_overview_6"></a>8.1. Overview</h3>
<div class="paragraph">
<p>Time specification is about potentiality rather than actuality, and needs its own types. The openEHR
<code>data_types.time_specification</code> package provides such types, based on the HL7 types of the
same names, and is illustrated below.</p>
</div>
<div id="rm_data_types_time_specification" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_types.time_specification.svg" alt="RM data types.time specification">
</div>
<div class="title">Figure 8. rm.data_types.time_specification package</div>
</div>
<div class="sect3">
<h4 id="_requirements_5"><a class="anchor" href="#_requirements_5"></a>8.1.1. Requirements</h4>
<div class="paragraph">
<p>One of the difficulties with time is expressing future times, since potential occurrences, durations,
repetitions cannot be expressed in the same way as actual time. Complicating the problem is the fact
that humans tend to use very customary (i.e. calendar-anchored) ways of specifying time, such as
"every second Tuesday", or "the first Sunday of the month". In clinical medicine, future time is most
commonly used to express when medications or other therapies are intended to take place. They are
often anchored to the calendar, and can easily include repetitions.</p>
</div>
<div class="paragraph">
<p>As with other time types, there are both simple and complex cases to consider. One of the most common
examples of time in the future is the timing for drug administrations, e.g. "once every four
hours". This could be represented as a simple periodic specification, consisting of a start point in
time, a period, and a number of repetitions. The specification for taking blood sugar levels during a
glucose test could be represented as a simple aperiodic series, e.g. ".5hr, 1hr, 2hr". However, even
common specifications for prescriptions e.g. "three times a day for seven days" start to become quite
complex, for example, because "three times a day" might not mean literally 8 hours apart.</p>
</div>
<div class="paragraph">
<p>Some of the factors to consider in timing specifications are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>period of repetition</p>
</li>
<li>
<p>duration of activity being specified</p>
</li>
<li>
<p>possible alignment to the calendar, e.g. "every 5th of the month"</p>
</li>
<li>
<p>possible alignment to real world events e.g. "after meals"</p>
</li>
<li>
<p>fuzziness</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because time is inherently "messy" (months do not all have the same number of days, leap years
change the number of days in some years etc), and because the relationship we have with time can
also be arbitrary (e.g. anchored to mealtimes etc), specifying linguistically obvious specifications formally
is quite challenging.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_5"><a class="anchor" href="#_design_5"></a>8.1.2. Design</h4>
<div class="paragraph">
<p>The HL7 version 3 data types for time specification appear to allow for all of the required possibilities.
The syntax is based on the <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener">ISO 8601 standard</a>. It provides types which express:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Periodic intervals (HL7v3 - <code>PIVL&lt;T:TS&gt;</code>) - allows period, duration, and calendar linking to
be specified.</p>
</li>
<li>
<p>Event-linked periodic intervals (HL7v3 - <code>EIVL&lt;T:TS&gt;</code>) - allows PIVLs to be linked to realworld
events like meals.</p>
</li>
<li>
<p>General timing specification (HL7v3 - GTS) - allows any time specification to be expressed,
using a syntax which is equivalet to a series of <code>IVL&lt;TS&gt;</code> (i.e. intervals of <code>DATE_TIME</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The HL7 syntax for time specification is encapsulated in equivalent openEHR types described here.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_5"><a class="anchor" href="#_class_descriptions_5"></a>8.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_time_specification_class"><a class="anchor" href="#_dv_time_specification_class"></a>8.2.1. DV_TIME_SPECIFICATION Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_TIME_SPECIFICATION (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>This is an abstract class of which all timing specifications are specialisations. Specifies points in time, possibly linked to the calendar, or a real world repeating event, such as  breakfast.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="#_dv_parsable_class">DV_PARSABLE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The specification, in the HL7v3 syntax for <code>PIVL</code> or <code>EIVL</code> types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>calendar_alignment</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indicates what prototypical point in the calendar the specification is aligned to, e.g.  5th of the month . Empty if not aligned. Extracted from the  value' attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>event_alignment</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indicates what real-world event the specification is aligned to if any. Extracted from the  value' attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>institution_specified</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indicates if the specification is aligned with institution schedules, e.g. a hospital nursing changeover or meal serving times. Extracted from the  value' attribute.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_periodic_time_specification_class"><a class="anchor" href="#_dv_periodic_time_specification_class"></a>8.2.2. DV_PERIODIC_TIME_SPECIFICATION Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_PERIODIC_TIME_SPECIFICATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Specifies periodic points in time, linked to the calendar (phase-linked), or a real world repeating event, such as  breakfast  (event-linked). Based on the HL7v3 data types <code>PIVL&lt;T&gt;</code> and <code>EIVL&lt;T&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Used in therapeutic prescriptions, expressed as <code>INSTRUCTIONs</code> in the openEHR model.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_time_specification_class">DV_TIME_SPECIFICATION</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>period</strong> (): <code><a href="#_dv_duration_class">DV_DURATION</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The period of the repetition, computationally derived from the syntax representation. Extracted from the  value' attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>calendar_alignment</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Calendar alignment extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>event_alignment</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Event alignment extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>institution_specified</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Value_valid</em>: <code>value.formalism.is_equal (“HL7:PIVL”) or value.formalism. is_equal (“HL7:EIVL”)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_general_time_specification_class"><a class="anchor" href="#_dv_general_time_specification_class"></a>8.2.3. DV_GENERAL_TIME_SPECIFICATION Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_GENERAL_TIME_SPECIFICATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Specifies points in time in a general syntax. Based on the HL7v3 GTS data type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_time_specification_class">DV_TIME_SPECIFICATION</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>calendar_alignment</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Calendar alignment extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>event_alignment</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Event alignment extracted from value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>institution_specified</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Extracted from value.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes_2"><a class="anchor" href="#_syntaxes_2"></a>8.3. Syntaxes</h3>
<div class="sect3">
<h4 id="_phase_linked_time_specification_syntax"><a class="anchor" href="#_phase_linked_time_specification_syntax"></a>8.3.1. Phase-linked Time Specification Syntax</h4>
<div class="paragraph">
<p>The syntactic form of phase-linked periodic time specifications (derived from the <code>PIVL&lt;T&gt;</code> spec
HL7v3 ballot) is as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"[" interval "]" "/" "(" difference ")" [ "@" alignment ] [ "IST" ]</pre>
</div>
</div>
<div class="paragraph">
<p>Examples include:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>* [200004181100;200004181110]/(7d)@DW = every Tuesday from 11:00 to 11:10 AM.
* [200004181100;200004181110]/(1mo)@DM" = every 18th of the month 11:00 to 11:10 AM.</pre>
</div>
</div>
<div class="paragraph">
<p>A parse specification is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span></span><span class="tok-k">phase_linked_time_spec </span><span class="tok-o">=</span> <span class="tok-k">pure_phase_linked_time_spec </span><span class="tok-p">[</span> <span class="tok-s2">&quot;IST&quot;</span> <span class="tok-p">]</span> <span class="tok-p">;</span>
<span class="tok-k">pure_phase_linked_time_spec </span><span class="tok-o">=</span> <span class="tok-k">phase </span><span class="tok-p">[</span> <span class="tok-s2">&quot;@&quot;</span> <span class="tok-k">alignment </span><span class="tok-p">]</span> <span class="tok-p">;</span>
<span class="tok-k">phase </span><span class="tok-o">=</span> <span class="tok-k">interval </span><span class="tok-s2">&quot;/&quot;</span> <span class="tok-s2">&quot;(&quot;</span> <span class="tok-k">difference </span><span class="tok-s2">&quot;)&quot;</span> <span class="tok-p">;</span>
<span class="tok-k">alignment </span><span class="tok-o">=</span> <span class="tok-s2">&quot;DW&quot;</span> <span class="tok-p">|</span> <span class="tok-k">etc </span><span class="tok-p">;</span>                  <span class="tok-cm">(* terms from &quot;HL7::CalendarCycle&quot; domain *)</span>
<span class="tok-k">difference </span><span class="tok-o">=</span>  <span class="tok-p">;</span>                           <span class="tok-cm">(* ISO 8601 for time difference *)</span>
<span class="tok-k">interval </span><span class="tok-o">=</span> <span class="tok-s2">&quot;[&quot;</span> <span class="tok-k">interval_spec </span><span class="tok-s2">&quot;]&quot;</span> <span class="tok-p">;</span>
<span class="tok-k">interval_spec </span><span class="tok-o">=</span> <span class="tok-s2">&quot;;&quot;</span> <span class="tok-p">|</span> <span class="tok-s2">&quot;;&quot;</span> <span class="tok-k">date_time </span><span class="tok-p">|</span> <span class="tok-k">date_time </span><span class="tok-s2">&quot;;&quot;</span> <span class="tok-k">date_time </span><span class="tok-p">|</span> <span class="tok-k">date_time </span><span class="tok-s2">&quot;;&quot;</span> <span class="tok-p">;</span>
<span class="tok-k">date_time </span><span class="tok-o">=</span> <span class="tok-cm">(* ISO 8601 for date/time string yyyymmdd[hh[mm[ss]]] *)</span> <span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_linked_periodic_time_specification_syntax"><a class="anchor" href="#_event_linked_periodic_time_specification_syntax"></a>8.3.2. Event-linked Periodic Time Specification Syntax</h4>
<div class="paragraph">
<p>Examples of event-linked periodic time specifications include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"PC+[1h;1h]" = one hour after meal</p>
</li>
<li>
<p>"HS-[50min;1h]" = one hour before bedtime for 10 minutes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following parse specification defines the syntax for event-related periodic time specifications.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span></span><span class="tok-k">event_linked_time_spec </span><span class="tok-o">=</span> <span class="tok-k">event </span><span class="tok-p">|</span> <span class="tok-k">event offset </span><span class="tok-p">;</span>
<span class="tok-k">event </span><span class="tok-o">=</span> <span class="tok-s2">&quot;AC&quot;</span> <span class="tok-p">|</span> <span class="tok-s2">&quot;ACD&quot;</span> <span class="tok-p">|</span> <span class="tok-k">etc </span><span class="tok-p">;</span>             <span class="tok-cm">(* HL7 domain &quot;HL7::TimingEvent&quot; *)</span>
<span class="tok-k">offset </span><span class="tok-o">=</span> <span class="tok-p">(</span> <span class="tok-s2">&quot;+&quot;</span> <span class="tok-p">|</span> <span class="tok-s2">&quot;-&quot;</span> <span class="tok-p">)</span> <span class="tok-k">dur_interval </span><span class="tok-p">;</span>
<span class="tok-k">dur_interval </span><span class="tok-o">=</span> <span class="tok-p">;</span>                         <span class="tok-cm">(* ISO 8601 for duration interval *)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_general_time_specification_syntax"><a class="anchor" href="#_general_time_specification_syntax"></a>8.3.3. General Time Specification Syntax</h4>
<div class="paragraph">
<p>The class is the same structurally as the <code>DV_TIME_SPECIFICATION</code> parent. The syntax is the HL7
GTS syntax, defined by the following parse specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span></span><span class="tok-k">general_time_spec </span><span class="tok-o">=</span> <span class="tok-k">symbol </span><span class="tok-p">|</span> <span class="tok-k">union </span><span class="tok-p">|</span> <span class="tok-k">exclusion </span><span class="tok-p">;</span>
<span class="tok-k">union </span><span class="tok-o">=</span> <span class="tok-k">intersection  </span><span class="tok-p">[</span><span class="tok-s2">&quot;;&quot;</span> <span class="tok-k">union </span><span class="tok-p">]</span> <span class="tok-p">;</span>
<span class="tok-k">exclusion </span><span class="tok-o">=</span> <span class="tok-k">exclusion </span><span class="tok-s2">&quot;\&quot;</span> <span class="tok-k">intersection </span><span class="tok-p">;</span>
<span class="tok-k">intersection </span><span class="tok-o">=</span> <span class="tok-k">factor intersection </span><span class="tok-p">|</span> <span class="tok-k">factor </span><span class="tok-p">;</span>
<span class="tok-k">hull </span><span class="tok-o">=</span> <span class="tok-k">factor </span><span class="tok-p">[</span> <span class="tok-s2">&quot;..&quot;</span> <span class="tok-k">hull </span><span class="tok-p">]</span> <span class="tok-p">;</span>
<span class="tok-k">factor </span><span class="tok-o">=</span> <span class="tok-k">interval </span><span class="tok-p">|</span> <span class="tok-k">phase_linked_time_spec </span><span class="tok-p">|</span> <span class="tok-k">event_linked_time_spec </span><span class="tok-p">|</span> <span class="tok-s2">&quot;(&quot;</span> <span class="tok-k">general_time_spec </span><span class="tok-s2">&quot;)&quot;</span> <span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_encapsulated_package"><a class="anchor" href="#_encapsulated_package"></a>9. Encapsulated Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_7"><a class="anchor" href="#_overview_7"></a>9.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.encapsulated</code> package contains classes representing data values whose internal
structure is defined outside the EHR model, such as multimedia and parsable data. It is illustrated below.</p>
</div>
<div id="rm_data_types_encapsulated" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_types.encapsulated.svg" alt="RM data types.encapsulated">
</div>
<div class="title">Figure 9. rm.data_types.encapsulated package</div>
</div>
<div class="sect3">
<h4 id="_requirements_6"><a class="anchor" href="#_requirements_6"></a>9.1.1. Requirements</h4>
<div class="paragraph">
<p>There is a need to be able to include content in the EHR whose interior structure is not modelled in
the EHR reference model, but instead documented by sufficient meta-data attributes for specific tools
to process the data. Types of content in this category are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Images, including images which are themselves a compressed version of one image from a
high-resolution image set stored elsewhere. Such images may be in any of the well-known
compressed or uncompressed formats, and may have their own thumbnail image attached, to
facilitate web-viewing.</p>
</li>
<li>
<p>Bio-signal data series, such as a set of values representing a diagnostic part of an ECG trace.
This might be represented as DICOM content.</p>
</li>
<li>
<p>Content which is textual (or nearly so) which is essentially a parsable language file of some
kind. This includes all XML instance, HTML, and any other EHR content which happens to
be represented in syntax form - such as the unit strings used in quantities. The name of the
formalism should be stored as meta-data.</p>
</li>
<li>
<p>Binary content which is processed by a work processor or other dedicated tool.</p>
</li>
<li>
<p>Digital signatures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sufficient meta-data must be included with all of these types to enable a way for the content to be
processed, typically by indicating either its type (e.g. "jpeg", "word document") or the name of a tool
which can be used to process it. Important meta-data include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>size of the content;</p>
</li>
<li>
<p>natural language, if any.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any encapsulated data item may be a summary, "thumbnail" or otherwise reduced form of an original
content item found outside the EHR, in some other system or file-system.
Checksums must be expressible for those items for which a checksum is available, or for which the
system generates checksums to improve the quality of its internal data transmissions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_6"><a class="anchor" href="#_design_6"></a>9.1.2. Design</h4>
<div class="paragraph">
<p>The design approach used here is based on the following analysis.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Any encapsulated data item may be in some particular language, even if it is an image or other graphic form such as a biosignal with axis markings in a particular language;</p>
</li>
<li>
<p>The general structure of encapsulated content data items includes a block of bytes or characters representing the content, and various meta-data as appropriate, including:</p>
<div class="ulist">
<ul>
<li>
<p>size</p>
</li>
<li>
<p>character encoding</p>
</li>
<li>
<p>compression type/algorithm</p>
</li>
<li>
<p>name of formalism for parsable content</p>
</li>
</ul>
</div>
</li>
<li>
<p>For encapsulated items that have a counterpart in another system, the standard means of portable address is the W3C URI;</p>
</li>
<li>
<p>For items may that have an associated integrity checksum, the checksum is itself a series of bytes, and the type of checksum must also be specified, e.g. "md5".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These observations lead naturally to an abstract <code>DV_ENCAPSULATED</code> class, with two subtypes,
<code>DV_PARSABLE</code>, for all content which is syntactic in nature, and <code>DV_MULTIMEDIA</code> for everything else.
Note that it is possible to imagine parsable content items which are large, stored in compressed form,
and are themselves a summary of another item elsewhere on the web; such items can for practical
purposes be represented as instances of <code>DV_MULTIMEDIA</code>, rather than <code>DV_PARSABLE</code>. The vast
majority of parsable encapsulated data are expected to be short and stored in native textual form, e.g.
fragments of XML or HTML.</p>
</div>
<div class="paragraph">
<p>The formal model of the classes <code>DV_ENCAPSULATED</code> and <code>DV_MULTIMEDIA</code> are closely based on the
ED type from the HL7v3 data types specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="_examples"><a class="anchor" href="#_examples"></a>9.1.3. Examples</h4>
<div class="paragraph">
<p>The following examples show how to use the classes to represent some common encapsulated data types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data format</th>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JSON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_PARSABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>value</em></code> = JSON string<br>
                                             <code><em>formalism</em> = "json"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JSON, minified<br>
 (white space removed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_PARSABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>value</em></code> = minified JSON string<br>
                                             <code><em>formalism</em> = "json"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_MULTIMEDIA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>uri</em></code> = URI at which document is located<br>
                                             <code><em>media_type</em> = "IANA::application/json"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of target.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_MULTIMEDIA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG, Base64<br>
 encoded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_MULTIMEDIA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying Base64 string of JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg;base64"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG with<br>
 SHA-2 hash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DV_MULTIMEDIA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg"</code><br>
                                             <code><em>integrity_check</em></code> = byte array containing SHA-2 hash<br>
                                             <code><em>integrity_check_algorithm</em> = "openehr::SHA-2"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_6"><a class="anchor" href="#_class_descriptions_6"></a>9.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_encapsulated_class"><a class="anchor" href="#_dv_encapsulated_class"></a>9.2.1. DV_ENCAPSULATED Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>DV_ENCAPSULATED (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the common meta-data of all types of encapsulated data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>charset</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of character encoding scheme in which this value is encoded. Coded from openEHR Code Set  character sets . Unicode is the default assumption in openEHR, with UTF-8 being the assumed encoding. This attribute allows for variations from these assumptions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional indicator of the localised language in which the data is written, if relevant. Coded from openEHR Code Set <code>languages</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Language_valid</em>: <code>language /= Void implies code_set (Code_set_id_languages).has_code (language)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Charset_valid</em>: <code>charset /= Void implies code_set (Code_set_id_character_sets).has_code (charset)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_multimedia_class"><a class="anchor" href="#_dv_multimedia_class"></a>9.2.2. DV_MULTIMEDIA Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_MULTIMEDIA</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A specialisation of <code>DV_ENCAPSULATED</code> for audiovisual and bio-signal types. Includes further metadata relating to multimedia types which are not applicable to other subtypes of <code>DV_ENCAPSULATED</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_encapsulated_class">DV_ENCAPSULATED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>alternate_text</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Text to display in lieu of multimedia display/replay.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uri</strong>: <code><a href="#_dv_uri_class">DV_URI</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>URI reference to electronic information stored outside the record as a file, database entry etc, if supplied as a reference.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_byte_class">Byte</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The actual data found at <code><em>uri</em></code>, if supplied inline.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>media_type</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Data media type coded from openEHR code set  media types  (interface for the IANA MIME types code set).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>compression_algorithm</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Compression type, a coded value from the openEHR Integrity check code set. Void means no compression.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>integrity_check</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_byte_class">Byte</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Binary cryptographic integrity checksum.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>integrity_check_algorithm</strong>: <code><a href="#_code_phrase_class">CODE_PHRASE</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type of integrity check, a coded value from the openEHR <code>Integrity check</code> code set.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>thumbnail</strong>: <code><a href="#_dv_multimedia_class">DV_MULTIMEDIA</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The thumbnail for this item, if one exists; mainly for graphics formats.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Original size in bytes of unencoded encapsulated data. I.e. encodings such as base64, hexadecimal etc do not change the value of this attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_external</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed from the value of the <code><em>uri</em></code> attribute: True if  the data is stored externally to the record, as indicated by <code><em>uri</em></code>. A copy may also be stored internally, in which case <code><em>is_expanded</em></code> is also true.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_inline</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed from the value of the data attribute. True if  the  data is stored  in  expanded  form, ie within the EHR itself.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_compressed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed from the value of the <code><em>compression_algorithm</em></code> attribute: True if  the  data is stored in compressed form.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_integrity_check</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed from the value of the <code><em>integrity_check_algorithm</em></code> attribute: True if an integrity check has been computed.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Not_empty</em>: <code>is_inline or is_external</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Media_type_valid</em>: <code>media_type /= Void and then code_set (Code_set_id_media_types).has_code (media_type)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Compression_algorithm_validity</em>: <code>compression_algorithm /= Void implies code_set (Code_set_id_compression_algorithms).has_code (compression_algorithm)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Integrity_check_validity</em>: <code>integrity_check /= Void implies integrity_check_algorithm /= Void</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Integrity_check_algorithm_validity</em>: <code>integrity_check_algorithm /= Void implies code_set (Code_set_id_integrity_check_algorithms).has_code (integrity_check_algorithm)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Size_valid</em>: <code>size &gt;= 0</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_parsable_class"><a class="anchor" href="#_dv_parsable_class"></a>9.2.3. DV_PARSABLE Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_PARSABLE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Encapsulated data expressed as a parsable String. The internal model of the data item is not described in the openEHR model in common with other encapsulated types, but in this case, the form of the data is assumed to be plaintext, rather than compressed or other types of large binary data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_encapsulated_class">DV_ENCAPSULATED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The string, which may validly be empty in some syntaxes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>formalism</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the formalism, e.g.  GLIF 1.0 ,  Proforma  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Size in bytes of value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Formalism_valid</em>: <code>not formalism.is_empty</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Size_valid</em>: <code>size &gt;= 0</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uri_package"><a class="anchor" href="#_uri_package"></a>10. Uri Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_8"><a class="anchor" href="#_overview_8"></a>10.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.uri</code> package includes two types used for referring to information resources. The
<code>DV_URI</code> type allows data values which are references to objects on the world wide web to be created. The specialisation <code>DV_OPENEHR_URI</code> provides a representation for URIs that may be used within an openEHR data environment, i.e. to refer to any openEHR data artefact, including in the EHR, demographics, or future artefact types such as guidelines, plan etc.</p>
</div>
<div class="paragraph">
<p>The final specialisation, <code>DV_EHR_URI</code>, provides the specific semantics for representing as a URI the reference to any element in an openEHR EHR. The <code>DV_EHR_URI</code> type is convenient, because it is a string, like any other URI, and is therefore easily transportable and processable. Because it has its own scheme space, 'ehr', instances can be globally unique, as long as EHR identification is globally unique. <code>DV_EHR_URIs</code> are used to express all runtime paths in the EHR. The <code>uri</code> Package is illustrated below.</p>
</div>
<div id="rm_data_types_uri" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_types.uri.svg" alt="RM data types.uri">
</div>
<div class="title">Figure 10. rm.data_types.uri package</div>
</div>
<div class="sect3">
<h4 id="_requirements_7"><a class="anchor" href="#_requirements_7"></a>10.1.1. Requirements</h4>
<div class="paragraph">
<p>This package meets the requirement for a <code>DATA_VALUE</code> subtype which represents a W3C Uniform
Resource Identifier (URI). A common example of where this might be used is to represent a reference
to a clinical guideline or other justifying document associated with an intervention or treatment plan
recorded in the EHR.</p>
</div>
<div class="paragraph">
<p>URIs are a superset of Uniform Resource Locators (URLs) (although the two are often confused,
even within the W3C), and can be used to specify the location of any information item, regardless of
its type, location or storage method, as long as a URI "scheme" exists for that type of information.</p>
</div>
<div class="paragraph">
<p>There is an additional requirement for a kind of URI that can point at an EHR data item, either inside
the same EHR containing the link, or in another EHR. This is the basis of implementing logical references
in the EHR and between EHRs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_7"><a class="anchor" href="#_design_7"></a>10.1.2. Design</h4>
<div class="paragraph">
<p>A simple design approach is used whereby a URI is represented as a String, and appropriate functions are defined to extract the various parts according to the syntax of URIs defined by Tim Berners-Lee (<a href="https://tools.ietf.org/html/rfc3986" target="_blank" rel="noopener">IETF RFC 3986</a>). An EHR specific subtype is defined, whose scheme is 'ehr', and which contains further attributes enabling the instances of the type to record what kind of object they are referring to.</p>
</div>
<div class="paragraph">
<p>So-called 'plain-text URIs' that contain RFC-3986 forbidden characters such as spaces etc, are allowed on the basis of human readability, but must be RFC-3986 encoded prior to use in e.g. REST APIs or other contexts relying on machine-level conformance.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_definitions"><a class="anchor" href="#_definitions"></a>10.2. Definitions</h3>
<div class="paragraph">
<p>The following symbolic definitions are used in the classes below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>Ehr_scheme</em></code>: <code>String</code> = "ehr"</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_7"><a class="anchor" href="#_class_descriptions_7"></a>10.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_uri_class"><a class="anchor" href="#_dv_uri_class"></a>10.3.1. DV_URI Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_URI</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A reference to an object which structurally conforms to the Universal Resource Identifier (URI) RFC-3986 standard. The reference is contained in the <code><em>value</em></code> attribute, which is a <code>String</code>. So-called 'plain-text URIs' that contain RFC-3986 forbidden characters such as spaces etc, are allowed on the basis that they need to be RFC-3986 encoded prior to use in e.g. REST APIs or other contexts relying on machine-level conformance.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">DATA_VALUE</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value of URI as a String. 'Plain-text' URIs are allowed, enabling better readability, but must be RFC-3986 encoded in use.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scheme</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A distributed information 'space' in which  information objects  exist. The scheme simultaneously specifies an information space and a mechanism for accessing objects in  that  space.  For  example  if  scheme  = "ftp", it identifies the information space in which  all  ftp-able objects  exist,  and also the application - ftp - which can be used to access them. Values may include: "ftp", "telnet", "mailto", etc. Refer to RFC-3986 for a full list.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A string whose format is  a  function  of  the  scheme. Identifies   the   location  in  &lt;scheme&gt;-space  of  an information entity. Typical values include hierarchical directory  paths  for  any  machine.  For example, with scheme = "ftp", path might be <code>"/pub/images/image_01"</code>. The strings "." and ".." are reserved for use in the path. Paths may include internet/intranet location identifiers of the form: <code>sub_domain&#8230;&#8203;domain</code>, e.g. <code>"info.cern.ch"</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fragment_id</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A part of, a  fragment  or  a  sub-function  within  an object. Allows references to sub-parts of objects, such as a certain line and character  position  in  a  text object. The  syntax  and semantics are defined by the application responsible for the object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>query</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Query string to send to application implied  by  scheme and  path.  Enables  queries  to applications, including databases  to  be  included in  the  URI. Supports any query meaningful to the server, including SQL.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Value_valid</em>: <code>not value.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_openehr_uri_class"><a class="anchor" href="#_dv_openehr_uri_class"></a>10.3.2. DV_OPENEHR_URI Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_OPENEHR_URI</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_uri_class">DV_URI</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>as_urn</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generate URN form of this URI.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_ehr_uri_class"><a class="anchor" href="#_dv_ehr_uri_class"></a>10.3.3. DV_EHR_URI Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>DV_EHR_URI</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A <code>DV_EHR_URI</code> is a <code>DV_URI</code> which has the scheme name 'ehr', and which can only reference items in EHRs.</p>
</div>
<div class="paragraph">
<p>Used to reference items in an EHR, which may be the same as the current EHR (containing this link), or another.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_openehr_uri_class">DV_OPENEHR_URI</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Scheme_valid</em>: <code>scheme.is_equal (Ehr_scheme)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes_3"><a class="anchor" href="#_syntaxes_3"></a>10.4. Syntaxes</h3>
<div class="sect3">
<h4 id="_dv_openehr_uri_syntax"><a class="anchor" href="#_dv_openehr_uri_syntax"></a>10.4.1. DV_OPENEHR_URI Syntax</h4>
<div class="paragraph">
<p>The syntax of a <code>DV_OPENEHR_URI</code> is an openEHR path within any openEHR-defined data instance, scoped by any URI scheme-space used in openEHR.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dv_ehr_uri_syntax"><a class="anchor" href="#_dv_ehr_uri_syntax"></a>10.4.2. DV_EHR_URI Syntax</h4>
<div class="paragraph">
<p>The syntax of a <code>DV_EHR_URI</code> is an openEHR path, inside the 'ehr' URI scheme-space, and takes one of the forms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ehr://system_id/ehr_id/top_level_structure_locator/path_inside_top_level_structure
ehr:/ehr_id
ehr:/ehr_id/top_level_structure_locator
ehr:/ehr_id/top_level_structure_locator/path_inside_top_level_structure</pre>
</div>
</div>
<div class="paragraph">
<p>The syntax is described in more detail in the <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html#_ehr_uris">openEHR Architecture Overview</a>. <code>DV_EHR_URIs</code> are used as a mechanism for referencing in the EHR, ensuring readability by humans, as well as validity when extracts are transmitted elsewhere: even if the target of a path is not present, the path can be used to locate the missing item on demand.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_strategies"><a class="anchor" href="#_implementation_strategies"></a>11. Implementation Strategies</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_9"><a class="anchor" href="#_overview_9"></a>11.1. Overview</h3>
<div class="paragraph">
<p>This section notes a few of the general challenges for mapping the openEHR data types to implementation
technologies such as programming languages and XML. For specific guidelines, Implementation
Technology Specification (ITS) document for each target formalism should be consulted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_quantities_and_ordered_numeric"><a class="anchor" href="#_quantities_and_ordered_numeric"></a>11.2. Quantities and Ordered_numeric</h3>
<div class="paragraph">
<p>In the quantity package, the type <code>DV_QUANTIFIED</code> is shown having an abstract property of type
Ordered_numeric. This is intended to indicate that the type <code>DV_QUANTIFIED</code> is distinguished by
the magnitude property (compared to say <code>DV_ORDERED</code>, which describes ordered things without having
magnitudes). The type Ordered_numeric be mapped to various types in implementation technologies
as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java: <code>java.lang.Number</code></p>
</li>
<li>
<p>C#: <code>System.IComparable</code></p>
</li>
<li>
<p>Eiffel: <code>NUMERIC</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these type systems currently suffer from not having a single type whose meaning is both
"ordered" (having the function '&lt;') and "numeric" (having the functions '+', '-', '*', '/') but in practice
it does not matter much. For type systems with no convenient supertype of the numeric concrete
types <code>Real</code>, <code>Integer</code>, <code>Double</code>, the <code><em>magnitude</em></code> property can safely be left out of <code>DV_QUANTIFIED</code>;
the only drawback is that code cannot call <code>DV_QUANTIFIED</code>.<code><em>magnitude</em></code> polymorphically, e.g. in a
statistical application processing <code>DV_QUANTITY</code> and <code>DV_COUNT</code> objects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unicode"><a class="anchor" href="#_unicode"></a>11.3. Unicode</h3>
<div class="paragraph">
<p>Unicode is supported in various ways in different languages. In Java, since JDK 1.1, unicode support
is implicit in the base classes. From the documentation:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>the classes java.io.InputStreamReader, java.io.OutputStreamWriter, and
java.lang.String can convert between Unicode and a number of other character
encodings. More information is available at:
http://java.sun.com/j2se/1.3/docs/guide/intl/encoding.doc.html.</pre>
</div>
</div>
<div class="paragraph">
<p>In the C# language, conversion can be done between Unicode and other codepages using the System.
<code>Text.UnicodeEncoding</code> (for UTF-16) and <code>System.Text.UTF8Encoding</code> (for UTF-8) classes.</p>
</div>
<div class="paragraph">
<p>In XML unicode is handled by specifying the encoding of the document in the XML declaration, e.g.
<code>&lt;?xml version="1.0" encoding="UTF-16"?&gt;</code>.</p>
</div>
<div class="paragraph">
<p>In the Eiffel language, unicode is available in the Gobo public domain library (see
<a href="http://www.gobosoft.com" class="bare">http://www.gobosoft.com</a>), in the <code>UC_STRING</code> class, which inherits from the String class.
The support in other languages varies, and may require a special type like the <code>UC_STRING</code> used in
Eiffel.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dates_and_times"><a class="anchor" href="#_dates_and_times"></a>11.4. Dates and Times</h3>
<div class="paragraph">
<p>In some formalisms, dates and times are represented using a single calendar-like class. This is not
considered to be good practice from the point of specification, since it is more difficult to state proper
invariants for such a class used to represent a particular logical type such as a <code>DATE</code> or <code>TIME</code>, however,
its utility in implementation is recognised.</p>
</div>
<div class="paragraph">
<p>Where implementors want to use such a class (call it <code>CALENDAR</code> here for the sake of discussion) the
recommended approach is to wrap the class <code>CALENDAR</code> with classes representing the types described
in this specification, i.e. <code>DATE</code> etc. This enables the addition of any necessary functionality in the
wrapper for example, for serialising and deserialising in and out of XML.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comparison_with_hl7v3_types"><a class="anchor" href="#_comparison_with_hl7v3_types"></a>Appendix A: Comparison with HL7v3 Types</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_scope_2"><a class="anchor" href="#_scope_2"></a>A.1. Scope</h3>
<div class="paragraph">
<p>Some HL7v3 types are not modelled in openEHR. HL7v3 V3DT types which are assumed by
openEHR to exist in the underlying type system of any implementation technology include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integer (<code>INT</code>)</p>
</li>
<li>
<p>Real (<code>REAL</code>)</p>
</li>
<li>
<p>Set (<code>SET</code>)</p>
</li>
<li>
<p>List (<code>LIST</code>)</p>
</li>
<li>
<p>Bag (<code>BAG</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>HL7v3 types which are not modelled here because they are almost always too volatile for concrete
modelling, and can be created with archetyped generic information structures are as follows (even in
HL7 they are really data structures rather than data types):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Postal address (<code>AD</code>)</p>
</li>
<li>
<p>Entity name (<code>EN</code>)</p>
</li>
<li>
<p>Person name (<code>PN</code>)</p>
</li>
<li>
<p>Organisation name (<code>ON</code>)</p>
</li>
<li>
<p>Trivial name (<code>TN</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These types are all modelled by archetyped spatial data structures in openEHR (equivalent to subtypes
of Structure in the CDA specification).
HL7v3 types which may need to be modelled in the future include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Uncertain value probabilistic (<code>UVP</code>)</p>
</li>
<li>
<p>Non-parametric probability distribution (<code>NPPD</code>)</p>
</li>
<li>
<p>Parametric probability distribution (<code>PPD</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Types which are provided by openEHR but not supported directly by HL7 include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>state variable (<code>DV_STATE</code>);</p>
</li>
<li>
<p>ordinal values (<code>DV_ORDINAL</code>);</p>
</li>
<li>
<p>explicit partial date and time types (<code>DV_DATE</code>, <code>DV_TIME</code>);</p>
</li>
<li>
<p>explicit time duration (<code>DV_DURATION</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Types in the latter two categories may be implementable with the <code>TS</code> (timestamp) type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_differences"><a class="anchor" href="#_design_differences"></a>A.2. Design Differences</h3>
<div class="paragraph">
<p>There are some significant differences in design approach between the openEHR data types and the
HL7v3 data types, described in the following sections.</p>
</div>
<div class="sect3">
<h4 id="_naming"><a class="anchor" href="#_naming"></a>A.2.1. Naming</h4>
<div class="paragraph">
<p>All types in the HL7 specification have two names, one short and one long. For example the type representing
physical quantities is known both as "PhysicalQuantity" and "PQ". While short names may
be reasonable for often-used types, someshort names are not obvious, e.g. "EN", "ON", "TN",
"NPPD" etc. Short names certainly have benefits for drawing tools such as Rational Rose or other
UML tools, however, it is questionable whether a formal model should include concept names chosen
on the basis of visual appearance in such tools (one might argue that such tools should provide aliases
for visual purposes, without changing the actual model). Another problem is that UML does not
include the concept of class name aliases, nor do most programming languages.</p>
</div>
<div class="paragraph">
<p>The openEHR model uses one name only for each class.</p>
</div>
</div>
<div class="sect3">
<h4 id="_identification"><a class="anchor" href="#_identification"></a>A.2.2. Identification</h4>
<div class="paragraph">
<p>The HL7 V3DT includes the types <code>II</code>, <code>UID</code>, <code>OID</code> and <code>UUID</code>. The <code>II</code> type is claimed to be for identifying
all kinds of entities, which we here classify as real-world entities ("RWEs") (such as people, vehicle
registrations, invoices) and informational entities ("IEs") - which in general are snapshots of data
representing an RWE in a computer system. One problem with RWE identification schemes is that
some are known (e.g. social security number) to produce fallible identifiers or situations where multiple
RWEs have the same identifier, or no identifier at all. Conversely, with well-controlled and internationally
agreed ways of issuing/generating information system identifiers (e.g. GUID, ISO OID) it
is thought that such identifiers can be made reliable, and indeed correspond 1:1 with their intended
IEs. However, a problem with IEs is that there are often duplicates and also multiple versions in time,
each intended to represent the same RWE (such as a particular person, observation or composition).</p>
</div>
<div class="paragraph">
<p>As far as can be ascertained currently, there is no standard analysis taking into account the existence
of IEs and RWEs, and recognising the fact that multiple versions and/or duplicates may refer to the
same RWE.</p>
</div>
<div class="paragraph">
<p>The approach taken in openEHR with respect to identifiers is currently as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RWE identifiers such as social security numbers, licence numbers, etc are modelled with the
type <code>DV_IDENTIFIER</code>, which has the attributes:</p>
<div class="ulist">
<ul>
<li>
<p><code><em>issuer</em></code>: <code>String</code></p>
</li>
<li>
<p><code><em>id</em></code>: <code>String</code></p>
</li>
<li>
<p><code><em>type</em></code>: <code>String</code>
The attributes listed above are nearly the same as for the HL7 II type, indicating that the two
types may be compatible.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Identification of IEs is done using the type <code>OBJECT_ID</code>, which is not a data type, and is documented
in the Support Information Model. The <code>OBJECT_ID</code> type takes into account the
fact that there may be multiple IEs referring to the same underlying RWE by adding a version
identifier (assumed to be a timestamp).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_archetyping"><a class="anchor" href="#_archetyping"></a>A.2.3. Archetyping</h4>
<div class="paragraph">
<p>The openEHR data types are defined on the assumption of archetype-based systems. While they will
work perfectly well in systems which know nothing about archetyping, some types are not defined
because archetypable structures built from more basic entities are assumed instead, rather than concretely
modelled data types. These include 'types' for Address and PersonName which are found in
HL7v3 and ISO 13606.</p>
</div>
</div>
<div class="sect3">
<h4 id="_treatment_of_inbuilt_types"><a class="anchor" href="#_treatment_of_inbuilt_types"></a>A.2.4. Treatment of Inbuilt Types</h4>
<div class="paragraph">
<p>The HL7v3 data types do not make any assumptions about the existence of types typically built-in to
most object and relational formalisms, such as the basic types <code>String</code>, <code>Integer</code>, <code>Boolean</code>, <code>Real</code>,
<code>Double</code>, and the generic types <code>Set&lt;T&gt;</code>, <code>Bag&lt;T&gt;</code> and <code>Array&lt;T&gt;</code>. Hence, the types <code>ST</code>, <code>INT</code>, <code>REAL</code>,
<code>BL</code>, <code>SET&lt;T&gt;</code>, <code>BAG&lt;T&gt;</code> and so on are redefined by HL7. The supposed advantage of this approach is
that the semantics of all types in the HL7 system, right down to atomic data items are self-contained
in the definition, and do not rely on external semantics. Possible problems with this approach include
the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The HL7 definitions diverge from the OMG IDL and ISO 11404 definitions of the basic data
types, which could cause unexpected problems in software development and data processing
which is done in typical development technologies (object-oriented and relational).</p>
</li>
<li>
<p>The HL7 types <code>INT</code> and <code>REAL</code> are defined as subtypes of the <code>QTY</code> type, a relationship that
does not exist in any object-oriented formalism for these types (in particular, there is no substitutability
of a type called Integer or Real for a type called Qty built in to any object language).
The definitions of <code>INT</code> and <code>REAL</code> are also different from those found in most object
formalisms. This might cause some difficulty in implementation.</p>
</li>
<li>
<p>The binary data type <code>BIN</code> is represented as a <code>List&lt;BL&gt;</code> (where each item can be True, False, null), whereas it would normally be expected to be something like <code>Array&lt;Octet&gt;</code> (i.e. an array of bytes) in most software environments. There does not appear to be any utility in defining it as <code>List&lt;BL&gt;</code>, since binary data is almost without exception represented and processed as contiguous arrays of machine bytes.</p>
</li>
<li>
<p>The string type <code>ST</code> inherits from the encapsulated data type <code>ED</code>, which in turn inherits from the binary data type <code>BIN</code>. The result of this is that an instance of <code>ST</code> contains numerous data attributes relating to multi-media data, and the content is presumably represented as a <code>List&lt;BL&gt;</code>. This is a major departure from the standard understanding of a string in computer sciences, which is usually simply an array of characters.</p>
</li>
<li>
<p>The HL7 boolean type <code>BL</code> is a three-valued logic type due to the null marker approach (see below), not the usual two-valued type found in the Boolean concept in programming languages. The same is true of <code>INT</code> and <code>REAL:</code> due to the null marker design, "null" is a possible return value of an integer or real as well as true integer and real values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general, where differences exist between same-named types in HL7 and an underlying formalism
such as a programming language, there is likely to be some confusion in implementation. Further,
there is likely to be confusion in how to process instances of basic types which contain numerous
(and sometimes recursive) fields which are not used in the standard specifications of basic types.
The openEHR approach with respect to inbuilt types is to assume only those types found in the mainstream
object-oriented programming languages, and in particular, definitive formalisms like OMG
IDL and XML. While this means there there is in theory less control over these types than in the HL7
approach, the number of types involved is quite small, and the problem of bindings to the basic types
of object formalisms is well understood. Additionally, since it is recognised that some data types
defined by openEHR could clash with types found in some languages and libraries, all data type class
names are prefaced with "DV_" to avoid naming confusion, and to allow implementations of
openEHR types to co-exist with existing types in implementation formalisms.</p>
</div>
</div>
<div class="sect3">
<h4 id="_use_of_null_markers"><a class="anchor" href="#_use_of_null_markers"></a>A.2.5. Use of Null Markers</h4>
<div class="paragraph">
<p>All HL7 data types inherit from the <code>ANY</code> class (equivalent to the <code>DATA_VALUE</code> class in openEHR)
which contains the attributes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>BL nonNull;
CS nullFlavor;
BL isNull;</pre>
</div>
</div>
<div class="paragraph">
<p>The purpose of these attributes is to indicate whether a datum is Null, and for what reason. Since
some data type classes also appear as the attributes of other data types, the Null markers also indicate
whether any part of a datum is null. Thus, in the class Interval&lt;T&gt; shown below, all attributes have
the possibility of containing a Null marker.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-n">type</span> <span class="tok-n">Interval</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">alias</span> <span class="tok-n">IVL</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-kd">extends</span> <span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span>
<span class="tok-p">{</span>
    <span class="tok-n">T</span> <span class="tok-n">low</span><span class="tok-p">;</span>
    <span class="tok-n">BL</span> <span class="tok-n">lowClosed</span><span class="tok-p">;</span>
    <span class="tok-n">T</span> <span class="tok-n">high</span><span class="tok-p">;</span>
    <span class="tok-n">BL</span> <span class="tok-n">highClosed</span><span class="tok-p">;</span>
    <span class="tok-n">T</span><span class="tok-p">.</span><span class="tok-na">diff</span> <span class="tok-n">width</span><span class="tok-p">;</span>
    <span class="tok-n">T</span> <span class="tok-n">center</span><span class="tok-p">;</span>
    <span class="tok-n">IVL</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-nf">hull</span><span class="tok-p">(</span><span class="tok-n">IVL</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">x</span><span class="tok-p">);</span>
    <span class="tok-n">literal</span> <span class="tok-n">ST</span><span class="tok-p">;</span>
    <span class="tok-n">promotion</span> <span class="tok-n">IVL</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-p">(</span><span class="tok-n">T</span> <span class="tok-n">x</span><span class="tok-p">);</span>
    <span class="tok-n">demotion</span> <span class="tok-n">T</span><span class="tok-p">;</span>
<span class="tok-p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, this allows an interval with missing ends and width to exist as a structured type. The
consequence of the approach is that the entire model is essentially a model of "partial" data types;
<em>any attribute and any function call may return a Null value, as well as the true values of its type</em> (in
fact, in the specification, Null values are defined to be valid values of all data types). This design
decision was taken in HL7 so that any datum, no matter how unknown, would be structurally representable
in the same way as completely known data, enabling it to be processed in the same way as all
other instances of the same type.</p>
</div>
<div class="paragraph">
<p>However, an important object-oriented design principle has been ignored in this approach. In the
proper design of classes, properties and class invariants are stated. Invariants are statements which
describe the correctness conditions of instances of the class; the general rule is that the post-condition
of a creation routine (constructor) of a class must be that the invariants are satisfied. For example, an
invariant of the HL7 <code>IVL&lt;T&gt;</code> class could be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(exists(low) and exists(high)) or else
(exists(low) and exists(width)) or else
(exists(width) and exists(high))</pre>
</div>
</div>
<div class="paragraph">
<p>When an instance of this class is created, this condition should be satisfied, and remain satisfied for
the life of the instance. To do otherwise is to create instances of data which other software can make
no assumptions about, and is forced to check every single field, and then determine what to do in an
ad hoc way. (See <a href="#Meyer_OOSC2">Meyer (1997)</a> p366, <a href="#Booch1994">Booch (1994)</a> p43, <a href="#Kilov1994">Kilov &amp; Ross (1994)</a> p29 for detailed explanations of the invariant concept).
Possible consequences of the built-in Null marker design approach include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>since even HL7&#8217;s basic types <code>ST</code>, <code>INT</code>, <code>REAL</code>, <code>LIST&lt;&gt;</code>, <code>SET&lt;&gt;</code> include null markers, processing
of null values will be pervasive at the lowest level;</p>
</li>
<li>
<p>software will be more complex, both implementations of the data types, and of software
which handle them. This is because the software always has to deal with the possibility of
calls to routines and attributes returning Null values. Most clinical information systems to
date have taken the approach that a datum is either represented as an instance of a formal
type if fully known, or else as narrative text if only partial;</p>
</li>
<li>
<p>data may not be always be safely processable, since some software may not properly handle
the null values associated with attributes of partially known data items. Essentially, all software
which processes the data has to be "null-value aware", and make no assumptions at all
about whether a particular data instance is valid or not.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The HL7 data type model is in contrast with simpler approaches such as used in CEN, GEHR, and
openEHR, where data types are formal models of types such as Coded_term, Quantity and so on.
Rather than build the possibility of null markers into every attribute and class in the data types, a single
null marker is defined in relevant containing classes. This decision is based on the principle that
data types should be defined independently of their context of use. Hence, where data types are used
as data values, such as in the value attribute of the class <code>ELEMENT</code> from the openEHR EHR reference
model, the parallel features is_null and null_flavour are also defined. However, where data types
appear as attributes elsewhere in the model and there is no possibility of them being null, no null
markers are used. The figure below shows visually the difference between the two approaches.</p>
</div>
<div id="HL7_null_value" class="imageblock text-center text-center">
<div class="content">
<img src="data_types/diagrams/HL7_null_value.png" alt="HL7 null value" width="65%">
</div>
<div class="title">Figure 11. HL7 and Typical Null value approaches</div>
</div>
<div class="paragraph">
<p>The consequences of the standard software-engineering approach include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>data types can be more easily formally specified, since the semantics of invariants, attributes and operations do not need to include the possibility of null values;</p>
</li>
<li>
<p>software implementations are simpler;</p>
</li>
<li>
<p>data are always guaranteed to be safely processable for decision support and general querying, since no instance of a formal type will be created in the first place if the datum is very unreliable;</p>
</li>
<li>
<p>null markers only appear in models where they are relevent, rather than everywhere data types are used;</p>
</li>
<li>
<p>however, the openEHR data types do not automatically deal with missing or unknown internal attribute values (such as missing high and low values for an interval, partial dates etc).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to deal with the last possibility, various approaches are used in openEHR:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for most data which is not fully known, no data type instance is created, and a null marker is created. Depending on the design of the revelant archetypes, there will usually be the possibility of recording the datum in narrative form;</p>
</li>
<li>
<p><code>ENTRYs</code> in the openEHR EHR reference model include a certainty:Boolean attribute, for recording a level of doubt;</p>
</li>
<li>
<p>for particular data types which are often partial, special features are defined. The main types affected are <code>DV_DATE</code>, <code>DV_TIME</code>, and <code>DV_DATE_TIME</code>; the properties month_unknown, day_unknown, minute_unknown, and second_unknown (based on ISO 8601 semantics) are used to define explicitly the semantics of dates with a missing day, times with missing seconds and so on;</p>
</li>
<li>
<p>Intervals of date/time types include types generated when the parameter type is one of the partial classes, thus, types <code>DV_INTERVAL&lt;DV_DATE&gt;</code> (where one or both ends has an unknown part) are possible. This covers the need for intervals in which some date is missing from the end date/times, while not allowing intervals with completely missing items to be created;</p>
</li>
<li>
<p>for expressing uncertainy more precisely, probability distribution data types (based on the types defined in HL7) can be used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A consequence of the HL7 model is that data instances represented in XML or another structured text
format will be structurally the same regardless of whether there are Null values or not. A structured
form for partially known data (which would normally break the invariants of its class) may well be
useful for representing the data as part of a text field, making it easier to use for whatever processing
is possible later on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_terminology_approach"><a class="anchor" href="#_terminology_approach"></a>A.2.6. Terminology Approach</h4>
<div class="paragraph">
<p>The approach in openEHR is to assume the existence of a Terminology Server which is the sole
authoritative interface with terminologies of any kind, and is the only entity which can assume
responsibility for querying, post-coordination or other manipulations of terms. No allowance is made
for coordination of "modifiers", "qualifiers" or any other terms outside the service. As a consequence,
there are no coordination facilities in the type <code>DV_CODED_TEXT</code>, a departure from earlier versions of
the specification - any term provided from the terminology service must already be "coordinated",
either by the terminology service, or by one of the terminologies it accesses. This places the responsibility
of combining terms firmly in the knowledge part of the system, and prevents unsanctioned,
unvalidated combinations being created elsewhere.</p>
</div>
</div>
<div class="sect3">
<h4 id="_datetime_approach"><a class="anchor" href="#_datetime_approach"></a>A.2.7. Date/Time Approach</h4>
<div class="paragraph">
<p>The HL7 specification uses a single <code>TS</code> type to represent all logical dates, times, date/times, and partial
versions thereof. The openEHR specification defines distinct types for each, since these are the
types which occur in the real world, and it is easier to specify correctness constraints with this
approach. It is recognised that a single type may be used by some implementors (depending on what
is available in the language being used), however, the recommended practice is to wrap any such
types with the logical types described in this specification. This approach reduces the possibility for
any errors in transmitted data (since no strange combinations of year, &#8230;&#8203; , second can occur not explicitly
described in the type definitions).</p>
</div>
</div>
<div class="sect3">
<h4 id="_time_specification_types"><a class="anchor" href="#_time_specification_types"></a>A.2.8. Time Specification Types</h4>
<div class="paragraph">
<p>The HL7 approach for time specification appears to cover all reasonable requirements, but has some
minor problems, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the types <code>PIVL</code> and <code>EIVL</code> are declared as being generic types (i.e. <code>PIVL&lt;T:TS&gt;</code>,
<code>EIVL&lt;T:TS&gt;</code>), when there appears to be no reason for this;</p>
</li>
<li>
<p>the <code>PIVL</code>.<code><em>phase</em></code> attribute is used to represent an interval during which a activity occurs,
example given is "2 minutes every 8 hours". However, the "2 mins" is almost always part of
a therapeutic prescription of some kind, not part of the timing specification as such. Therapeutic
prescriptions have the form "do X every Y time", where the X describes what to do,
and how long to do it for (e.g. 40 mins massage, administer a drug slowly over 10 mins). In
fact, what we are really interested in with a timing specification is the specification of the
starting points in time of some activity, not a time-based graph of on/off points, whch is
effectively what the <code>PIVL</code> type is now.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_type_conversions"><a class="anchor" href="#_type_conversions"></a>A.2.9. Type Conversions</h4>
<div class="paragraph">
<p>The HL7v3 data types specification allows various type conversions, as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Three kinds of type conversions are defined: promotion, demotion, and character string literals.
Type conversions can be implicit or explicit. Implicit type conversion occurs when a certain
type is expected (e.g. as an argument to a statement) but a different type is actually provided.</pre>
</div>
</div>
<div class="paragraph">
<p>One notable kind of conversion possible in HL7 is of a value of any type <code>T</code> into an instance of
<code>Set&lt;T&gt;</code>, <code>List&lt;T&gt;</code>, <code>Bag&lt;T&gt;</code> or <code>IVL&lt;T&gt;</code> containing the value.
The openEHR model does not provide for any type conversions other than those automatically available
between inbuilt basic numeric types such as Integer, Float and Double, and between types
related by inheritance, as supported by all object-oriented languages.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GeHR_Aus2001"></a>Beale, T., &amp; Heard, S. (2000). <em>GEHR Technical Requirements</em>. Australia: GEHR Foundation. Retrieved from <a href="https://www.openehr.org/resources/related_projects/gehr_requirements.pdf" class="bare">https://www.openehr.org/resources/related_projects/gehr_requirements.pdf</a></p>
</div>
<div class="paragraph">
<p><a id="Booch1994"></a>Booch, G. (1994). <em>Object-oriented Analysis and Design with Applications</em> (Second.). Redwood City, CA, USA: Benjamin-Cummings Publishing Co., Inc.</p>
</div>
<div class="paragraph">
<p><a id="Synapses_Req_A"></a>Kalra, D. (1996). <em>The Synapses User Requirements and Functional Specification (Part A)</em>. Brussels: EU Telematics Application Programme.</p>
</div>
<div class="paragraph">
<p><a id="Kilov1994"></a>Kilov, H., &amp; Ross, J. (1994). <em>Information Modelling - an object-oriented approach</em>. Prentice Hall.</p>
</div>
<div class="paragraph">
<p><a id="Meyer_OOSC2"></a>Meyer, B. (1997). <em>Object-oriented Software Construction</em> (Second.). Prentice Hall.</p>
</div>
<div class="paragraph">
<p><a id="Richards1998"></a>Richards, E. G. (1998). <em>Mapping Time - The Calendar and its History</em>. Oxford University Press.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-11-17 15:24:01 UTC
</div>
</div>
<script src="https://specifications.openehr.org/js/asciidoctor-tabs.js"></script>
</body>
</html>